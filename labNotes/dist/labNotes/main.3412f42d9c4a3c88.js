"use strict";var vSe=Object.defineProperty,wSe=Object.defineProperties,ESe=Object.getOwnPropertyDescriptors,p7=Object.getOwnPropertySymbols,bSe=Object.prototype.hasOwnProperty,CSe=Object.prototype.propertyIsEnumerable,g7=(re,nn,Hn)=>nn in re?vSe(re,nn,{enumerable:!0,configurable:!0,writable:!0,value:Hn}):re[nn]=Hn,M=(re,nn)=>{for(var Hn in nn||(nn={}))bSe.call(nn,Hn)&&g7(re,Hn,nn[Hn]);if(p7)for(var Hn of p7(nn))CSe.call(nn,Hn)&&g7(re,Hn,nn[Hn]);return re},xt=(re,nn)=>wSe(re,ESe(nn));(self.webpackChunklabNotes=self.webpackChunklabNotes||[]).push([[179],{488:()=>{function re(n){return"function"==typeof n}function nn(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Hn=nn(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ml(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class yn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(re(r))try{r()}catch(s){e=s instanceof Hn?s.errors:[s]}const{_teardowns:i}=this;if(i){this._teardowns=null;for(const s of i)try{wP(s)}catch(o){e=null!=e?e:[],o instanceof Hn?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hn(e)}}add(e){var t;if(e&&e!==this)if(this.closed)wP(e);else{if(e instanceof yn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ml(t,e)}remove(e){const{_teardowns:t}=this;t&&ml(t,e),e instanceof yn&&e._removeParent(this)}}yn.EMPTY=(()=>{const n=new yn;return n.closed=!0,n})();const yP=yn.EMPTY;function vP(n){return n instanceof yn||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function wP(n){re(n)?n():n.unsubscribe()}const Yo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Sp={setTimeout(...n){const{delegate:e}=Sp;return((null==e?void 0:e.setTimeout)||setTimeout)(...n)},clearTimeout(n){const{delegate:e}=Sp;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function EP(n){Sp.setTimeout(()=>{const{onUnhandledError:e}=Yo;if(!e)throw n;e(n)})}function Xo(){}const m7=fw("C",void 0,void 0);function fw(n,e,t){return{kind:n,value:e,error:t}}let Zo=null;function Ap(n){if(Yo.useDeprecatedSynchronousErrorHandling){const e=!Zo;if(e&&(Zo={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Zo;if(Zo=null,t)throw r}}else n()}class pw extends yn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vP(e)&&e.add(this)):this.destination=w7}static create(e,t,r){return new gw(e,t,r)}next(e){this.isStopped?_w(fw("N",e,void 0),this):this._next(e)}error(e){this.isStopped?_w(fw("E",void 0,e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_w(m7,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class gw extends pw{constructor(e,t,r){let i;if(super(),re(e))i=e;else if(e){let s;({next:i,error:t,complete:r}=e),this&&Yo.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe()):s=e,i=null==i?void 0:i.bind(s),t=null==t?void 0:t.bind(s),r=null==r?void 0:r.bind(s)}this.destination={next:i?mw(i):Xo,error:mw(null!=t?t:bP),complete:r?mw(r):Xo}}}function mw(n,e){return(...t)=>{try{n(...t)}catch(r){Yo.useDeprecatedSynchronousErrorHandling?function(n){Yo.useDeprecatedSynchronousErrorHandling&&Zo&&(Zo.errorThrown=!0,Zo.error=n)}(r):EP(r)}}}function bP(n){throw n}function _w(n,e){const{onStoppedNotification:t}=Yo;t&&Sp.setTimeout(()=>t(n,e))}const w7={closed:!0,next:Xo,error:bP,complete:Xo},yw="function"==typeof Symbol&&Symbol.observable||"@@observable";function zs(n){return n}let Ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function(n){return n&&n instanceof pw||function(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}(n)&&vP(n)}(t)?t:new gw(t,r,i);return Ap(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=IP(r))((i,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(l){s(l),null==o||o.unsubscribe()}},s,i)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[yw](){return this}pipe(...t){return function(n){return 0===n.length?zs:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=IP(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function IP(n){var e;return null!==(e=null!=n?n:Yo.Promise)&&void 0!==e?e:Promise}const C7=nn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Te=(()=>{class n extends Ae{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new TP(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new C7}next(t){Ap(()=>{if(this._throwIfClosed(),!this.isStopped){const r=this.observers.slice();for(const i of r)i.next(t)}})}error(t){Ap(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ap(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?yP:(s.push(t),new yn(()=>ml(s,t)))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Ae;return t.source=this,t}}return n.create=(e,t)=>new TP(e,t),n})();class TP extends Te{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:yP}}function DP(n){return re(null==n?void 0:n.lift)}function nt(n){return e=>{if(DP(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}class ze extends pw{constructor(e,t,r,i,s){super(e),this.onFinalize=s,this._next=t?function(o){try{t(o)}catch(a){e.error(a)}}:super._next,this._error=i?function(o){try{i(o)}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function _e(n,e){return nt((t,r)=>{let i=0;t.subscribe(new ze(r,s=>{r.next(n.call(e,s,i++))}))})}function Jo(n){return this instanceof Jo?(this.v=n,this):new Jo(n)}function D7(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function(h){h.value instanceof Jo?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function S7(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const ww=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function MP(n){return re(null==n?void 0:n.then)}function kP(n){return re(n[yw])}function RP(n){return Symbol.asyncIterator&&re(null==n?void 0:n[Symbol.asyncIterator])}function PP(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const NP="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function OP(n){return re(null==n?void 0:n[NP])}function FP(n){return D7(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Jo(t.read());if(i)return yield Jo(void 0);yield yield Jo(r)}}finally{t.releaseLock()}})}function LP(n){return re(null==n?void 0:n.getReader)}function sr(n){if(n instanceof Ae)return n;if(null!=n){if(kP(n))return function(n){return new Ae(e=>{const t=n[yw]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(ww(n))return function(n){return new Ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(MP(n))return function(n){return new Ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,EP)})}(n);if(RP(n))return VP(n);if(OP(n))return function(n){return new Ae(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(LP(n))return function(n){return VP(FP(n))}(n)}throw PP(n)}function VP(n){return new Ae(e=>{(function(n,e){var t,r,i,s;return function(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=S7(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function rs(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Mt(n,e,t=1/0){return re(e)?Mt((r,i)=>_e((s,o)=>e(r,s,i,o))(sr(n(r,i))),t):("number"==typeof e&&(t=e),nt((r,i)=>function(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{c++;let m=!1;sr(t(g,u++)).subscribe(new ze(e,v=>{e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<r;){const v=l.shift();p(v)}h()}catch(v){e.error(v)}}))};return n.subscribe(new ze(e,f,()=>{d=!0,h()})),()=>{}}(r,i,n,t)))}function zu(n=1/0){return Mt(zs,n)}const is=new Ae(n=>n.complete());function BP(n){return n&&re(n.schedule)}function Ew(n){return n[n.length-1]}function UP(n){return re(Ew(n))?n.pop():void 0}function Gu(n){return BP(Ew(n))?n.pop():void 0}function xp(n,e=0){return nt((t,r)=>{t.subscribe(new ze(r,i=>rs(r,n,()=>r.next(i),e),()=>rs(r,n,()=>r.complete(),e),i=>rs(r,n,()=>r.error(i),e)))})}function Mp(n,e=0){return nt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function jP(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ae(t=>{rs(t,e,()=>{const r=n[Symbol.asyncIterator]();rs(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function qt(n,e){return e?function(n,e){if(null!=n){if(kP(n))return function(n,e){return sr(n).pipe(Mp(e),xp(e))}(n,e);if(ww(n))return function(n,e){return new Ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(MP(n))return function(n,e){return sr(n).pipe(Mp(e),xp(e))}(n,e);if(RP(n))return jP(n,e);if(OP(n))return function(n,e){return new Ae(t=>{let r;return rs(t,e,()=>{r=n[NP](),rs(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>re(null==r?void 0:r.return)&&r.return()})}(n,e);if(LP(n))return function(n,e){return jP(FP(n),e)}(n,e)}throw PP(n)}(n,e):sr(n)}function kp(...n){const e=Gu(n),t=function(n,e){return"number"==typeof Ew(n)?n.pop():1/0}(n),r=n;return r.length?1===r.length?sr(r[0]):zu(t)(qt(r,e)):is}function Kt(n){return n<=0?()=>is:nt((e,t)=>{let r=0;e.subscribe(new ze(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function bw(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(Kt(1)).subscribe(()=>n())}function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function Cw(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function xe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(xe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Iw(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const W7=Ge({__forward_ref__:Ge});function Qe(n){return n.__forward_ref__=Qe,n.toString=function(){return xe(this())},n}function de(n){return $P(n)?n():n}function $P(n){return"function"==typeof n&&n.hasOwnProperty(W7)&&n.__forward_ref__===Qe}class mr extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function oe(n){return"string"==typeof n?n:null==n?"":String(n)}function zn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():oe(n)}function Rp(n,e){const t=e?` in ${e}`:"";throw new mr("201",`No provider for ${zn(n)} found${t}`)}function yr(n,e){null==n&&function(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Le(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dw(n){return HP(n,Pp)||HP(n,GP)}function HP(n,e){return n.hasOwnProperty(e)?n[e]:null}function zP(n){return n&&(n.hasOwnProperty(Sw)||n.hasOwnProperty(J7))?n[Sw]:null}const Pp=Ge({\u0275prov:Ge}),Sw=Ge({\u0275inj:Ge}),GP=Ge({ngInjectableDef:Ge}),J7=Ge({ngInjectorDef:Ge});var ae=(()=>((ae=ae||{})[ae.Default=0]="Default",ae[ae.Host=1]="Host",ae[ae.Self=2]="Self",ae[ae.SkipSelf=4]="SkipSelf",ae[ae.Optional=8]="Optional",ae))();let Aw;function Gs(n){const e=Aw;return Aw=n,e}function WP(n,e,t){const r=Dw(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ae.Optional?null:void 0!==e?e:void Rp(xe(n),"Injector")}function Ws(n){return{toString:n}.toString()}var Or=(()=>((Or=Or||{})[Or.OnPush=0]="OnPush",Or[Or.Default=1]="Default",Or))(),ei=(()=>{return(n=ei||(ei={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ei;var n})();const t8="undefined"!=typeof globalThis&&globalThis,n8="undefined"!=typeof window&&window,r8="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$e=t8||"undefined"!=typeof global&&global||n8||r8,_l={},We=[],Np=Ge({\u0275cmp:Ge}),xw=Ge({\u0275dir:Ge}),Mw=Ge({\u0275pipe:Ge}),qP=Ge({\u0275mod:Ge}),os=Ge({\u0275fac:Ge}),Wu=Ge({__NG_ELEMENT_ID__:Ge});let i8=0;function Gn(n){return Ws(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Or.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||We,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ei.Emulated,id:"c",styles:n.styles||We,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=i8++,r.inputs=XP(n.inputs,t),r.outputs=XP(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(KP):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(QP):null,r})}function KP(n){return Mn(n)||function(n){return n[xw]||null}(n)}function QP(n){return function(n){return n[Mw]||null}(n)}const YP={};function Be(n){return Ws(()=>{const e={type:n.type,bootstrap:n.bootstrap||We,declarations:n.declarations||We,imports:n.imports||We,exports:n.exports||We,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(YP[n.id]=n.type),e})}function XP(n,e){if(null==n)return _l;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const G=Gn;function Mn(n){return n[Np]||null}function Fr(n,e){const t=n[qP]||null;if(!t&&!0===e)throw new Error(`Type ${xe(n)} does not have '\u0275mod' property.`);return t}function Ci(n){return Array.isArray(n)&&"object"==typeof n[1]}function ni(n){return Array.isArray(n)&&!0===n[1]}function Pw(n){return 0!=(8&n.flags)}function Vp(n){return 2==(2&n.flags)}function Bp(n){return 1==(1&n.flags)}function ri(n){return null!==n.template}function u8(n){return 0!=(512&n[2])}function ia(n,e){return n.hasOwnProperty(os)?n[os]:null}class f8{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Wn(){return JP}function JP(n){return n.type.prototype.ngOnChanges&&(n.setInput=g8),p8}function p8(){const n=tN(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===_l)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function g8(n,e,t,r){const i=tN(n)||function(n,e){return n[eN]=e}(n,{previous:_l,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new f8(l&&l.currentValue,e,o===_l),n[r]=e}Wn.ngInherit=!0;const eN="__ngSimpleChanges__";function tN(n){return n[eN]||null}const nN="http://www.w3.org/2000/svg";let Fw;function vt(n){return!!n.listen}const iN={createRenderer:(n,e)=>void 0!==Fw?Fw:"undefined"!=typeof document?document:void 0};function Lt(n){for(;Array.isArray(n);)n=n[0];return n}function Up(n,e){return Lt(e[n])}function Br(n,e){return Lt(e[n.index])}function Vw(n,e){return n.data[e]}function wr(n,e){const t=e[n];return Ci(t)?t:t[0]}function sN(n){return 4==(4&n[2])}function Bw(n){return 128==(128&n[2])}function Ks(n,e){return null==e?null:n[e]}function oN(n){n[18]=0}function Uw(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const ee={lFrame:pN(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function aN(){return ee.bindingsEnabled}function D(){return ee.lFrame.lView}function Me(){return ee.lFrame.tView}function Cl(n){return ee.lFrame.contextLView=n,n[8]}function Qt(){let n=lN();for(;null!==n&&64===n.type;)n=n.parent;return n}function lN(){return ee.lFrame.currentTNode}function Ii(n,e){const t=ee.lFrame;t.currentTNode=n,t.isParent=e}function jw(){return ee.lFrame.isParent}function $w(){ee.lFrame.isParent=!1}function jp(){return ee.isInCheckNoChangesMode}function $p(n){ee.isInCheckNoChangesMode=n}function qn(){const n=ee.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Il(){return ee.lFrame.bindingIndex++}function M8(n,e){const t=ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,Hw(e)}function Hw(n){ee.lFrame.currentDirectiveIndex=n}function zw(n){const e=ee.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function dN(){return ee.lFrame.currentQueryIndex}function Gw(n){ee.lFrame.currentQueryIndex=n}function R8(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function hN(n,e,t){if(t&ae.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ae.Host||(i=R8(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=ee.lFrame=fN();return r.currentTNode=e,r.lView=n,!0}function Hp(n){const e=fN(),t=n[1];ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function fN(){const n=ee.lFrame,e=null===n?null:n.child;return null===e?pN(n):e}function pN(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function gN(){const n=ee.lFrame;return ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const mN=gN;function zp(){const n=gN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Kn(){return ee.lFrame.selectedIndex}function Qs(n){ee.lFrame.selectedIndex=n}function wt(){const n=ee.lFrame;return Vw(n.tView,n.selectedIndex)}function Gp(){ee.lFrame.currentNamespace=nN}function Wp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function qp(n,e,t){_N(n,e,3,t)}function Kp(n,e,t,r){(3&n[2])===t&&_N(n,e,t,r)}function Ww(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function _N(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(U8(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function U8(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Xu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Qp(n,e,t){const r=vt(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],l=t[i++];r?n.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=t[++i];Kw(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function yN(n){return 3===n||4===n||6===n}function Kw(n){return 64===n.charCodeAt(0)}function Yp(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||vN(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function vN(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function wN(n){return-1!==n}function Tl(n){return 32767&n}function Dl(n,e){let t=function(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Qw=!0;function Xp(n){const e=Qw;return Qw=n,e}let W8=0;function Ju(n,e){const t=Xw(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Yw(r.data,n),Yw(e,null),Yw(r.blueprint,null));const i=Zp(n,e),s=n.injectorIndex;if(wN(i)){const o=Tl(i),a=Dl(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Yw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Xw(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Zp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Jp(n,e,t){!function(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wu)&&(r=t[Wu]),null==r&&(r=t[Wu]=W8++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function CN(n,e,t){if(t&ae.Optional)return n;Rp(e,"NodeInjector")}function IN(n,e,t,r){if(t&ae.Optional&&void 0===r&&(r=null),0==(t&(ae.Self|ae.Host))){const i=n[9],s=Gs(void 0);try{return i?i.get(e,r,t&ae.Optional):WP(e,r,t&ae.Optional)}finally{Gs(s)}}return CN(r,e,t)}function TN(n,e,t,r=ae.Default,i){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Wu)?n[Wu]:void 0;return"number"==typeof e?e>=0?255&e:Q8:e}(t);if("function"==typeof s){if(!hN(e,n,r))return r&ae.Host?CN(i,t,r):IN(e,t,r,i);try{const o=s(r);if(null!=o||r&ae.Optional)return o;Rp(t)}finally{mN()}}else if("number"==typeof s){let o=null,a=Xw(n,e),l=-1,c=r&ae.Host?e[16][6]:null;for((-1===a||r&ae.SkipSelf)&&(l=-1===a?Zp(n,e):e[a+8],-1!==l&&AN(r,!1)?(o=e[1],a=Tl(l),e=Dl(l,e)):a=-1);-1!==a;){const u=e[1];if(SN(s,a,u.data)){const d=Y8(a,e,t,o,r,c);if(d!==DN)return d}l=e[a+8],-1!==l&&AN(r,e[1].data[a+8]===c)&&SN(s,a,e)?(o=u,a=Tl(l),e=Dl(l,e)):a=-1}}}return IN(e,t,r,i)}const DN={};function Q8(){return new Sl(Qt(),D())}function Y8(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],u=eg(a,o,t,null==r?Vp(a)&&Qw:r!=o&&0!=(3&a.type),i&ae.Host&&s===a);return null!==u?ed(e,o,u,a):DN}function eg(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){const f=o[l];if(f&&ri(f)&&f.type===t)return l}return null}function ed(n,e,t,r){let i=n[t];const s=e.data;if(function(n){return n instanceof Xu}(i)){const o=i;o.resolving&&function(n,e){throw new mr("200",`Circular dependency in DI detected for ${n}`)}(zn(s[t]));const a=Xp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Gs(o.injectImpl):null;hN(n,r,ae.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=JP(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Gs(l),Xp(a),o.resolving=!1,mN()}}return i}function SN(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function AN(n,e){return!(n&ae.Self||n&ae.Host&&e)}class Sl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return TN(this._tNode,this._lView,e,r,t)}}function lr(n){return Ws(()=>{const e=n.prototype.constructor,t=e[os]||Zw(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[os]||Zw(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Zw(n){return $P(n)?()=>{const e=Zw(de(n));return e&&e()}:ia(n)}function td(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(yN(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Qt(),n)}const xl="__parameters__";function kl(n,e,t){return Ws(()=>{const r=function(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(xl)?l[xl]:Object.defineProperty(l,xl,{value:[]})[xl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class j{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const J8=new j("AnalyzeForEntryComponents");function Ur(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),Ur(r,e)):e!==n&&e.push(r)}return e}function Ti(n,e){n.forEach(t=>Array.isArray(t)?Ti(t,e):e(t))}function xN(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function tg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function sd(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Er(n,e,t){let r=Rl(n,e);return r>=0?n[1|r]=t:(r=~r,function(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function tE(n,e){const t=Rl(n,e);if(t>=0)return n[1|t]}function Rl(n,e){return function(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const od={},rE="__NG_DI_FLAG__",rg="ngTempTokenPath",c9=/\n/gm,NN="__source",d9=Ge({provide:String,useValue:Ge});let ad;function ON(n){const e=ad;return ad=n,e}function h9(n,e=ae.Default){if(void 0===ad)throw new Error("inject() must be called from an injection context");return null===ad?WP(n,void 0,e):ad.get(n,e&ae.Optional?null:void 0,e)}function E(n,e=ae.Default){return(Aw||h9)(de(n),e)}const LN=E;function iE(n){const e=[];for(let t=0;t<n.length;t++){const r=de(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,s=ae.Default;for(let o=0;o<r.length;o++){const a=r[o],l=f9(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(E(i,s))}else e.push(E(r))}return e}function ld(n,e){return n[rE]=e,n.prototype[rE]=e,n}function f9(n){return n[rE]}const cd=ld(kl("Inject",n=>({token:n})),-1),qe=ld(kl("Optional"),8),Pl=ld(kl("SkipSelf"),4);class GN{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Xs(n){return n instanceof GN?n.changingThisBreaksApplicationSecurity:n}const O9=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,F9=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Vt=(()=>((Vt=Vt||{})[Vt.NONE=0]="NONE",Vt[Vt.HTML=1]="HTML",Vt[Vt.STYLE=2]="STYLE",Vt[Vt.SCRIPT=3]="SCRIPT",Vt[Vt.URL=4]="URL",Vt[Vt.RESOURCE_URL=5]="RESOURCE_URL",Vt))();function cg(n){const e=function(){const n=D();return n&&n[12]}();return e?e.sanitize(Vt.URL,n)||"":function(n,e){const t=function(n){return n instanceof GN&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}(n,"URL")?Xs(n):function(n){return(n=String(n)).match(O9)||n.match(F9)?n:"unsafe:"+n}(oe(n))}const tO="__ngContext__";function Rn(n,e){n[tO]=e}function fE(n){const e=function(n){return n[tO]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function gE(n){return n.ngOriginalError}function oK(n,...e){n.error(...e)}class Fl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=(n=e)&&n.ngErrorLogger||oK;var n;r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&gE(e);for(;t&&gE(t);)t=gE(t);return t||null}}const oO=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($e))();function Si(n){return n instanceof Function?n():n}var br=(()=>((br=br||{})[br.Important=1]="Important",br[br.DashCase=2]="DashCase",br))();function _E(n,e){return undefined(n,e)}function gd(n){const e=n[3];return ni(e)?e[3]:e}function yE(n){return dO(n[13])}function vE(n){return dO(n[4])}function dO(n){for(;null!==n&&!ni(n);)n=n[4];return n}function Vl(n,e,t,r,i){if(null!=r){let s,o=!1;ni(r)?s=r:Ci(r)&&(o=!0,r=r[0]);const a=Lt(r);0===n&&null!==t?null==i?_O(e,t,a):sa(e,t,a,i||null,!0):1===n&&null!==t?sa(e,t,a,i||null,!0):2===n?function(n,e,t){const r=ug(n,e);r&&function(n,e,t,r){vt(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,r,i){const s=t[7];s!==Lt(t)&&Vl(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];md(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function EE(n,e,t){return vt(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function fO(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Uw(i,-1)),t.splice(r,1)}function bE(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&fO(i,r),e>0&&(n[t-1][4]=r[4]);const s=tg(n,10+e);!function(n,e){md(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function pO(n,e){if(!(256&e[2])){const t=e[11];vt(t)&&t.destroyNode&&md(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return CE(n[1],n);for(;e;){let t=null;if(Ci(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Ci(e)&&CE(e[1],e),e=e[3];null===e&&(e=n),Ci(e)&&CE(e[1],e),t=e&&e[4]}e=t}}(e)}}function CE(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Xu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):Lt(e[o]),l=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&vt(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&ni(e[3])){t!==e[3]&&fO(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function gO(n,e,t){return function(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===ei.None||i===ei.Emulated)return null}return Br(r,t)}(n,e.parent,t)}function sa(n,e,t,r,i){vt(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function _O(n,e,t){vt(n)?n.appendChild(e,t):e.appendChild(t)}function yO(n,e,t,r,i){null!==r?sa(n,e,t,r,i):_O(n,e,t)}function ug(n,e){return vt(n)?n.parentNode(e):e.parentNode}function vO(n,e,t){return EO(n,e,t)}let EO=function(n,e,t){return 40&n.type?Br(n,t):null};function dg(n,e,t,r){const i=gO(n,r,e),s=e[11],a=vO(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)yO(s,i,t[l],a,!1);else yO(s,i,t,a,!1)}function hg(n,e){if(null!==e){const t=e.type;if(3&t)return Br(e,n);if(4&t)return TE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return hg(n,r);{const i=n[e.index];return ni(i)?TE(-1,i):Lt(i)}}if(32&t)return _E(e,n)()||Lt(n[e.index]);{const r=CO(n,e);return null!==r?Array.isArray(r)?r[0]:hg(gd(n[16]),r):hg(n,e.next)}}return null}function CO(n,e){return null!==e?n[16][6].projection[e.projection]:null}function TE(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return hg(r,i)}return e[7]}function DE(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Rn(Lt(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)DE(n,e,t.child,r,i,s,!1),Vl(e,n,i,a,s);else if(32&l){const c=_E(t,r);let u;for(;u=c();)Vl(e,n,i,u,s);Vl(e,n,i,a,s)}else 16&l?TO(n,e,r,t,i,s):Vl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function md(n,e,t,r,i,s){DE(t,r,n.firstChild,e,i,s,!1)}function TO(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Vl(e,n,i,l[c],s);else DE(n,e,l,o[3],i,s,!0)}function DO(n,e,t){vt(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function SE(n,e,t){vt(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function SO(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const AO="ng-template";function NK(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==SO(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function xO(n){return 4===n.type&&n.value!==AO}function OK(n,e,t){return e===(4!==n.type||t?n.value:AO)}function FK(n,e,t){let r=4;const i=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(yN(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!OK(n,l,t)||""===l&&1===e.length){if(ii(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!NK(n.attrs,c,t)){if(ii(r))return!1;o=!0}continue}const d=LK(8&r?"class":l,i,xO(n),t);if(-1===d){if(ii(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==SO(f,c,0)||2&r&&c!==h){if(ii(r))return!1;o=!0}}}}else{if(!o&&!ii(r)&&!ii(l))return!1;if(o&&ii(l))continue;o=!1,r=l|1&r}}return ii(r)||o}function ii(n){return 0==(1&n)}function LK(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function MO(n,e,t=!1){for(let r=0;r<e.length;r++)if(FK(n,e[r],t))return!0;return!1}function jK(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function kO(n,e){return n?":not("+e.trim()+")":e}function $K(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ii(o)&&(e+=kO(s,i),i=""),r=o,s=s||!ii(r);t++}return""!==i&&(e+=kO(s,i)),e}const le={};function Et(n){RO(Me(),D(),Kn()+n,jp())}function RO(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&qp(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Kp(e,s,0,t)}Qs(t)}function fg(n,e){return n<<17|e<<2}function si(n){return n>>17&32767}function AE(n){return 2|n}function cs(n){return(131068&n)>>2}function xE(n,e){return-131069&n|e<<2}function ME(n){return 1|n}function HO(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];Gw(i),o.contentQueries(2,e[s],s)}}}function _d(n,e,t,r,i,s,o,a,l,c){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,oN(u),u[3]=u[15]=n,u[8]=t,u[10]=o||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=s,u[16]=2==e.type?n[16]:u,u}function Bl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function(n,e,t,r,i){const s=lN(),o=jw(),l=n.data[e]=function(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),ee.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function(){const n=ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ii(s,!0),s}function Ul(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function yd(n,e,t){Hp(e);try{const r=n.viewQuery;null!==r&&KE(1,r,t);const i=n.template;null!==i&&zO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&HO(n,e),n.staticViewQueries&&KE(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)IQ(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,zp()}}function jl(n,e,t,r){const i=e[2];if(256==(256&i))return;Hp(e);const s=jp();try{oN(e),function(n){ee.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&zO(n,e,t,2,r);const o=3==(3&i);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&qp(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Kp(e,c,0,null),Ww(e,0)}if(function(n){for(let e=yE(n);null!==e;e=vE(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&Uw(s,1),i[2]|=1024}}}(e),function(n){for(let e=yE(n);null!==e;e=vE(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Bw(r)&&jl(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&HO(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&qp(e,c)}else{const c=n.contentHooks;null!==c&&Kp(e,c,1),Ww(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Qs(~i);else{const s=i,o=t[++r],a=t[++r];M8(o,s),a(2,e[s])}}}finally{Qs(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)CQ(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&KE(2,l,r),!s)if(o){const c=n.viewCheckHooks;null!==c&&qp(e,c)}else{const c=n.viewHooks;null!==c&&Kp(e,c,2),Ww(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Uw(e[3],-1))}finally{zp()}}function iQ(n,e,t,r){const i=e[10],s=!jp(),o=sN(e);try{s&&!o&&i.begin&&i.begin(),o&&yd(n,e,r),jl(n,e,t,r)}finally{s&&!o&&i.end&&i.end()}}function zO(n,e,t,r,i){const s=Kn(),o=2&r;try{Qs(-1),o&&e.length>20&&RO(n,e,20,jp()),t(r,i)}finally{Qs(s)}}function UE(n,e,t){!aN()||(function(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Ju(t,e),Rn(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=ri(l);c&&yQ(e,t,l);const u=ed(e,n,a,t);Rn(u,e),null!==o&&vQ(0,a-i,u,l,0,o),c&&(wr(t.index,e)[8]=u)}}(n,e,t,Br(t,e)),128==(128&t.flags)&&function(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=ee.lFrame.currentDirectiveIndex;try{Qs(o);for(let l=r;l<i;l++){const c=n.data[l],u=e[l];Hw(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&JO(c,u)}}finally{Qs(-1),Hw(a)}}(n,e,t))}function jE(n,e,t=Br){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function WO(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=mg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function mg(n,e,t,r,i,s,o,a,l,c){const u=20+r,d=u+i,h=function(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:le);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function QO(n,e,t,r){const i=o1(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&a1(n).push(r,i.length-1))}function YO(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Cr(n,e,t,r,i,s,o,a){const l=Br(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(u1(n,t,u,r,i),Vp(e)&&function(n,e){const t=wr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,vt(s)?s.setProperty(l,r,i):Kw(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function $E(n,e,t,r){let i=!1;if(aN()){const s=function(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];MO(t,o.selectors,!1)&&(i||(i=[]),Jp(Ju(t,e),n,o.type),ri(o)?(e1(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,t1(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=Ul(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=Yp(t.mergedAttrs,d.hostAttrs),n1(n,t,e,c,d),_Q(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const u=i[c],d=u.inputs,h=null===s||xO(e)?null:wQ(d,s);o.push(h),a=YO(d,c,a),l=YO(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(n,t)}o&&function(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new mr("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=Yp(t.mergedAttrs,t.attrs),i}function ZO(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function JO(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function e1(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function _Q(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ri(e)&&(t[""]=n)}}function t1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function n1(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ia(i.type)),o=new Xu(s,ri(i),null);n.blueprint[r]=o,t[r]=o,ZO(n,e,0,r,Ul(n,t,i.hostVars,le),i)}function yQ(n,e,t){const r=Br(e,n),i=WO(t),s=n[10],o=_g(n,_d(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function Ai(n,e,t,r,i,s){const o=Br(n,e);!function(n,e,t,r,i,s,o){if(null==s)vt(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?oe(s):o(s,r||"",i);vt(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function vQ(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function wQ(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function r1(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function CQ(n,e){const t=wr(e,n);if(Bw(t)){const r=t[1];80&t[2]?jl(r,t,r.template,t[8]):t[5]>0&&zE(t)}}function zE(n){for(let r=yE(n);null!==r;r=vE(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];jl(o,s,o.template,s[8])}else s[5]>0&&zE(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=wr(t[r],n);Bw(i)&&i[5]>0&&zE(i)}}function IQ(n,e){const t=wr(e,n),r=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),yd(r,t,t[8])}function _g(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function GE(n){for(;n;){n[2]|=64;const e=gd(n);if(u8(n)&&!e)return n;n=e}return null}function qE(n,e,t){const r=e[10];r.begin&&r.begin();try{jl(n,e,n.template,t)}catch(i){throw c1(e,i),i}finally{r.end&&r.end()}}function s1(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=fE(t),i=r[1];iQ(i,r,i.template,t)}}(n[8])}function KE(n,e,t){Gw(0),e(n,t)}const xQ=(()=>Promise.resolve(null))();function o1(n){return n[7]||(n[7]=[])}function a1(n){return n.cleanup||(n.cleanup=[])}function l1(n,e,t){return(null===n||ri(n))&&(t=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function c1(n,e){const t=n[9],r=t?t.get(Fl,null):null;r&&r.handleError(e)}function u1(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function us(n,e,t){const r=Up(e,n);!function(n,e,t){vt(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function yg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Iw(i,a):2==s&&(r=Iw(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const QE=new j("INJECTOR",-1);class d1{get(e,t=od){if(t===od){const r=new Error(`NullInjectorError: No provider for ${xe(e)}!`);throw r.name="NullInjectorError",r}return t}}const YE=new j("Set Injector scope."),vd={},RQ={};let XE;function h1(){return void 0===XE&&(XE=new d1),XE}function f1(n,e=null,t=null,r){const i=p1(n,e,t,r);return i._resolveInjectorDefTypes(),i}function p1(n,e=null,t=null,r){return new PQ(n,t,e||h1(),r)}class PQ{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&Ti(t,a=>this.processProvider(a,e,t)),Ti([e],a=>this.processInjectorType(a,[],s)),this.records.set(QE,$l(void 0,this));const o=this.records.get(YE);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:xe(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=od,r=ae.Default){this.assertNotDestroyed();const i=ON(this),s=Gs(void 0);try{if(!(r&ae.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=("function"==typeof(n=e)||"object"==typeof n&&n instanceof j)&&Dw(e);a=l&&this.injectableDefInScope(l)?$l(ZE(e),vd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&ae.Self?h1():this.parent).get(e,t=r&ae.Optional&&t===od?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[rg]=o[rg]||[]).unshift(xe(e)),i)throw o;return function(n,e,t,r){const i=n[rg];throw e[NN]&&i.unshift(e[NN]),n.message=function(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=xe(e);if(Array.isArray(e))i=e.map(xe).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):xe(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(c9,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[rg]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Gs(s),ON(i)}var n}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(xe(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,r){if(!(e=de(e)))return!1;let i=zP(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=zP(s)),null==i)return!1;if(null!=i.imports&&!a){let u;r.push(o);try{Ti(i.imports,d=>{this.processInjectorType(d,t,r)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];Ti(f,p=>this.processProvider(p,h,f||We))}}this.injectorDefTypes.add(o);const l=ia(o)||(()=>new o);this.records.set(o,$l(l,vd));const c=i.providers;if(null!=c&&!a){const u=e;Ti(c,d=>this.processProvider(d,u,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=Hl(e=de(e))?e:de(e&&e.provide);const s=(n=e,m1(n)?$l(void 0,n.useValue):$l(g1(n),vd));var n;if(Hl(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=$l(void 0,vd,!0),o.factory=()=>iE(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===vd&&(t.value=RQ,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}injectableDefInScope(e){if(!e.providedIn)return!1;const t=de(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function ZE(n){const e=Dw(n),t=null!==e?e.factory:ia(n);if(null!==t)return t;if(n instanceof j)throw new Error(`Token ${xe(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const r=sd(e,"?");throw new Error(`Can't resolve all parameters for ${xe(n)}: (${r.join(", ")}).`)}const t=function(n){const e=n&&(n[Pp]||n[GP]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function g1(n,e,t){let r;if(Hl(n)){const i=de(n);return ia(i)||ZE(i)}if(m1(n))r=()=>de(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...iE(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))r=()=>E(de(n.useExisting));else{const i=de(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return ia(i)||ZE(i);r=()=>new i(...iE(n.deps))}return r}function $l(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function m1(n){return null!==n&&"object"==typeof n&&d9 in n}function Hl(n){return"function"==typeof n}let Pe=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return f1({name:""},r,t,"");{const s=null!=(i=t.name)?i:"";return f1({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=od,n.NULL=new d1,n.\u0275prov=V({token:n,providedIn:"any",factory:()=>E(QE)}),n.__NG_ELEMENT_ID__=-1,n})();function QQ(n,e){Wp(fE(n)[1],Qt())}function Oe(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ri(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=tb(n.inputs),o.declaredInputs=tb(n.declaredInputs),o.outputs=tb(n.outputs);const a=i.hostBindings;a&&JQ(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&XQ(n,l),c&&ZQ(n,c),Cw(n.inputs,i.inputs),Cw(n.declaredInputs,i.declaredInputs),Cw(n.outputs,i.outputs),ri(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Oe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Yp(i.hostAttrs,t=Yp(t,i.hostAttrs))}}(r)}function tb(n){return n===_l?{}:n===We?[]:n}function XQ(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function ZQ(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function JQ(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let vg=null;function zl(){if(!vg){const n=$e.Symbol;if(n&&n.iterator)vg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(vg=r)}}}return vg}function wd(n){return!!nb(n)&&(Array.isArray(n)||!(n instanceof Map)&&zl()in n)}function nb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function xi(n,e,t){return n[e]=t}function Pn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function sn(n,e,t,r){const i=D();return Pn(i,Il(),e)&&(Me(),Ai(wt(),i,n,e,t,r)),sn}function Wl(n,e,t,r){return Pn(n,Il(),t)?e+oe(t)+r:le}function ai(n,e,t,r,i,s,o,a){const l=D(),c=Me(),u=n+20,d=c.firstCreatePass?function(n,e,t,r,i,s,o,a,l){const c=e.consts,u=Bl(e,n,4,o||null,Ks(c,a));$E(e,t,u,Ks(c,l)),Wp(e,u);const d=u.tViews=mg(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,s,o):c.data[u];Ii(d,!1);const h=l[11].createComment("");dg(c,l,h,d),Rn(h,l),_g(l,l[u]=r1(h,l,h,d)),Bp(d)&&UE(c,l,d),null!=o&&jE(l,d,a)}function bd(n){return function(n,e){return n[e]}(ee.lFrame.contextLView,20+n)}function b(n,e=ae.Default){const t=D();return null===t?E(n,e):TN(Qt(),t,de(n),e)}function bg(){throw new Error("invalid")}function Xt(n,e,t){const r=D();return Pn(r,Il(),e)&&Cr(Me(),wt(),r,n,e,r[11],t,!1),Xt}function ab(n,e,t,r,i){const o=i?"class":"style";u1(n,t,e.inputs[o],o,r)}function X(n,e,t,r){const i=D(),s=Me(),o=20+n,a=i[11],l=i[o]=EE(a,e,ee.lFrame.currentNamespace),c=s.firstCreatePass?function(n,e,t,r,i,s,o){const a=e.consts,c=Bl(e,n,2,i,Ks(a,s));return $E(e,t,c,Ks(a,o)),null!==c.attrs&&yg(c,c.attrs,!1),null!==c.mergedAttrs&&yg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];Ii(c,!0);const u=c.mergedAttrs;null!==u&&Qp(a,l,u);const d=c.classes;null!==d&&SE(a,l,d);const h=c.styles;null!==h&&DO(a,l,h),64!=(64&c.flags)&&dg(s,i,l,c),0===ee.lFrame.elementDepthCount&&Rn(l,i),ee.lFrame.elementDepthCount++,Bp(c)&&(UE(s,i,c),function(n,e,t){if(Pw(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,i)),null!==r&&jE(i,c)}function J(){let n=Qt();jw()?$w():(n=n.parent,Ii(n,!1));const e=n;ee.lFrame.elementDepthCount--;const t=Me();t.firstCreatePass&&(Wp(t,n),Pw(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&ab(t,e,D(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&ab(t,e,D(),e.stylesWithoutHost,!1)}function on(n,e,t,r){X(n,e,t,r),J()}function Cg(){return D()}function Cd(n){return!!n&&"function"==typeof n.then}const lb=function(n){return!!n&&"function"==typeof n.subscribe};function it(n,e,t,r){const i=D(),s=Me(),o=Qt();return X1(s,i,i[11],o,n,e,!!t,r),it}function Ig(n,e){const t=Qt(),r=D(),i=Me();return X1(i,r,l1(zw(i.data),t,r),t,n,e,!1),Ig}function X1(n,e,t,r,i,s,o,a){const l=Bp(r),u=n.firstCreatePass&&a1(n),d=e[8],h=o1(e);let f=!0;if(3&r.type||a){const m=Br(r,e),v=a?a(m):m,y=h.length,I=a?x=>a(Lt(x[r.index])):r.index;if(vt(t)){let x=null;if(!a&&l&&(x=function(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=s,x.__ngLastListenerFn__=s,f=!1;else{s=cb(r,e,d,s,!1);const $=t.listen(v,i,s);h.push(s,$),u&&u.push(i,I,y,y+1)}}else s=cb(r,e,d,s,!0),v.addEventListener(i,s,o),h.push(s),u&&u.push(i,I,y,o)}else s=cb(r,e,d,s,!1);const p=r.outputs;let g;if(f&&null!==p&&(g=p[i])){const m=g.length;if(m)for(let v=0;v<m;v+=2){const W=e[g[v]][g[v+1]].subscribe(s),pe=h.length;h.push(s,W),u&&u.push(i,r.index,pe,-(pe+1))}}}function Z1(n,e,t,r){try{return!1!==t(r)}catch(i){return c1(n,i),!1}}function cb(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?wr(n.index,e):e;0==(32&e[2])&&GE(a);let l=Z1(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=Z1(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function li(n=1){return function(n){return(ee.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,ee.lFrame.contextLView))[8]}(n)}function kY(n,e){let t=null;const r=function(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?MO(n,s,!0):jK(r,s))return i}else t=i}return t}function ub(n,e,t){return db(n,"",e,"",t),ub}function db(n,e,t,r,i){const s=D(),o=Wl(s,e,t,r);return o!==le&&Cr(Me(),wt(),s,n,o,s[11],i,!1),db}function cF(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?si(s):cs(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];NY(n[a],e)&&(l=!0,n[a+1]=r?ME(u):AE(u)),a=r?si(u):cs(u)}l&&(n[t+1]=r?AE(s):ME(s))}function NY(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Rl(n,e)>=0}function nc(n,e,t){return ci(n,e,t,!1),nc}function eo(n,e){return ci(n,e,null,!0),eo}function ci(n,e,t,r){const i=D(),s=Me(),o=function(n){const e=ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Kn()],o=function(n,e){return e>=n.expandoStartIndex}(n,t);(function(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function(n,e,t,r){const i=zw(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Id(t=hb(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=hb(i,n,e,t,r),null===s){let l=function(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==cs(r))return n[si(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=hb(null,n,e,l[1],r),l=Id(l,e.attrs,r),function(n,e,t,r){n[si(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Id(r,n[s].hostAttrs,t);return Id(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=si(o),l=cs(o);n[r]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Rl(d,u)>0)&&(c=!0)}else u=t;if(i)if(0!==l){const h=si(n[a+1]);n[r+1]=fg(h,a),0!==h&&(n[h+1]=xE(n[h+1],r)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=fg(a,0),0!==a&&(n[a+1]=xE(n[a+1],r)),a=r;else n[r+1]=fg(l,0),0===a?a=r:n[l+1]=xE(n[l+1],r),l=r;c&&(n[r+1]=AE(n[r+1])),cF(n,u,r,!0),cF(n,u,r,!1),function(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Rl(s,e)>=0&&(t[r+1]=ME(t[r+1]))}(e,u,n,r,s),o=fg(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==le&&Pn(i,o,e)&&function(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Tg(function(n){return 1==(1&n)}(c)?wF(l,e,t,i,cs(c),o):void 0)||(Tg(s)||function(n){return 2==(2&n)}(c)&&(s=wF(l,null,t,i,a,o)),function(n,e,t,r,i){const s=vt(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:br.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=br.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,Up(Kn(),t),i,s))}(s,s.data[Kn()],i,i[11],n,i[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=xe(Xs(n)))),n}(e,t),r,o)}function hb(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Id(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Id(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Er(n,o,!!t||e[++s]))}return void 0===n?null:n}function wF(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[i+1];h===le&&(h=d?We:void 0);let f=d?tE(h,r):u===r?h:void 0;if(c&&!Tg(f)&&(f=tE(l,r)),Tg(f)&&(a=f,o))return a;const p=n[i+1];i=o?si(p):cs(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=tE(l,r))}return a}function Tg(n){return void 0!==n}function cr(n,e=""){const t=D(),r=Me(),i=n+20,s=r.firstCreatePass?Bl(r,i,1,e,null):r.data[i],o=t[i]=function(n,e){return vt(n)?n.createText(e):n.createTextNode(e)}(t[11],e);dg(r,t,o,s),Ii(s,!1)}function Td(n){return Dd("",n,""),Td}function Dd(n,e,t){const r=D(),i=Wl(r,n,e,t);return i!==le&&us(r,Kn(),i),Dd}function Dg(n,e,t){const r=D();return Pn(r,Il(),e)&&Cr(Me(),wt(),r,n,e,r[11],t,!0),Dg}function Sg(n,e,t){const r=D();if(Pn(r,Il(),e)){const s=Me(),o=wt();Cr(s,o,r,n,e,l1(zw(s.data),o,r),t,!0)}return Sg}const aa=void 0;var gX=["en",[["a","p"],["AM","PM"],aa],[["AM","PM"],aa,aa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],aa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],aa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",aa,"{1} 'at' {0}",aa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let rc={};function UF(n){return n in rc||(rc[n]=$e.ng&&$e.ng.common&&$e.ng.common.locales&&$e.ng.common.locales[n]),rc[n]}var L=(()=>((L=L||{})[L.LocaleId=0]="LocaleId",L[L.DayPeriodsFormat=1]="DayPeriodsFormat",L[L.DayPeriodsStandalone=2]="DayPeriodsStandalone",L[L.DaysFormat=3]="DaysFormat",L[L.DaysStandalone=4]="DaysStandalone",L[L.MonthsFormat=5]="MonthsFormat",L[L.MonthsStandalone=6]="MonthsStandalone",L[L.Eras=7]="Eras",L[L.FirstDayOfWeek=8]="FirstDayOfWeek",L[L.WeekendRange=9]="WeekendRange",L[L.DateFormat=10]="DateFormat",L[L.TimeFormat=11]="TimeFormat",L[L.DateTimeFormat=12]="DateTimeFormat",L[L.NumberSymbols=13]="NumberSymbols",L[L.NumberFormats=14]="NumberFormats",L[L.CurrencyCode=15]="CurrencyCode",L[L.CurrencySymbol=16]="CurrencySymbol",L[L.CurrencyName=17]="CurrencyName",L[L.Currencies=18]="Currencies",L[L.Directionality=19]="Directionality",L[L.PluralCase=20]="PluralCase",L[L.ExtraData=21]="ExtraData",L))();const Ag="en-US";let jF=Ag;function gb(n,e,t,r,i){if(n=de(n),Array.isArray(n))for(let s=0;s<n.length;s++)gb(n[s],e,t,r,i);else{const s=Me(),o=D();let a=Hl(n)?n:de(n.provide),l=g1(n);const c=Qt(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Hl(n)||!n.multi){const f=new Xu(l,i,b),p=_b(a,e,i?u:u+h,d);-1===p?(Jp(Ju(c,o),s,a),mb(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=_b(a,e,u+h,d),p=_b(a,e,u,u+h),g=f>=0&&t[f],m=p>=0&&t[p];if(i&&!m||!i&&!g){Jp(Ju(c,o),s,a);const v=function(n,e,t,r,i){const s=new Xu(n,t,b);return s.multi=[],s.index=e,s.componentProviders=0,dL(s,i,r&&!t),s}(i?fZ:hZ,t.length,i,r,l);!i&&m&&(t[p].providerFactory=v),mb(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(v),o.push(v)}else mb(s,n,f>-1?f:p,dL(t[i?p:f],l,!i&&r));!i&&r&&m&&t[p].componentProviders++}}}function mb(n,e,t,r){const i=Hl(e),s=function(n){return!!n.useClass}(e);if(i||s){const l=(s?de(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function dL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _b(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function hZ(n,e,t,r){return yb(this.multi,[])}function fZ(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ed(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),yb(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],yb(i,s);return s}function yb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ut(n,e=[]){return t=>{t.providersResolver=(r,i)=>function(n,e,t){const r=Me();if(r.firstCreatePass){const i=ri(n);gb(t,r.data,r.blueprint,i,!0),gb(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class hL{}class _Z{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${xe(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let ds=(()=>{class n{}return n.NULL=new _Z,n})();function yZ(){return sc(Qt(),D())}function sc(n,e){return new dt(Br(n,e))}let dt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=yZ,n})();function vZ(n){return n instanceof dt?n.nativeElement:n}class kd{}let hs=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function(){const n=D(),t=wr(Qt().index,n);return function(n){return n[11]}(Ci(t)?t:n)}(),n})(),bZ=(()=>{class n{}return n.\u0275prov=V({token:n,providedIn:"root",factory:()=>null}),n})();class to{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const pL=new to("13.0.3"),vb={};function Pg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(Lt(s)),ni(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&Pg(l[1],l,c,r)}const o=t.type;if(8&o)Pg(n,e,t.child,r);else if(32&o){const a=_E(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=CO(e,t);if(Array.isArray(a))r.push(...a);else{const l=gd(e[16]);Pg(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Rd{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Pg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ni(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(bE(e,r),tg(t,r))}this._attachedToViewContainer=!1}pO(this._lView[1],this._lView)}onDestroy(e){QO(this._lView[1],this._lView,null,e)}markForCheck(){GE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qE(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){$p(!0);try{qE(n,e,t)}finally{$p(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,md(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class CZ extends Rd{constructor(e){super(e),this._view=e}detectChanges(){s1(this._view)}checkNoChanges(){!function(n){$p(!0);try{s1(n)}finally{$p(!1)}}(this._view)}get context(){return null}}class gL extends ds{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Mn(e);return new wb(t,this.ngModule)}}function mL(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const TZ=new j("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>oO});class wb extends hL{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map($K).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return mL(this.componentDef.inputs)}get outputs(){return mL(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function(n,e){return{get:(t,r,i)=>{const s=n.get(t,vb,i);return s!==vb||r===vb?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(kd,iN),a=s.get(bZ,null),l=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=r?function(n,e,t){if(vt(n))return n.selectRootElement(e,t===ei.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):EE(o.createRenderer(null,this.componentDef),c,function(n){const e=n.toLowerCase();return"svg"===e?nN:"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,h=function(n,e){return{components:[],scheduler:n||oO,clean:xQ,playerHandler:e||null,flags:0}}(),f=mg(0,null,null,1,0,null,null,null,null,null),p=_d(null,f,h,d,null,null,o,l,a,s);let g,m;Hp(p);try{const v=function(n,e,t,r,i,s){const o=t[1];t[20]=n;const l=Bl(o,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(yg(l,c,!0),null!==n&&(Qp(i,n,c),null!==l.classes&&SE(i,n,l.classes),null!==l.styles&&DO(i,n,l.styles)));const u=r.createRenderer(n,e),d=_d(t,WO(e),null,e.onPush?64:16,t[20],l,r,u,s||null,null);return o.firstCreatePass&&(Jp(Ju(l,t),o,e.type),e1(o,l),t1(l,t.length,1)),_g(t,d),t[20]=d}(u,this.componentDef,p,o,l);if(u)if(r)Qp(l,u,["ng-version",pL.full]);else{const{attrs:y,classes:I}=function(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ii(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);y&&Qp(l,u,y),I&&I.length>0&&SE(l,u,I.join(" "))}if(m=Vw(f,20),void 0!==t){const y=m.projection=[];for(let I=0;I<this.ngContentSelectors.length;I++){const x=t[I];y.push(null!=x?Array.from(x):null)}}g=function(n,e,t,r,i){const s=t[1],o=function(n,e,t){const r=Qt();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),n1(n,r,e,Ul(n,e,1,null),t));const i=ed(e,n,r.directiveStart,r);Rn(i,e);const s=Br(r,e);return s&&Rn(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=Qt();e.contentQueries(1,o,l.directiveStart)}const a=Qt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Qs(a.index),ZO(t[1],a,0,a.directiveStart,a.directiveEnd,e),JO(e,o)),o}(v,this.componentDef,p,h,[QQ]),yd(f,p,null)}finally{zp()}return new AZ(this.componentType,g,sc(m,p),p,m)}}class AZ extends class{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new CZ(i),this.componentType=e}get injector(){return new Sl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class fs{}class _L{}const oc=new Map;class wL extends fs{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new gL(this);const r=Fr(e);this._bootstrapComponents=Si(r.bootstrap),this._r3Injector=p1(e,t,[{provide:fs,useValue:this},{provide:ds,useValue:this.componentFactoryResolver}],xe(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Pe.THROW_IF_NOT_FOUND,r=ae.Default){return e===Pe||e===fs||e===QE?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Eb extends _L{constructor(e){super(),this.moduleType=e,null!==Fr(e)&&function(n){const e=new Set;!function t(r){const i=Fr(r,!0),s=i.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${xe(e)} vs ${xe(e.name)}`)}(s,oc.get(s),r),oc.set(s,r));const o=Si(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new wL(this.moduleType,e)}}function bL(n,e,t,r){return function(n,e,t,r,i,s){const o=e+t;return Pn(n,o,i)?xi(n,o+1,s?r.call(s,i):r(i)):function(n,e){const t=n[e];return t===le?void 0:t}(n,o+1)}(D(),qn(),n,e,t,r)}function bb(n){return e=>{setTimeout(n,void 0,e)}}const Xe=class extends Te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var l,c,u;let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const d=e;i=null==(l=d.next)?void 0:l.bind(d),s=null==(c=d.error)?void 0:c.bind(d),o=null==(u=d.complete)?void 0:u.bind(d)}this.__isAsync&&(s=bb(s),i&&(i=bb(i)),o&&(o=bb(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof yn&&e.add(a),a}};function qZ(){return this._results[zl()]()}class Cb{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=zl(),r=Cb.prototype;r[t]||(r[t]=qZ)}get changes(){return this._changes||(this._changes=new Xe)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=Ur(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let di=(()=>{class n{}return n.__NG_ELEMENT_ID__=YZ,n})();const KZ=di,QZ=class extends KZ{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=_d(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),yd(t,r,e),new Rd(r)}};function YZ(){return Ng(Qt(),D())}function Ng(n,e){return 4&n.type?new QZ(e,n,sc(n,e)):null}let $r=(()=>{class n{}return n.__NG_ELEMENT_ID__=XZ,n})();function XZ(){return ML(Qt(),D())}const ZZ=$r,AL=class extends ZZ{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return sc(this._hostTNode,this._hostLView)}get injector(){return new Sl(this._hostTNode,this._hostLView)}get parentInjector(){const e=Zp(this._hostTNode,this._hostLView);if(wN(e)){const t=Dl(e,this._hostLView),r=Tl(e);return new Sl(t[1].data[r+8],t)}return new Sl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=xL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!("function"==typeof e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new wb(Mn(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule&&c){const d=c.get(fs,null);d&&(s=d)}const u=l.create(c,i,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(ni(r[3])){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new AL(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],xN(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=TE(s,o),l=r[11],c=ug(l,o[7]);return null!==c&&function(n,e,t,r,i,s){r[0]=i,r[6]=e,md(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),xN(Ib(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=xL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=bE(this._lContainer,t);r&&(tg(Ib(this._lContainer),t),pO(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=bE(this._lContainer,t);return r&&null!=tg(Ib(this._lContainer),t)?new Rd(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function xL(n){return n[8]}function Ib(n){return n[8]||(n[8]=[])}function ML(n,e){let t;const r=e[n.index];if(ni(r))t=r;else{let i;if(8&n.type)i=Lt(r);else{const s=e[11];i=s.createComment("");const o=Br(n,e);sa(s,ug(s,o),i,function(n,e){return vt(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=r1(r,e,i,n),_g(e,t)}return new AL(t,n,e)}class Tb{constructor(e){this.queryList=e,this.matches=null}clone(){return new Tb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Db{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Db(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==OL(e,t).matches&&this.queries[t].setDirty()}}class kL{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Sb{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new Sb(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Ab{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Ab(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,tJ(t,s)),this.matchTNodeWithReadOption(e,t,eg(t,e,s,!1,!1))}else r===di?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,eg(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===dt||i===$r||i===di&&4&t.type)this.addMatch(t.index,-2);else{const s=eg(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function tJ(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function rJ(n,e,t,r){return-1===t?function(n,e){return 11&n.type?sc(n,e):4&n.type?Ng(n,e):null}(e,n):-2===t?function(n,e,t){return t===dt?sc(e,n):t===di?Ng(e,n):t===$r?ML(e,n):void 0}(n,e,r):ed(n,n[1],t,e)}function RL(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:rJ(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function xb(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=RL(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&xb(h[1],h,c,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];xb(f[1],f,c,r)}}}}}return r}function ac(n){const e=D(),t=Me(),r=dN();Gw(r+1);const i=OL(t,r);if(n.dirty&&sN(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?xb(t,e,r,[]):RL(t,e,i,r);n.reset(s,vZ),n.notifyOnChanges()}return!0}return!1}function Og(n,e,t){const r=Me();r.firstCreatePass&&(function(n,e,t){null===n.queries&&(n.queries=new Sb),n.queries.track(new Ab(e,t))}(r,new kL(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function(n,e,t){const r=new Cb(4==(4&t));QO(n,e,r,r.destroy),null===e[19]&&(e[19]=new Db),e[19].queries.push(new Tb(r))}(r,D(),e)}function lc(){return n=D(),e=dN(),n[19].queries[e].queryList;var n,e}function OL(n,e){return n.queries.getByIndex(e)}function kb(n,e){return Ng(n,e)}function Vg(...n){}const uc=new j("Application Initializer");let dc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Vg,this.reject=Vg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Cd(s))t.push(s);else if(lb(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(E(uc,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const Fd=new j("AppId"),TJ={provide:Fd,useFactory:function(){return`${Lb()}${Lb()}${Lb()}`},deps:[]};function Lb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const JL=new j("Platform Initializer"),no=new j("Platform ID"),eV=new j("appBootstrapListener");let tV=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const ps=new j("LocaleId"),nV=new j("DefaultCurrencyCode");class DJ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Bg=(()=>{class n{compileModuleSync(t){return new Eb(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Si(Fr(t).declarations).reduce((o,a)=>{const l=Mn(a);return l&&o.push(new wb(l)),o},[]);return new DJ(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const AJ=(()=>Promise.resolve(0))();function Vb(n){"undefined"==typeof Zone?AJ.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class te{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let n=$e.requestAnimationFrame,e=$e.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call($e,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Ub(n),n.isCheckStableRunning=!0,Bb(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Ub(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return rV(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),iV(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return rV(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),iV(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Ub(n),Bb(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!te.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(te.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,MJ,Vg,Vg);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const MJ={};function Bb(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ub(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function rV(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function iV(n){n._nesting--,Bb(n)}class PJ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let jb=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{te.assertNotInAngularZone(),Vb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vb(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(E(te))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),sV=(()=>{class n{constructor(){this._applications=new Map,$b.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return $b.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class NJ{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let hi,$b=new NJ;const oV=new j("AllowMultipleToken");class aV{constructor(e,t){this.name=e,this.token=t}}function lV(n,e,t=[]){const r=`Platform: ${e}`,i=new j(r);return(s=[])=>{let o=cV();if(!o||o.injector.get(oV,!1))if(n)n(t.concat(s).concat({provide:i,useValue:!0}));else{const a=t.concat(s).concat({provide:i,useValue:!0},{provide:YE,useValue:"platform"});!function(n){if(hi&&!hi.destroyed&&!hi.injector.get(oV,!1))throw new mr("400","");hi=n.get(uV);const e=n.get(JL,null);e&&e.forEach(t=>t())}(Pe.create({providers:a,name:r}))}return function(n){const e=cV();if(!e)throw new mr("401","");return e}()}}function cV(){return hi&&!hi.destroyed?hi:null}let uV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function(n,e){let t;return t="noop"===n?new PJ:("zone.js"===n?void 0:n)||new te({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:te,useValue:a}];return a.run(()=>{const c=Pe.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(Fl,null);if(!d)throw new mr("402","");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{Hb(this._modules,u),h.unsubscribe()})}),function(n,e,t){try{const r=t();return Cd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(d,a,()=>{const h=u.injector.get(dc);return h.runInitializers(),h.donePromise.then(()=>(function(n){yr(n,"Expected localeId to be defined"),"string"==typeof n&&(jF=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(ps,Ag)||Ag),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,r=[]){const i=dV({},r);return function(n,e,t){const r=new Eb(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(la);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new mr("403","");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new mr("404","");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(E(Pe))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();function dV(n,e){return Array.isArray(e)?e.reduce(dV,n):M(M({},n),e)}let la=(()=>{class n{constructor(t,r,i,s,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new Ae(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Ae(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),Vb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=kp(a,l.pipe(function(n={}){const{connector:e=(()=>new Te),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o=null,a=null,l=null,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=null},f=()=>{h(),o=l=null,u=d=!1},p=()=>{const g=o;f(),null==g||g.unsubscribe()};return nt((g,m)=>{c++,!d&&!u&&h();const v=l=null!=l?l:e();m.add(()=>{c--,0===c&&!d&&!u&&(a=bw(p,i))}),v.subscribe(m),o||(o=new gw({next:y=>v.next(y),error:y=>{d=!0,h(),a=bw(f,t,y),v.error(y)},complete:()=>{u=!0,h(),a=bw(f,r),v.complete()}}),qt(g).subscribe(o))})(s)}}()))}bootstrap(t,r){if(!this._initStatus.done)throw new mr("405","");let i;i=t instanceof hL?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function(n){return n.isBoundToModule}(i)?void 0:this._injector.get(fs),a=i.create(Pe.NULL,[],r||i.selector,s),l=a.location.nativeElement,c=a.injector.get(jb,null),u=c&&a.injector.get(sV);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),Hb(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new mr("101","");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Hb(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(eV,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(E(te),E(Pe),E(Fl),E(ds),E(dc))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();function Hb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let fV=!0,hc=(()=>{class n{}return n.__NG_ELEMENT_ID__=GJ,n})();function GJ(n){return function(n,e,t){if(Vp(n)&&!t){const r=wr(n.index,e);return new Rd(r,r)}return 47&n.type?new Rd(e[16],e):null}(Qt(),D(),16==(16&n))}class wV{constructor(){}supports(e){return wd(e)}create(e){return new ZJ(e)}}const XJ=(n,e)=>e;class ZJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||XJ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<bV(r,i,s)?t:r,a=bV(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!wd(e))throw new Error(`Error trying to diff '${xe(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[zl()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new JJ(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new EV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new EV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class JJ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eee{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class EV{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new eee,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bV(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class CV{constructor(){}supports(e){return e instanceof Map||nb(e)}create(){return new tee}}class tee{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||nb(e)))throw new Error(`Error trying to diff '${xe(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new nee(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class nee{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function IV(){return new Ld([new wV])}let Ld=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||IV()),deps:[[n,new Pl,new qe]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=V({token:n,providedIn:"root",factory:IV}),n})();function TV(){return new fc([new CV])}let fc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||TV()),deps:[[n,new Pl,new qe]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=V({token:n,providedIn:"root",factory:TV}),n})();const iee=[new CV],oee=new Ld([new wV]),aee=new fc(iee),lee=lV(null,"core",[{provide:no,useValue:"unknown"},{provide:uV,deps:[Pe]},{provide:sV,deps:[]},{provide:tV,deps:[]}]),fee=[{provide:la,useClass:la,deps:[te,Pe,Fl,ds,dc]},{provide:TZ,deps:[te],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:dc,useClass:dc,deps:[[new qe,uc]]},{provide:Bg,useClass:Bg,deps:[]},TJ,{provide:Ld,useFactory:function(){return oee},deps:[]},{provide:fc,useFactory:function(){return aee},deps:[]},{provide:ps,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||Ag},deps:[[new cd(ps),new qe,new Pl]]},{provide:nV,useValue:"USD"}];let gee=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(E(la))},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:fee}),n})(),jg=null;function Ri(){return jg}const De=new j("DocumentToken");let ua=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(){return E(DV)},providedIn:"platform"}),n})();const wee=new j("Location Initialized");let DV=(()=>{class n extends ua{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ri().getBaseHref(this._doc)}onPopState(t){const r=Ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){SV()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){SV()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(E(De))},n.\u0275prov=V({token:n,factory:function(){return new DV(E(De))},providedIn:"platform"}),n})();function SV(){return!!window.history.pushState}function Kb(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function AV(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function gs(n){return n&&"?"!==n[0]?"?"+n:n}let pc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:function(){return function(n){const e=E(De).location;return new xV(E(ua),e&&e.origin||"")}()},providedIn:"root"}),n})();const Qb=new j("appBaseHref");let xV=(()=>{class n extends pc{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Kb(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+gs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+gs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+gs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(E(ua),E(Qb,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),Cee=(()=>{class n extends pc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Kb(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+gs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+gs(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformLocation).historyGo)||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(E(ua),E(Qb,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),Vd=(()=>{class n{constructor(t,r){this._subject=new Xe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=AV(MV(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+gs(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,MV(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gs(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gs(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null==(i=(r=this._platformStrategy).historyGo)||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=gs,n.joinWithSlash=Kb,n.stripTrailingSlash=AV,n.\u0275fac=function(t){return new(t||n)(E(pc),E(ua))},n.\u0275prov=V({token:n,factory:function(){return new Vd(E(pc),E(ua))},providedIn:"root"}),n})();function MV(n){return n.replace(/\/index.html$/,"")}var Bt=(()=>((Bt=Bt||{})[Bt.Zero=0]="Zero",Bt[Bt.One=1]="One",Bt[Bt.Two=2]="Two",Bt[Bt.Few=3]="Few",Bt[Bt.Many=4]="Many",Bt[Bt.Other=5]="Other",Bt))();const Ree=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=UF(e);if(t)return t;const r=e.split("-")[0];if(t=UF(r),t)return t;if("en"===r)return gX;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[L.PluralCase]};class Xg{}let ate=(()=>{class n extends Xg{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Ree(r||this.locale)(t)){case Bt.Zero:return"zero";case Bt.One:return"one";case Bt.Two:return"two";case Bt.Few:return"few";case Bt.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(E(ps))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class dte{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let BV=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,s,o)=>{if(null==i.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new dte(null,this._ngForOf,-1,-1),null===o?void 0:o),l=new UV(i,a);r.push(l)}else if(null==o)this._viewContainer.remove(null===s?void 0:s);else if(null!==s){const a=this._viewContainer.get(s);this._viewContainer.move(a,o);const l=new UV(i,a);r.push(l)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,s=this._viewContainer.length;i<s;i++){const o=this._viewContainer.get(i);o.context.index=i,o.context.count=s,o.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(b($r),b(di),b(Ld))},n.\u0275dir=G({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class UV{constructor(e,t){this.record=e,this.view=t}}let Zg=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new fte,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){jV("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){jV("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(b($r),b(di))},n.\u0275dir=G({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class fte{constructor(){this.$implicit=null,this.ngIf=null}}function jV(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${xe(e)}'.`)}class iC{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Jg=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=G({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),$V=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new iC(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(b($r),b(di),b(Jg,9))},n.\u0275dir=G({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),aC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[{provide:Xg,useClass:ate}]}),n})();const GV="browser";function lC(n){return n===GV}let $te=(()=>{class n{}return n.\u0275prov=V({token:n,providedIn:"root",factory:()=>new Hte(E(De),window)}),n})();class Hte{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=WV(this.window.history)||WV(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function WV(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class cC extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new cC,jg||(jg=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(jd=jd||document.querySelector("base"),jd?jd.getAttribute("href"):null);return null==t?null:function(n){em=em||document.createElement("a"),em.setAttribute("href",n);const e=em.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){jd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let em,jd=null;const qV=new j("TRANSITION_ID"),Yte=[{provide:uc,useFactory:function(n,e,t){return()=>{t.get(dc).donePromise.then(()=>{const r=Ri(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[qV,De,Pe],multi:!0}];class uC{static init(){var n;n=new uC,$b=n}addToWindow(e){$e.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},$e.getAllAngularTestabilities=()=>e.getAllTestabilities(),$e.getAllAngularRootElements=()=>e.getAllRootElements(),$e.frameworkStabilizers||($e.frameworkStabilizers=[]),$e.frameworkStabilizers.push(r=>{const i=$e.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?Ri().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Xte=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const tm=new j("EventManagerPlugins");let nm=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(E(tm),E(te))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class KV{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Ri().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let QV=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),$d=(()=>{class n extends QV{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(YV),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(YV))}}return n.\u0275fac=function(t){return new(t||n)(E(De))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();function YV(n){Ri().remove(n)}const dC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},hC=/%COMP%/g;function rm(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?rm(n,i,t):(i=i.replace(hC,n),t.push(i))}return t}function JV(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let im=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new fC(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case ei.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new rne(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case ei.ShadowDom:return new ine(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=rm(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(E(nm),E($d),E(Fd))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class fC{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dC[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=dC[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=dC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(br.DashCase|br.Important)?e.style.setProperty(t,r,i&br.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&br.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,JV(r)):this.eventManager.addEventListener(e,t,JV(r))}}class rne extends fC{constructor(e,t,r,i){super(e),this.component=r;const s=rm(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(hC,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(hC,i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ine extends fC{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=rm(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let sne=(()=>{class n extends KV{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(E(De))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const t2=["alt","control","meta","shift"],ane={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},n2={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lne={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let cne=(()=>{class n extends KV{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ri().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(t2.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&n2.hasOwnProperty(e)&&(e=n2[e]))}return ane[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),t2.forEach(s=>{s!=i&&lne[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(E(De))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const pne=lV(lee,"browser",[{provide:no,useValue:GV},{provide:JL,useValue:function(){cC.makeCurrent(),uC.init()},multi:!0},{provide:De,useFactory:function(){return n=document,Fw=n,document;var n},deps:[]}]),gne=[{provide:YE,useValue:"root"},{provide:Fl,useFactory:function(){return new Fl},deps:[]},{provide:tm,useClass:sne,multi:!0,deps:[De,te,no]},{provide:tm,useClass:cne,multi:!0,deps:[De]},{provide:im,useClass:im,deps:[nm,$d,Fd]},{provide:kd,useExisting:im},{provide:QV,useExisting:$d},{provide:$d,useClass:$d,deps:[De]},{provide:jb,useClass:jb,deps:[te]},{provide:nm,useClass:nm,deps:[tm,te]},{provide:class{},useClass:Xte,deps:[]}];let r2=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Fd,useValue:t.appId},{provide:qV,useExisting:Fd},Yte]}}}return n.\u0275fac=function(t){return new(t||n)(E(n,12))},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:gne,imports:[aC,gee]}),n})(),s2=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(E(De))},n.\u0275prov=V({token:n,factory:function(t){let r=null;return r=t?new t:new s2(E(De)),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;const{isArray:Dne}=Array,{getPrototypeOf:Sne,prototype:Ane,keys:xne}=Object;function l2(n){if(1===n.length){const e=n[0];if(Dne(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&Sne(n)===Ane}(e)){const t=xne(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:kne}=Array;function gC(n){return _e(e=>function(n,e){return kne(e)?n(...e):n(e)}(n,e))}function c2(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let u2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(b(hs),b(dt))},n.\u0275dir=G({type:n}),n})(),da=(()=>{class n extends u2{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=lr(n)))(r||n)}}(),n.\u0275dir=G({type:n,features:[Oe]}),n})();const Pi=new j("NgValueAccessor"),One={provide:Pi,useExisting:Qe(()=>Hd),multi:!0},Lne=new j("CompositionEventMode");let Hd=(()=>{class n extends u2{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=Ri()?Ri().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(b(hs),b(dt),b(Lne,8))},n.\u0275dir=G({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&it("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[ut([One]),Oe]}),n})();const Nn=new j("NgValidators"),so=new j("NgAsyncValidators");function E2(n){return null!=n}function b2(n){const e=Cd(n)?qt(n):n;return lb(e),e}function C2(n){let e={};return n.forEach(t=>{e=null!=t?M(M({},e),t):e}),0===Object.keys(e).length?null:e}function I2(n,e){return e.map(t=>t(n))}function T2(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function mC(n){return null!=n?function(n){if(!n)return null;const e=n.filter(E2);return 0==e.length?null:function(t){return C2(I2(t,e))}}(T2(n)):null}function _C(n){return null!=n?function(n){if(!n)return null;const e=n.filter(E2);return 0==e.length?null:function(t){return function(...n){const e=UP(n),{args:t,keys:r}=l2(n),i=new Ae(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;sr(t[u]).subscribe(new ze(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?c2(r,a):a),s.complete())}))}});return e?i.pipe(gC(e)):i}(I2(t,e).map(b2)).pipe(_e(C2))}}(T2(n)):null}function A2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yC(n){return n?Array.isArray(n)?n:[n]:[]}function sm(n,e){return Array.isArray(n)?n.includes(e):n===e}function k2(n,e){const t=yC(e);return yC(n).forEach(i=>{sm(t,i)||t.push(i)}),t}function R2(n,e){return yC(e).filter(t=>!sm(n,t))}class P2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_C(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Zn extends P2{get formDirective(){return null}get path(){return null}}class oo extends P2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let vC=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(i=null==(r=this._cd)?void 0:r.control)?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(b(oo,2))},n.\u0275dir=G({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&eo("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[Oe]}),n})();function Gd(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(A2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(A2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();cm(e._rawValidators,i),cm(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&O2(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&O2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function cm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function O2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Wd="VALID",hm="INVALID",gc="PENDING",qd="DISABLED";function TC(n){return(SC(n)?n.validators:n)||null}function V2(n){return Array.isArray(n)?mC(n):n||null}function DC(n,e){return(SC(e)?e.asyncValidators:n)||null}function B2(n){return Array.isArray(n)?_C(n):n||null}function SC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class AC{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=V2(this._rawValidators),this._composedAsyncValidatorFn=B2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Wd}get invalid(){return this.status===hm}get pending(){return this.status==gc}get disabled(){return this.status===qd}get enabled(){return this.status!==qd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=V2(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=B2(e)}addValidators(e){this.setValidators(k2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(k2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(R2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(R2(e,this._rawAsyncValidators))}hasValidator(e){return sm(this._rawValidators,e)}hasAsyncValidator(e){return sm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qd,this.errors=null,this._forEachChild(r=>{r.disable(xt(M({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(xt(M({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wd,this._forEachChild(r=>{r.enable(xt(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(xt(M({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wd||this.status===gc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qd:Wd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gc,this._hasOwnPendingAsyncValidator=!0;const t=b2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof xC?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof Zne&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?qd:this.errors?hm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gc)?gc:this._anyControlsHaveStatus(hm)?hm:Wd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){SC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class fm extends AC{constructor(e=null,t,r){super(TC(t),DC(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class xC extends AC{constructor(e,t,r){super(TC(t),DC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof fm?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Zne extends AC{constructor(e,t,r){super(TC(t),DC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof fm?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const tre={provide:oo,useExisting:Qe(()=>pm)},$2=(()=>Promise.resolve(null))();let VC,pm=(()=>{class n extends oo{constructor(t,r,i,s){super(),this.control=new fm,this._registered=!1,this.update=new Xe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Hd?t=s:function(n){return Object.getPrototypeOf(n.constructor)===da}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Gd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){$2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;$2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(b(Zn,9),b(Nn,10),b(so,10),b(Pi,10))},n.\u0275dir=G({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ut([tre]),Oe,Wn]}),n})(),z2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({}),n})(),Dre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[[z2]]}),n})(),Sre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[Dre]}),n})(),lB=(()=>{class n{get nativeWindow(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),cB=(()=>{class n{constructor(t,r,i){this.element=t,this._window=r,this._zone=i,this.onlyGrow=!1,this.useImportant=!1,this.resized=new Xe,this.autosize=!0,this.retries=0,this._destroyed=!1,"TEXTAREA"!==this.element.nativeElement.tagName?this._findNestedTextArea():(this.textAreaEl=this.element.nativeElement,this.textAreaEl.style["overflow-y"]="hidden",this._onTextAreaFound())}set minRows(t){this._minRows=+t,this.textAreaEl&&(this.textAreaEl.rows=this._minRows)}set _autosize(t){this.autosize="boolean"!=typeof t||t}onInput(t){this.adjust()}ngOnDestroy(){this._destroyed=!0,this._windowResizeHandler&&this._window.nativeWindow.removeEventListener("resize",this._windowResizeHandler,!1)}ngAfterContentChecked(){this.adjust()}ngOnChanges(t){this.adjust(!0)}_findNestedTextArea(){this.textAreaEl=this.element.nativeElement.querySelector("TEXTAREA"),!this.textAreaEl&&this.element.nativeElement.shadowRoot&&(this.textAreaEl=this.element.nativeElement.shadowRoot.querySelector("TEXTAREA")),this.textAreaEl?(this.textAreaEl.style["overflow-y"]="hidden",this._onTextAreaFound()):this.retries>=3?console.warn("ngx-autosize: textarea not found"):(this.retries++,setTimeout(()=>{this._findNestedTextArea()},100))}_onTextAreaFound(){this._addWindowResizeHandler(),setTimeout(()=>{this.adjust()})}_addWindowResizeHandler(){this._windowResizeHandler=function(n,e){let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>{n(...r)},200)}}(()=>{this._zone.run(()=>{this.adjust()})}),this._zone.runOutsideAngular(()=>{this._window.nativeWindow.addEventListener("resize",this._windowResizeHandler,!1)})}adjust(t=!1){if(this.autosize&&!this._destroyed&&this.textAreaEl&&this.textAreaEl.parentNode){const r=this.textAreaEl.value;if(!1===t&&r===this._oldContent&&this.textAreaEl.offsetWidth===this._oldWidth)return;this._oldContent=r,this._oldWidth=this.textAreaEl.offsetWidth;const i=this.textAreaEl.cloneNode(!0),s=this.textAreaEl.parentNode;i.style.width=this.textAreaEl.offsetWidth+"px",i.style.visibility="hidden",i.style.position="absolute",i.textContent=r,s.appendChild(i),i.style["overflow-y"]="hidden",i.style.height="auto";let o=i.scrollHeight,a=this._window.nativeWindow.getComputedStyle(i,null);o+=parseInt(a.getPropertyValue("border-top-width")),o+=parseInt(a.getPropertyValue("border-bottom-width")),"content-box"===a.getPropertyValue("box-sizing")&&(o-=parseInt(a.getPropertyValue("padding-top")),o-=parseInt(a.getPropertyValue("padding-bottom")));const l=this.textAreaEl.offsetHeight,c=o>l;if(!1===this.onlyGrow||c){const u=this._getLineHeight(),d=o/u;if(this._minRows&&this._minRows>=d)o=this._minRows*u;else if(this.maxRows&&this.maxRows<=d){const p=this.maxRows*u;o=this.onlyGrow?Math.max(p,l):p,this.textAreaEl.style["overflow-y"]="auto"}else this.textAreaEl.style["overflow-y"]="hidden";this.textAreaEl.style.setProperty("height",o+"px",this.useImportant?"important":""),this.resized.emit(o)}s.removeChild(i)}}_getLineHeight(){let t=parseInt(this.textAreaEl.style.lineHeight,10);if(isNaN(t)&&this._window.nativeWindow.getComputedStyle){const r=this._window.nativeWindow.getComputedStyle(this.textAreaEl);t=parseInt(r.lineHeight,10)}if(isNaN(t)){const r=this._window.nativeWindow.getComputedStyle(this.textAreaEl,null).getPropertyValue("font-size");t=Math.floor(1.5*parseInt(r.replace("px",""),10))}return t}}return n.\u0275fac=function(t){return new(t||n)(b(dt),b(lB),b(te))},n.\u0275dir=G({type:n,selectors:[["","autosize",""]],hostBindings:function(t,r){1&t&&it("input",function(s){return r.onInput(s.target)})},inputs:{minRows:"minRows",_autosize:["autosize","_autosize"],maxRows:"maxRows",onlyGrow:"onlyGrow",useImportant:"useImportant"},outputs:{resized:"resized"},features:[Wn]}),n})(),Mre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[lB],imports:[[]]}),n})();function uB(n){return null!=n&&"false"!=`${n}`}function LC(n,e=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function mm(n){return Array.isArray(n)?n:[n]}function jt(n){return null==n?"":"string"==typeof n?n:`${n}px`}function mc(n){return n instanceof dt?n.nativeElement:n}try{VC="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){VC=!1}let Qd,ha,UC,Ir=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?lC(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!VC)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(E(no))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BC(n){return function(){if(null==Qd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Qd=!0}))}finally{Qd=Qd||!1}return Qd}()?n:!!n.capture}function Pre(){if(null==ha){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ha=!1,ha;if("scrollBehavior"in document.documentElement.style)ha=!0;else{const n=Element.prototype.scrollTo;ha=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ha}function hB(n){if(function(){if(null==UC){const n="undefined"!=typeof document?document.head:null;UC=!(!n||!n.createShadowRoot&&!n.attachShadow)}return UC}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function jC(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function fa(n){return n.composedPath?n.composedPath()[0]:n.target}function $C(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Q(...n){return qt(n,Gu(n))}const Ore=["addListener","removeListener"],Fre=["addEventListener","removeEventListener"],Lre=["on","off"];function Yd(n,e,t,r){if(re(t)&&(r=t,t=void 0),r)return Yd(n,e,t).pipe(gC(r));const[i,s]=function(n){return re(n.addEventListener)&&re(n.removeEventListener)}(n)?Fre.map(o=>a=>n[o](e,a,t)):function(n){return re(n.addListener)&&re(n.removeListener)}(n)?Ore.map(fB(n,e)):function(n){return re(n.on)&&re(n.off)}(n)?Lre.map(fB(n,e)):[];if(!i&&ww(n))return Mt(o=>Yd(o,e,t))(sr(n));if(!i)throw new TypeError("Invalid event target");return new Ae(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function fB(n,e){return t=>r=>n[t](e,r)}class jre extends yn{constructor(e,t){super()}schedule(e,t=0){return this}}const ym={setInterval(...n){const{delegate:e}=ym;return((null==e?void 0:e.setInterval)||setInterval)(...n)},clearInterval(n){const{delegate:e}=ym;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class vm extends jre{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return ym.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;ym.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ml(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Xd={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Xd;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new yn(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Xd;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Xd;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},pB={now:()=>(pB.delegate||Date).now(),delegate:void 0};class Zd{constructor(e,t=Zd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Zd.now=pB.now;class wm extends Zd{constructor(e,t=Zd.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}new class extends wm{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends vm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Xd.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(Xd.cancelAnimationFrame(t),e._scheduled=void 0)}});let HC,Gre=1;const Em={};function gB(n){return n in Em&&(delete Em[n],!0)}const Wre={setImmediate(n){const e=Gre++;return Em[e]=!0,HC||(HC=Promise.resolve()),HC.then(()=>gB(e)&&n()),e},clearImmediate(n){gB(n)}},{setImmediate:qre,clearImmediate:Kre}=Wre,bm={setImmediate(...n){const{delegate:e}=bm;return((null==e?void 0:e.setImmediate)||qre)(...n)},clearImmediate(n){const{delegate:e}=bm;return((null==e?void 0:e.clearImmediate)||Kre)(n)},delegate:void 0},Cm=(new class extends wm{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class extends vm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=bm.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(bm.clearImmediate(t),e._scheduled=void 0)}}),new wm(vm)),mB=Cm;function _B(n=0,e,t=mB){let r=-1;return null!=e&&(BP(e)?t=e:r=e),new Ae(i=>{let s=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function yB(n,e=mB){return function(n){return nt((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const c=i;i=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(new ze(t,c=>{r=!0,i=c,s||sr(n()).subscribe(s=new ze(t,a,l))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>_B(n,e))}function $t(n,e){return nt((t,r)=>{let i=0;t.subscribe(new ze(r,s=>n.call(e,s,i++)&&r.next(s)))})}const eie=new j("cdk-dir-doc",{providedIn:"root",factory:function(){return LN(De)}}),nie=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let zC=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Xe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?nie.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(E(eie,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({}),n})(),sie=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Te,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ae(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(yB(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Q()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe($t(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=mc(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Yd(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(E(te),E(Ir),E(De,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GC=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Te,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(yB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(E(Ir),E(te),E(De,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({}),n})(),wB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[[Jd,vB],Jd,vB]}),n})();class Gr extends Te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function EB(n){return $t((e,t)=>n<=t)}function bB(n,e=zs){return n=null!=n?n:pie,nt((t,r)=>{let i,s=!0;t.subscribe(new ze(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function pie(n,e){return n===e}function Im(n){return nt((e,t)=>{sr(n).subscribe(new ze(t,()=>t.complete(),Xo)),!t.closed&&e.subscribe(t)})}let TB=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===SB(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),s=SB(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==s:"video"===i?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||DB(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(E(Ir))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DB(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function SB(n){if(!DB(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Sie{constructor(e,t,r,i,s=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Kt(1)).subscribe(e)}}let Aie=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new Sie(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(E(TB),E(te),E(De))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AB(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function xB(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const xie=new j("cdk-input-modality-detector-options"),Mie={ignoreKeys:[18,17,224,91,16]},yc=BC({passive:!0,capture:!0});let kie=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Gr(null),this._lastTouchMs=0,this._onKeydown=o=>{var a,l;(null==(l=null==(a=this._options)?void 0:a.ignoreKeys)?void 0:l.some(c=>c===o.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=fa(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(AB(o)?"keyboard":"mouse"),this._mostRecentTarget=fa(o))},this._onTouchstart=o=>{xB(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=fa(o))},this._options=M(M({},Mie),s),this.modalityDetected=this._modality.pipe(EB(1)),this.modalityChanged=this.modalityDetected.pipe(bB()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,yc),i.addEventListener("mousedown",this._onMousedown,yc),i.addEventListener("touchstart",this._onTouchstart,yc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,yc),document.removeEventListener("mousedown",this._onMousedown,yc),document.removeEventListener("touchstart",this._onTouchstart,yc))}}return n.\u0275fac=function(t){return new(t||n)(E(Ir),E(te),E(De),E(xie,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rie=new j("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Nie=new j("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let kB=(()=>{class n{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let s,o;return 1===r.length&&"number"==typeof r[0]?o=r[0]:[s,o]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),null==o&&i&&(o=i.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,r;clearTimeout(this._previousTimeout),null==(t=this._liveElement)||t.remove(),this._liveElement=null,null==(r=this._currentResolve)||r.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),i}}return n.\u0275fac=function(t){return new(t||n)(E(Rie,8),E(te),E(De),E(Nie,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oie=new j("cdk-focus-monitor-default-options"),Tm=BC({passive:!0,capture:!0});let RB=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Te,this._rootNodeFocusAndBlurListener=a=>{const l=fa(a),c="focus"===a.type?this._onFocus:this._onBlur;for(let u=l;u;u=u.parentElement)c.call(this,a,u)},this._document=s,this._detectionMode=(null==o?void 0:o.detectionMode)||0}monitor(t,r=!1){const i=mc(t);if(!this._platform.isBrowser||1!==i.nodeType)return Q(null);const s=hB(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new Te,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=mc(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=mc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=fa(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Tm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Tm)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Im(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Tm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Tm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(E(te),E(Ir),E(kie),E(De,8),E(Oie,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PB="cdk-high-contrast-black-on-white",NB="cdk-high-contrast-white-on-black",WC="cdk-high-contrast-active";let Fie=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(WC),t.remove(PB),t.remove(NB),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(WC),t.add(PB)):2===r&&(t.add(WC),t.add(NB))}}}return n.\u0275fac=function(t){return new(t||n)(E(Ir),E(De))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FB{}const _s="*";function LB(n,e){return{type:7,name:n,definitions:e,options:{}}}function Dm(n,e=null){return{type:4,styles:e,timings:n}}function VB(n,e=null){return{type:3,steps:n,options:e}}function BB(n,e=null){return{type:2,steps:n,options:e}}function ys(n){return{type:6,styles:n,offset:null}}function Sm(n,e,t){return{type:0,name:n,styles:e,options:t}}function Am(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function UB(n=null){return{type:9,options:n}}function jB(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function $B(n){Promise.resolve(null).then(n)}class vc{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$B(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class HB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?$B(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function zB(){return"undefined"!=typeof window&&void 0!==window.document}function KC(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ao(n){switch(n.length){case 0:return new vc;case 1:return n[0];default:return new HB(n)}}function GB(n,e,t,r,i={},s={}){const o=[],a=[];let l=-1,c=null;if(r.forEach(u=>{const d=u.offset,h=d==l,f=h&&c||{};Object.keys(u).forEach(p=>{let g=p,m=u[p];if("offset"!==p)switch(g=e.normalizePropertyName(g,o),m){case"!":m=i[p];break;case _s:m=s[p];break;default:m=e.normalizeStyleValue(p,g,m,o)}f[g]=m}),h||a.push(f),c=f,l=d}),o.length){const u="\n - ";throw new Error(`Unable to animate due to the following errors:${u}${o.join(u)}`)}return a}function QC(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&YC(t,"start",n)));break;case"done":n.onDone(()=>r(t&&YC(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&YC(t,"destroy",n)))}}function YC(n,e,t){const r=t.totalTime,s=XC(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function XC(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Tr(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function WB(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let ZC=(n,e)=>!1,JC=(n,e)=>!1,qB=(n,e,t)=>[];const KB=KC();(KB||"undefined"!=typeof Element)&&(ZC=zB()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),JC=(()=>{if(KB||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):JC}})(),qB=(n,e,t)=>{let r=[];if(t){const i=n.querySelectorAll(e);for(let s=0;s<i.length;s++)r.push(i[s])}else{const i=n.querySelector(e);i&&r.push(i)}return r});let pa=null,QB=!1;function eI(n){pa||(pa=("undefined"!=typeof document?document.body:null)||{},QB=!!pa.style&&"WebkitAppearance"in pa.style);let e=!0;return pa.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in pa.style,!e&&QB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in pa.style)),e}const tI=JC,nI=ZC,rI=qB;function YB(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let XB=(()=>{class n{validateStyleProperty(t){return eI(t)}matchesElement(t,r){return tI(t,r)}containsElement(t,r){return nI(t,r)}query(t,r,i){return rI(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new vc(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),iI=(()=>{class n{}return n.NOOP=new XB,n})();const sI="ng-enter",xm="ng-leave",Mm="ng-trigger",km=".ng-trigger",JB="ng-animating",oI=".ng-animating";function ga(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:aI(parseFloat(e[1]),e[2])}function aI(n,e){return"s"===e?1e3*n:n}function Rm(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=aI(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=aI(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),a=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),a=!0),a&&e.splice(l,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:s,easing:o}}(n,e,t)}function wc(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function lo(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else wc(n,t);return t}function tU(n,e,t){return t?e+":"+t+";":""}function nU(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=tU(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=tU(0,Gie(t),n.style[t]));n.setAttribute("style",e)}function Ni(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=cI(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),KC()&&nU(n))}function ma(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=cI(t);n.style[r]=""}),KC()&&nU(n))}function eh(n){return Array.isArray(n)?1==n.length?n[0]:BB(n):n}const lI=new RegExp("{{\\s*(.+?)\\s*}}","g");function rU(n){let e=[];if("string"==typeof n){let t;for(;t=lI.exec(n);)e.push(t[1]);lI.lastIndex=0}return e}function Pm(n,e,t){const r=n.toString(),i=r.replace(lI,(s,o)=>{let a=e[o];return e.hasOwnProperty(o)||(t.push(`Please provide a value for the animation param ${o}`),a=""),a.toString()});return i==r?n:i}function Nm(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const zie=/-+([a-z0-9])/g;function cI(n){return n.replace(zie,(...e)=>e[1].toUpperCase())}function Gie(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function iU(n,e){return 0===n||0===e}function sU(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(a=>{s.hasOwnProperty(a)||o.push(a),s[a]=t[a]}),o.length)for(var i=1;i<e.length;i++){let a=e[i];o.forEach(function(l){a[l]=uI(n,l)})}}return e}function Dr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function uI(n,e){return window.getComputedStyle(n)[e]}function Wie(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const l=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(oU(i,o));"<"==s[0]&&!("*"==i&&"*"==o)&&e.push(oU(o,i))}(r,t,e)):t.push(n),t}const Fm=new Set(["true","1"]),Lm=new Set(["false","0"]);function oU(n,e){const t=Fm.has(n)||Lm.has(n),r=Fm.has(e)||Lm.has(e);return(i,s)=>{let o="*"==n||n==i,a="*"==e||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Fm.has(n):Lm.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?Fm.has(e):Lm.has(e)),o&&a}}const Qie=new RegExp("s*:selfs*,?","g");function dI(n,e,t){return new Yie(n).build(e,t)}class Yie{constructor(e){this._driver=e}build(e,t){const r=new Jie(t);return this._resetContextStyleTimingState(r),Dr(this,eh(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};if(r.styles.forEach(a=>{if(Vm(a)){const l=a;Object.keys(l).forEach(c=>{rU(l[c]).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}}),s.size){const a=Nm(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${a.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Dr(this,eh(e.animation),t);return{type:1,matchers:Wie(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:_a(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Dr(this,r,t)),options:_a(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Dr(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:_a(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return hI(Rm(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=hI(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||Rm(r,e),hI(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:ys({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=ys(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(o=>{"string"==typeof o?o==_s?r.push(o):t.errors.push(`The provided style string value ${o} is not allowed.`):r.push(o)}):r.push(e.styles);let i=!1,s=null;return r.forEach(o=>{if(Vm(o)){const a=o,l=a.easing;if(l&&(s=l,delete a.easing),!i)for(let c in a)if(a[c].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&Object.keys(o).forEach(a=>{if(!this._driver.validateStyleProperty(a))return void t.errors.push(`The provided animation property "${a}" is not a supported CSS property for animations`);const l=t.collectedStyles[t.currentQuerySelector],c=l[a];let u=!0;c&&(s!=i&&s>=c.startTime&&i<=c.endTime&&(t.errors.push(`The CSS property "${a}" that exists between the times of "${c.startTime}ms" and "${c.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),u=!1),s=c.startTime),u&&(l[a]={startTime:s,endTime:i}),t.options&&function(n,e,t){const r=e.params||{},i=rU(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(o[a],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(v=>{const y=this._makeStyleAst(v,t);let I=null!=y.offset?y.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Vm(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Vm(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(y.styles),x=0;return null!=I&&(s++,x=y.offset=I),l=l||x<0||x>1,a=a||x<c,c=x,o.push(x),y});l&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&t.errors.push("Please ensure that all keyframe offsets are in order");const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((v,y)=>{const I=h>0?y==f?1:h*y:o[y],x=I*m;t.currentTime=p+g.delay+x,g.duration=x,this._validateStyleAst(v,t),v.offset=I,r.styles.push(v)}),r}visitReference(e,t){return{type:8,animation:Dr(this,eh(e.animation),t),options:_a(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:_a(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:_a(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Qie,"")),n=n.replace(/@\*/g,km).replace(/@\w+/g,t=>km+"-"+t.substr(1)).replace(/:animating/g,oI),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Tr(t.collectedStyles,t.currentQuerySelector,{});const a=Dr(this,eh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:_a(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Rm(e.timings,t.errors,!0);return{type:12,animation:Dr(this,eh(e.animation),t),timings:r,options:null}}}class Jie{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Vm(n){return!Array.isArray(n)&&"object"==typeof n}function _a(n){return n?(n=wc(n)).params&&(n.params=function(n){return n?wc(n):null}(n.params)):n={},n}function hI(n,e,t){return{duration:n,delay:e,easing:t}}function fI(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Bm{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ise=new RegExp(":enter","g"),ose=new RegExp(":leave","g");function pI(n,e,t,r,i,s={},o={},a,l,c=[]){return(new ase).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class ase{buildKeyframes(e,t,r,i,s,o,a,l,c,u=[]){c=c||new Bm;const d=new gI(e,t,c,i,s,u,[]);d.options=l,d.currentTimeline.setStyles([o],null,d.errors,l),Dr(this,r,d);const h=d.timelines.filter(f=>f.containsAnimation());if(h.length&&Object.keys(a).length){const f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,d.errors,l)}return h.length?h.map(f=>f.buildKeyframes()):[fI(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?ga(r.duration):null,a=null!=r.delay?ga(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Dr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Um);const o=ga(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Dr(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ga(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Dr(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Rm(t.params?Pm(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ga(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Um);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Dr(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;Dr(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const Um={};class gI{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Um,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new jm(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ga(r.duration)),null!=r.delay&&(i.delay=ga(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Pm(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new gI(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Um,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new lse(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(ise,"."+this._enterClassName)).replace(ose,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),a}}class jm{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new jm(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||_s,this._currentKeyframe[t]=_s}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},o=function(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=_s})):lo(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(o).forEach(a=>{const l=Pm(o[a],s,r);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:_s),this._updateStyle(a,l)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=lo(a,!0);Object.keys(c).forEach(u=>{const d=c[u];"!"==d?e.add(u):d==_s&&t.add(u)}),r||(c.offset=l/this.duration),i.push(c)});const s=e.size?Nm(e.values()):[],o=t.size?Nm(t.values()):[];if(r){const a=i[0],l=wc(a);a.offset=0,l.offset=1,i=[a,l]}return fI(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class lse extends jm{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=lo(e[0],!1);l.offset=0,s.push(l);const c=lo(e[0],!1);c.offset=cU(a),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=lo(e[d],!1);h.offset=cU((t+h.offset*r)/o),s.push(h)}r=o,t=0,i="",e=s}return fI(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function cU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class mI{}class use extends mI{normalizePropertyName(e,t){return cI(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(dse[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return o+s}}const dse=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function uU(n,e,t,r,i,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const _I={};class dU{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],o=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):o}build(e,t,r,i,s,o,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||_I,p=this.buildStyles(r,a&&a.params||_I,d),g=l&&l.params||_I,m=this.buildStyles(i,g,d),v=new Set,y=new Map,I=new Map,x="void"===i,$={params:M(M({},h),g)},W=u?[]:pI(e,t,this.ast.animation,s,o,p,m,$,c,d);let pe=0;if(W.forEach(Wt=>{pe=Math.max(Wt.duration+Wt.delay,pe)}),d.length)return uU(t,this._triggerName,r,i,x,p,m,[],[],y,I,pe,d);W.forEach(Wt=>{const ir=Wt.element,ju=Tr(y,ir,{});Wt.preStyleProps.forEach(bi=>ju[bi]=!0);const Hs=Tr(I,ir,{});Wt.postStyleProps.forEach(bi=>Hs[bi]=!0),ir!==t&&v.add(ir)});const yt=Nm(v.values());return uU(t,this._triggerName,r,i,x,p,m,W,yt,y,I,pe)}}class pse{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=wc(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!=o&&(i[s]=o)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const o=s;Object.keys(o).forEach(a=>{let l=o[a];l.length>1&&(l=Pm(l,i,t));const c=this.normalizer.normalizePropertyName(a,t);l=this.normalizer.normalizeStyleValue(a,c,l,t),r[c]=l})}}),r}}class mse{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new pse(i.style,i.options&&i.options.params||{},r)}),hU(this.states,"true","1"),hU(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new dU(e,i,this.states))}),this.fallbackTransition=function(n,e,t){return new dU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function hU(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const yse=new Bm;class vse{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=dI(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,s=GB(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let o;const a=new Map;if(s?(o=pI(this._driver,t,s,sI,xm,{},{},r,yse,i),o.forEach(u=>{const d=Tr(a,u.element,{});u.postStyleProps.forEach(h=>d[h]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),o=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);a.forEach((u,d)=>{Object.keys(u).forEach(h=>{u[h]=this._driver.computeStyle(d,h,_s)})});const c=ao(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,{},d)}));return this._playersById[e]=c,c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const s=XC(t,"","","");return QC(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const fU="ng-animate-queued",pU="ng-animate-disabled",gU=".ng-animate-disabled",Cse=[],mU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ise={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wr="__ng_removed";class yI{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=null!=(n=r?e.value:e)?n:null,r){const s=wc(e);delete s.value,this.options=s}else this.options={};var n;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const th="void",vI=new yI(th);class Tse{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,qr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(n=r)&&"done"!=n)throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);var n;const s=Tr(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Tr(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(qr(e,Mm),qr(e,Mm+"-"+t),a[t]=vI),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new wI(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(qr(e,Mm),qr(e,Mm+"-"+t),this._engine.statesByElement.set(e,a={}));let l=a[t];const c=new yI(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a[t]=c,l||(l=vI),c.value!==th&&l.value===c.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const g=[],m=s.matchStyles(l.value,l.params,g),v=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{ma(e,m),Ni(e,v)})}return}const h=Tr(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!i)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(qr(e,fU),o.onStart(()=>{Ec(e,fU)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(e);if(m){let v=m.indexOf(o);v>=0&&m.splice(v,1)}}),this.players.push(o),h.push(o),o}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,km,!0);r.forEach(i=>{if(i[Wr])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e);if(s){const o=[];if(Object.keys(s).forEach(a=>{if(this._triggers[a]){const l=this.trigger(e,a,th,i);l&&o.push(l)}}),o.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&ao(o).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers[o].fallbackTransition,c=r[o]||vI,u=new yI(th),d=new wI(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Wr];(!s||s===mU)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){qr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=XC(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,QC(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Dse{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Tse(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]].namespaceId;if(o){const a=this._fetchNamespace(o);a&&t.add(a)}}}return t}trigger(e,t,r,i){if($m(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!$m(t))return;const s=t[Wr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),qr(e,pU)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ec(e,pU))}removeNode(e,t,r,i){if($m(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i){this.collectedLeaveElements.push(t),t[Wr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,i,s){return $m(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,km,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,oI,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ao(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Wr];if(t&&t.setForRemoval){if(e[Wr]=mU,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,gU)&&this.markElementAsDisabled(e,!1),this.driver.query(e,gU,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)qr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ao(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new Bm,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(U=>{u.add(U);const q=this.driver.query(U,".ng-animate-queued",!0);for(let se=0;se<q.length;se++)u.add(q[se])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=vU(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((U,q)=>{const se=sI+g++;p.set(q,se),U.forEach(Ne=>qr(Ne,se))});const m=[],v=new Set,y=new Set;for(let U=0;U<this.collectedLeaveElements.length;U++){const q=this.collectedLeaveElements[U],se=q[Wr];se&&se.setForRemoval&&(m.push(q),v.add(q),se.hasAnimation?this.driver.query(q,".ng-star-inserted",!0).forEach(Ne=>v.add(Ne)):y.add(q))}const I=new Map,x=vU(h,Array.from(v));x.forEach((U,q)=>{const se=xm+g++;I.set(q,se),U.forEach(Ne=>qr(Ne,se))}),e.push(()=>{f.forEach((U,q)=>{const se=p.get(q);U.forEach(Ne=>Ec(Ne,se))}),x.forEach((U,q)=>{const se=I.get(q);U.forEach(Ne=>Ec(Ne,se))}),m.forEach(U=>{this.processLeaveNode(U)})});const $=[],W=[];for(let U=this._namespaceList.length-1;U>=0;U--)this._namespaceList[U].drainQueuedTransitions(t).forEach(se=>{const Ne=se.player,_n=se.element;if($.push(Ne),this.collectedEnterElements.length){const ns=_n[Wr];if(ns&&ns.setForMove)return void Ne.destroy()}const ts=!d||!this.driver.containsElement(d,_n),Nr=I.get(_n),Qo=p.get(_n),At=this._buildInstruction(se,r,Qo,Nr,ts);if(At.errors&&At.errors.length)W.push(At);else{if(ts)return Ne.onStart(()=>ma(_n,At.fromStyles)),Ne.onDestroy(()=>Ni(_n,At.toStyles)),void i.push(Ne);if(se.isFallbackTransition)return Ne.onStart(()=>ma(_n,At.fromStyles)),Ne.onDestroy(()=>Ni(_n,At.toStyles)),void i.push(Ne);At.timelines.forEach(ns=>ns.stretchStartingKeyframe=!0),r.append(_n,At.timelines),o.push({instruction:At,player:Ne,element:_n}),At.queriedElements.forEach(ns=>Tr(a,ns,[]).push(Ne)),At.preStyleProps.forEach((ns,Dp)=>{const hw=Object.keys(ns);if(hw.length){let gl=l.get(Dp);gl||l.set(Dp,gl=new Set),hw.forEach(_P=>gl.add(_P))}}),At.postStyleProps.forEach((ns,Dp)=>{const hw=Object.keys(ns);let gl=c.get(Dp);gl||c.set(Dp,gl=new Set),hw.forEach(_P=>gl.add(_P))})}});if(W.length){const U=[];W.forEach(q=>{U.push(`@${q.triggerName} has failed due to:\n`),q.errors.forEach(se=>U.push(`- ${se}\n`))}),$.forEach(q=>q.destroy()),this.reportError(U)}const pe=new Map,yt=new Map;o.forEach(U=>{const q=U.element;r.has(q)&&(yt.set(q,q),this._beforeAnimationBuild(U.player.namespaceId,U.instruction,pe))}),i.forEach(U=>{const q=U.element;this._getPreviousPlayers(q,!1,U.namespaceId,U.triggerName,null).forEach(Ne=>{Tr(pe,q,[]).push(Ne),Ne.destroy()})});const Wt=m.filter(U=>EU(U,l,c)),ir=new Map;yU(ir,this.driver,y,c,_s).forEach(U=>{EU(U,l,c)&&Wt.push(U)});const Hs=new Map;f.forEach((U,q)=>{yU(Hs,this.driver,new Set(U),l,"!")}),Wt.forEach(U=>{const q=ir.get(U),se=Hs.get(U);ir.set(U,M(M({},q),se))});const bi=[],$u=[],Hu={};o.forEach(U=>{const{element:q,player:se,instruction:Ne}=U;if(r.has(q)){if(u.has(q))return se.onDestroy(()=>Ni(q,Ne.toStyles)),se.disabled=!0,se.overrideTotalTime(Ne.totalTime),void i.push(se);let _n=Hu;if(yt.size>1){let Nr=q;const Qo=[];for(;Nr=Nr.parentNode;){const At=yt.get(Nr);if(At){_n=At;break}Qo.push(Nr)}Qo.forEach(At=>yt.set(At,_n))}const ts=this._buildAnimation(se.namespaceId,Ne,pe,s,Hs,ir);if(se.setRealPlayer(ts),_n===Hu)bi.push(se);else{const Nr=this.playersByElement.get(_n);Nr&&Nr.length&&(se.parentPlayer=ao(Nr)),i.push(se)}}else ma(q,Ne.fromStyles),se.onDestroy(()=>Ni(q,Ne.toStyles)),$u.push(se),u.has(q)&&i.push(se)}),$u.forEach(U=>{const q=s.get(U.element);if(q&&q.length){const se=ao(q);U.setRealPlayer(se)}}),i.forEach(U=>{U.parentPlayer?U.syncPlayerEvents(U.parentPlayer):U.destroy()});for(let U=0;U<m.length;U++){const q=m[U],se=q[Wr];if(Ec(q,xm),se&&se.hasAnimation)continue;let Ne=[];if(a.size){let ts=a.get(q);ts&&ts.length&&Ne.push(...ts);let Nr=this.driver.query(q,oI,!0);for(let Qo=0;Qo<Nr.length;Qo++){let At=a.get(Nr[Qo]);At&&At.length&&Ne.push(...At)}}const _n=Ne.filter(ts=>!ts.destroyed);_n.length?Mse(this,q,_n):this.processLeaveNode(q)}return m.length=0,bi.forEach(U=>{this.players.push(U),U.onDone(()=>{U.destroy();const q=this.players.indexOf(U);this.players.splice(q,1)}),U.play()}),bi}elementContainsData(e,t){let r=!1;const i=t[Wr];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==th;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=Tr(r,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}ma(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;u.add(g);const m=g[Wr];if(m&&m.removedBeforeQueried)return new vc(p.duration,p.delay);const v=g!==l,y=function(n){const e=[];return wU(n,e),e}((r.get(g)||Cse).map(pe=>pe.getRealPlayer())).filter(pe=>!!pe.element&&pe.element===g),I=s.get(g),x=o.get(g),$=GB(0,this._normalizer,0,p.keyframes,I,x),W=this._buildPlayer(p,$,y);if(p.subTimeline&&i&&d.add(g),v){const pe=new wI(e,a,g);pe.setRealPlayer(W),c.push(pe)}return W});c.forEach(p=>{Tr(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>qr(p,JB));const f=ao(h);return f.onDestroy(()=>{u.forEach(p=>Ec(p,JB)),Ni(l,t.toStyles)}),d.forEach(p=>{Tr(i,p,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new vc(e.duration,e.delay)}}class wI{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new vc,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>QC(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Tr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function $m(n){return n&&1===n.nodeType}function _U(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function yU(n,e,t,r,i){const s=[];t.forEach(l=>s.push(_U(l)));const o=[];r.forEach((l,c)=>{const u={};l.forEach(d=>{const h=u[d]=e.computeStyle(c,d,i);(!h||0==h.length)&&(c[Wr]=Ise,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>_U(l,s[a++])),o}function vU(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}const Hm="$$classes";function qr(n,e){if(n.classList)n.classList.add(e);else{let t=n[Hm];t||(t=n[Hm]={}),t[e]=!0}}function Ec(n,e){if(n.classList)n.classList.remove(e);else{let t=n[Hm];t&&delete t[e]}}function Mse(n,e,t){ao(t).onDone(()=>n.processLeaveNode(e))}function wU(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof HB?wU(r.players,e):e.push(r)}}function EU(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class zm{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Dse(e,t,r),this._timelineEngine=new vse(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],c=dI(this._driver,s,l);if(l.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${l.join("\n - ")}`);a=function(n,e,t){return new mse(n,e,t)}(i,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=WB(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=WB(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function bU(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=EI(e[0]),e.length>1&&(r=EI(e[e.length-1]))):e&&(t=EI(e)),t||r?new Pse(n,t,r):null}let Pse=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ni(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ni(this._element,this._initialStyles),this._endStyles&&(Ni(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ma(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ma(this._element,this._endStyles),this._endStyles=null),Ni(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function EI(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];Nse(i)&&(e=e||{},e[i]=n[i])}return e}function Nse(n){return"display"===n||"position"===n}const CU="animation",IU="animationend";class Lse{constructor(e,t,r,i,s,o,a){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=s,this._fillMode=o,this._onDoneFn=a,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=l=>this._handleCallback(l)}apply(){(function(n,e){const t=CI(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),Gm(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),SU(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){TU(this._element,this._name,"paused")}resume(){TU(this._element,this._name,"running")}setPosition(e){const t=DU(this._element,this._name);this._position=e*this._duration,Gm(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),SU(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=CI(n,"").split(","),i=bI(r,e);i>=0&&(r.splice(i,1),Gm(n,"",r.join(",")))}(this._element,this._name))}}function TU(n,e,t){Gm(n,"PlayState",t,DU(n,e))}function DU(n,e){const t=CI(n,"");return t.indexOf(",")>0?bI(t.split(","),e):bI([t],e)}function bI(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function SU(n,e,t){t?n.removeEventListener(IU,e):n.addEventListener(IU,e)}function Gm(n,e,t,r){const i=CU+e;if(null!=r){const s=n.style[i];if(s.length){const o=s.split(",");o[r]=t,t=o.join(",")}}n.style[i]=t}function CI(n,e){return n.style[CU+e]||""}class AU{constructor(e,t,r,i,s,o,a,l){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=a,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Lse(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:uI(this.element,r))})}this.currentSnapshot=e}}class Hse extends vc{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=YB(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class MU{constructor(){this._count=0}validateStyleProperty(e){return eI(e)}matchesElement(e,t){return tI(e,t)}containsElement(e,t){return nI(e,t)}query(e,t,r){return rI(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(a=>YB(a));let i=`@keyframes ${t} {\n`,s="";r.forEach(a=>{s=" ";const l=parseFloat(a.offset);i+=`${s}${100*l}% {\n`,s+=" ",Object.keys(a).forEach(c=>{const u=a[c];switch(c){case"offset":return;case"easing":return void(u&&(i+=`${s}animation-timing-function: ${u};\n`));default:return void(i+=`${s}${c}: ${u};\n`)}}),i+=`${s}}\n`}),i+="}\n";const o=document.createElement("style");return o.textContent=i,o}animate(e,t,r,i,s,o=[],a){const l=o.filter(m=>m instanceof AU),c={};iU(r,i)&&l.forEach(m=>{let v=m.currentSnapshot;Object.keys(v).forEach(y=>c[y]=v[y])});const u=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=sU(e,t,c));if(0==r)return new Hse(e,u);const d="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,d,t);(function(n){var t;const e=null==(t=n.getRootNode)?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(h);const p=bU(e,t),g=new AU(e,t,d,r,i,s,u,p);return g.onDestroy(()=>{var n;(n=h).parentNode.removeChild(n)}),g}}class RU{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:uI(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Kse{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(PU().toString()),this._cssKeyframesDriver=new MU}validateStyleProperty(e){return eI(e)}matchesElement(e,t){return tI(e,t)}containsElement(e,t){return nI(e,t)}query(e,t,r){return rI(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,s,o=[],a){if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,s,o);const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const d={},h=o.filter(p=>p instanceof RU);iU(r,i)&&h.forEach(p=>{let g=p.currentSnapshot;Object.keys(g).forEach(m=>d[m]=g[m])});const f=bU(e,t=sU(e,t=t.map(p=>lo(p,!1)),d));return new RU(e,t,u,f)}}function PU(){return zB()&&Element.prototype.animate||{}}let Yse=(()=>{class n extends FB{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:ei.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?BB(t):t;return NU(this._renderer,null,r,"register",[i]),new Xse(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(E(kd),E(De))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class Xse extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Zse(this._id,e,t||{},this._renderer)}}class Zse{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return NU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function NU(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const OU="@.disabled";let Jse=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=null==o?void 0:o.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(s);return u||(u=new FU("",s,this.engine),this._rendererCache.set(s,u)),u}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return r.data.animation.forEach(l),new eoe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(E(kd),E(zm),E(te))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class FU{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==OU?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class eoe extends FU{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==OU?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),o="";return"@"!=s.charAt(0)&&([s,o]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let roe=(()=>{class n extends zm{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(E(De),E(iI),E(mI))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const bc=new j("AnimationModuleType"),LU=[{provide:FB,useClass:Yse},{provide:mI,useFactory:function(){return new use}},{provide:zm,useClass:roe},{provide:kd,useFactory:function(n,e,t){return new Jse(n,e,t)},deps:[im,zm,te]}],VU=[{provide:iI,useFactory:function(){return"function"==typeof PU()?new Kse:new MU}},{provide:bc,useValue:"BrowserAnimations"},...LU],aoe=[{provide:iI,useClass:XB},{provide:bc,useValue:"NoopAnimations"},...LU];let loe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?aoe:VU}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:VU,imports:[r2]}),n})();const uoe=new j("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Oi=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!$C()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(E(Fie),E(uoe,8),E(De))},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[[Jd],Jd]}),n})();function doe(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=uB(e)}}}function UU(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function hoe(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=uB(e)}}}class poe{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const jU={enterDuration:225,exitDuration:150},II=BC({passive:!0}),$U=["mousedown","touchstart"],HU=["mouseup","mouseleave","touchend","touchcancel"];class moe{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=mc(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=M(M({},jU),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const d=new poe(this,u,r);return d.state=0,this._activeRipples.add(d),r.persistent||(this._mostRecentTransientRipple=d),this._runTimeoutOutsideZone(()=>{const h=d===this._mostRecentTransientRipple;d.state=1,!r.persistent&&(!h||!this._isPointerDown)&&d.fadeOut()},c),d}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=M(M({},jU),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=mc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents($U))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(HU),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=AB(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!xB(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,II)})})}_removeTriggerEvents(){this._triggerElement&&($U.forEach(e=>{this._triggerElement.removeEventListener(e,this,II)}),this._pointerUpEventsRegistered&&HU.forEach(e=>{this._triggerElement.removeEventListener(e,this,II)}))}}const voe=new j("mat-ripple-global-options");let zU=(()=>{class n{constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new moe(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:M(M(M({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,M(M({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,M(M({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(b(dt),b(te),b(Ir),b(voe,8),b(bc,8))},n.\u0275dir=G({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&eo("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),woe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[[Oi],Oi]}),n})();function Eoe(n,e){if(1&n&&(Gp(),on(0,"circle",4)),2&n){const t=li(),r=bd(1);nc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),sn("r",t._getCircleRadius())}}function boe(n,e){if(1&n&&(Gp(),on(0,"circle",4)),2&n){const t=li(),r=bd(1);nc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),sn("r",t._getCircleRadius())}}const Ioe=UU(class{constructor(n){this._elementRef=n}},"primary"),Toe=new j("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Fi extends Ioe{constructor(e,t,r,i,s,o,a,l){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=yn.EMPTY,this.mode="determinate";const c=Fi._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(r.head)||c.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=LC(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=LC(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,LC(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=hB(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){var r;const t=50*(null!=(r=e.currentScale)?r:1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=Fi._diameters;let i=r.get(e);if(!i||!i.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),i||(i=new Set,r.set(e,i)),i.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Fi._diameters=new WeakMap,Fi.\u0275fac=function(e){return new(e||Fi)(b(dt),b(Ir),b(De,8),b(bc,8),b(Toe),b(hc),b(GC),b(te))},Fi.\u0275cmp=Gn({type:Fi,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(sn("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),nc("width",t.diameter,"px")("height",t.diameter,"px"),eo("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Oe],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(Gp(),X(0,"svg",0,1),ai(2,Eoe,1,11,"circle",2),ai(3,boe,1,9,"circle",3),J()),2&e&&(nc("width",t.diameter,"px")("height",t.diameter,"px"),Xt("ngSwitch","indeterminate"===t.mode),sn("viewBox",t._getViewBox()),Et(2),Xt("ngSwitchCase",!0),Et(1),Xt("ngSwitchCase",!1))},directives:[Jg,$V],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Aoe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[[Oi,aC],Oi]}),n})();class DI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class rh extends DI{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class SI extends DI{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class xoe extends DI{constructor(e){super(),this.element=e instanceof dt?e.nativeElement:e}}class qm{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof rh?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof SI?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof xoe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Moe extends qm{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Pe.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Km=(()=>{class n extends qm{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Xe,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=r.createComponent(s,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(b(ds),b($r),b(De))},n.\u0275dir=G({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Oe]}),n})(),AI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({}),n})();const GU=Pre();class koe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=jt(-this._previousScrollPosition.left),e.style.top=jt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),GU&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),GU&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Roe{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class WU{enable(){}disable(){}attach(){}}function xI(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function qU(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Poe{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();xI(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Noe=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new WU,this.close=o=>new Roe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new koe(this._viewportRuler,this._document),this.reposition=o=>new Poe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(E(sie),E(GC),E(te),E(De))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class MI{constructor(e){if(this.scrollStrategy=new WU,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class Ooe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let KU=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(E(De))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Foe=(()=>{class n extends KU{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(E(De),E(te,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Loe=(()=>{class n extends KU{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=fa(s)},this._clickListener=s=>{const o=fa(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(E(De),E(Ir),E(te,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kI=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null==(t=this._containerElement)||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||$C()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),$C()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(E(De),E(Ir))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Voe{constructor(e,t,r,i,s,o,a,l,c){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._backdropElement=null,this._backdropClick=new Te,this._attachments=new Te,this._detachments=new Te,this._locationChanges=yn.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new Te,this._outsidePointerEvents=new Te,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Kt(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(t=this._host)||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=M(M({},this._config),e),this._updateElementSize()}setDirection(e){this._config=xt(M({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=jt(this._config.width),e.height=jt(this._config.height),e.minWidth=jt(this._config.minWidth),e.minHeight=jt(this._config.minHeight),e.maxWidth=jt(this._config.maxWidth),e.maxHeight=jt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=mm(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Im(kp(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const QU="cdk-overlay-connected-position-bounding-box",Boe=/([A-Za-z%]+)$/;class Uoe{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Te,this._resizeSubscription=yn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(QU),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,r)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ya(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(QU),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=XU(t);let{x:o,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(o+=l),c&&(a+=c);let h=0-a,f=a+s.height-r.height,p=this._subtractOverflows(s.width,0-o,o+s.width-r.width),g=this._subtractOverflows(s.height,h,f),m=p*g;return{visibleArea:m,isCompletelyWithinViewport:s.width*s.height===m,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=YU(this._overlayRef.getConfig().minHeight),a=YU(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=i)&&c}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=XU(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),l=Math.max(s.top-r.top-e.y,0),c=Math.max(s.left-r.left-e.x,0);let u=0,d=0;return u=i.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,d=i.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Ooe(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const f=Math.min(r.bottom-e.y+r.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)h=r.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)d=e.x,u=r.right-e.x;else{const f=Math.min(r.right-e.x+r.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=jt(r.height),i.top=jt(r.top),i.bottom=jt(r.bottom),i.width=jt(r.width),i.left=jt(r.left),i.right=jt(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=jt(s)),o&&(i.maxWidth=jt(o))}this._lastBoundingBoxSize=r,ya(this._boundingBox.style,i)}_resetBoundingBoxStyles(){ya(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ya(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();ya(r,this._getExactOverlayY(t,e,u)),ya(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=jt(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=jt(o.maxWidth):s&&(r.maxWidth="")),ya(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=jt(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=jt(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:qU(e,r),isOriginOutsideView:xI(e,r),isOverlayClipped:qU(t,r),isOverlayOutsideView:xI(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&mm(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof dt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function ya(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function YU(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Boe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function XU(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const ZU="cdk-global-overlay-wrapper";class joe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(ZU),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,l=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a);e.position=this._cssPosition,e.marginLeft=l?"0":this._leftOffset,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,l?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(ZU),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let $oe=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new joe}flexibleConnectedTo(t){return new Uoe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(E(GC),E(De),E(Ir),E(kI))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hoe=0,Cc=(()=>{class n{constructor(t,r,i,s,o,a,l,c,u,d,h){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new MI(t);return o.direction=o.direction||this._directionality.value,new Voe(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Hoe++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(la)),new Moe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(E(Noe),E(kI),E(ds),E($oe),E(Foe),E(Pe),E(te),E(De),E(zC),E(Vd),E(Loe))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const Woe={provide:new j("cdk-connected-overlay-scroll-strategy"),deps:[Cc],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let JU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[Cc,Woe],imports:[[Jd,AI,wB],wB]}),n})();const qoe=["mat-button",""],Koe=["*"],Yoe=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Xoe=UU(doe(hoe(class{constructor(n){this._elementRef=n}})));let ej=(()=>{class n extends Xoe{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of Yoe)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(b(dt),b(RB),b(bc,8))},n.\u0275cmp=Gn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&Og(zU,5),2&t){let i;ac(i=lc())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(sn("disabled",r.disabled||null),eo("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Oe],attrs:qoe,ngContentSelectors:Koe,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(function(n){const e=D()[16][6];if(!e.projection){const r=e.projection=sd(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?kY(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(),X(0,"span",0),function(n,e=0,t){const r=D(),i=Me(),s=Bl(i,20+n,16,null,t||null);null===s.projection&&(s.projection=e),$w(),64!=(64&s.flags)&&function(n,e,t){TO(e[11],0,e,t,gO(n,t,e),vO(t.parent||e[6],t,e))}(i,r,s)}(1),J(),on(2,"span",1),on(3,"span",2)),2&t&&(Et(2),eo("mat-button-ripple-round",r.isRoundButton||r.isIconButton),Xt("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[zU],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),tj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[[woe,Oi],Oi]}),n})();function nj(...n){const e=Gu(n),t=UP(n),{args:r,keys:i}=l2(n);if(0===r.length)return qt([],e);const s=new Ae(function(n,e,t=zs){return r=>{rj(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)rj(e,()=>{const c=qt(n[l],e);let u=!1;c.subscribe(new ze(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>c2(i,o):zs));return t?s.pipe(gC(t)):s}function rj(n,e,t){n?rs(t,n,e):e()}function Ic(...n){return zu(1)(qt(n,Gu(n)))}function Qm(...n){const e=Gu(n);return nt((t,r)=>{(e?Ic(n,t,e):Ic(n,t)).subscribe(r)})}const ij=new Set;let Tc,tae=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):rae}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function(n){if(!ij.has(n))try{Tc||(Tc=document.createElement("style"),Tc.setAttribute("type","text/css"),document.head.appendChild(Tc)),Tc.sheet&&(Tc.sheet.insertRule(`@media ${n} {body{ }}`,0),ij.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(E(Ir))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rae(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let sj=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Te}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return oj(mm(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=nj(oj(mm(t)).map(o=>this._registerQuery(o).observable));return s=Ic(s.pipe(Kt(1)),s.pipe(EB(1),function(n,e=Cm){return nt((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(new ze(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))),s.pipe(_e(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Ae(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Qm(r),_e(({matches:o})=>({query:t,matches:o})),Im(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(E(tae),E(te))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oj(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function sae(n,e){if(1&n){const t=Cg();X(0,"div",2),X(1,"button",3),it("click",function(){return Cl(t),li().action()}),cr(2),J(),J()}if(2&n){const t=li();Et(2),Td(t.data.action)}}function oae(n,e){}const aj=new j("MatSnackBarData");class Ym{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const aae=Math.pow(2,31)-1;class RI{constructor(e,t){this._overlayRef=t,this._afterDismissed=new Te,this._afterOpened=new Te,this._onAction=new Te,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,aae))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let lae=(()=>{class n{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(b(RI),b(aj))},n.\u0275cmp=Gn({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,r){1&t&&(X(0,"span",0),cr(1),J(),ai(2,sae,3,1,"div",1)),2&t&&(Et(1),Td(r.data.message),Et(1),Xt("ngIf",r.hasAction))},directives:[Zg,ej],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const cae={snackBarState:LB("state",[Sm("void, hidden",ys({transform:"scale(0.8)",opacity:0})),Sm("visible",ys({transform:"scale(1)",opacity:1})),Am("* => visible",Dm("150ms cubic-bezier(0, 0, 0.2, 1)")),Am("* => void, * => hidden",Dm("75ms cubic-bezier(0.4, 0.0, 1, 1)",ys({opacity:0})))])};let uae=(()=>{class n extends qm{constructor(t,r,i,s,o){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Te,this._onExit=new Te,this._onEnter=new Te,this._animationState="void",this.attachDomPortal=a=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(a)),this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Kt(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),null==i||i.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(b(te),b(dt),b(hc),b(Ir),b(Ym))},n.\u0275cmp=Gn({type:n,selectors:[["snack-bar-container"]],viewQuery:function(t,r){if(1&t&&Og(Km,7),2&t){let i;ac(i=lc())&&(r._portalOutlet=i.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,r){1&t&&Ig("@state.done",function(s){return r.onAnimationEnd(s)}),2&t&&Sg("@state",r._animationState)},features:[Oe],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,r){1&t&&(X(0,"div",0),ai(1,oae,0,0,"ng-template",1),J(),on(2,"div")),2&t&&(Et(2),sn("aria-live",r._live)("role",r._role))},directives:[Km],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[cae.snackBarState]}}),n})(),lj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[[JU,AI,aC,tj,Oi],Oi]}),n})();const cj=new j("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new Ym}});let hae=(()=>{class n{constructor(t,r,i,s,o,a){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const s=M(M({},this._defaultConfig),i);return s.data={message:t,action:r},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const s=Pe.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:Ym,useValue:r}]}),o=new rh(this.snackBarContainerComponent,r.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=r,a.instance}_attach(t,r){const i=M(M(M({},new Ym),this._defaultConfig),r),s=this._createOverlay(i),o=this._attachSnackBarContainer(s,i),a=new RI(o,s);if(t instanceof di){const l=new SI(t,null,{$implicit:i.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(i,a),c=new rh(t,void 0,l),u=o.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Im(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),i.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(a,i),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new MI;r.direction=t.direction;let i=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?i.left("0"):a?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return Pe.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:RI,useValue:r},{provide:aj,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(E(Cc),E(kB),E(Pe),E(sj),E(n,12),E(cj))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),uj=(()=>{class n extends hae{constructor(t,r,i,s,o,a){super(t,r,i,s,o,a),this.simpleSnackBarComponent=lae,this.snackBarContainerComponent=uae,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(E(Cc),E(kB),E(Pe),E(sj),E(n,12),E(cj))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:lj}),n})();function ih(n){return new Ae(e=>{sr(n()).subscribe(e)})}function fae(n,e){}class PI{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const pae={dialogContainer:LB("dialogContainer",[Sm("void, exit",ys({opacity:0,transform:"scale(0.7)"})),Sm("enter",ys({transform:"none"})),Am("* => enter",VB([Dm("150ms cubic-bezier(0, 0, 0.2, 1)",ys({transform:"none",opacity:1})),jB("@*",UB(),{optional:!0})])),Am("* => void, * => exit",VB([Dm("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",ys({opacity:0})),jB("@*",UB(),{optional:!0})]))])};let gae=(()=>{class n extends qm{constructor(t,r,i,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=i,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=c,this._animationStateChanged=new Xe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(u)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=jC())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=jC(),i=this._elementRef.nativeElement;(!r||r===this._document.body||r===i||i.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=jC();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(b(dt),b(Aie),b(hc),b(De,8),b(PI),b(TB),b(te),b(RB))},n.\u0275dir=G({type:n,viewQuery:function(t,r){if(1&t&&Og(Km,7),2&t){let i;ac(i=lc())&&(r._portalOutlet=i.first)}},features:[Oe]}),n})(),mae=(()=>{class n extends gae{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=lr(n)))(r||n)}}(),n.\u0275cmp=Gn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&Ig("@dialogContainer.start",function(s){return r._onAnimationStart(s)})("@dialogContainer.done",function(s){return r._onAnimationDone(s)}),2&t&&(Dg("id",r._id),sn("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Sg("@dialogContainer",r._state))},features:[Oe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&ai(0,fae,0,0,"ng-template",0)},directives:[Km],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[pae.dialogContainer]}}),n})(),_ae=0;class NI{constructor(e,t,r="mat-dialog-"+_ae++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Te,this._afterClosed=new Te,this._beforeClosed=new Te,this._state=0,t._id=r,t._animationStateChanged.pipe($t(i=>"opened"===i.state),Kt(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe($t(i=>"closed"===i.state),Kt(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe($t(i=>27===i.keyCode&&!this.disableClose&&!function(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(i))).subscribe(i=>{i.preventDefault(),OI(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():OI(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe($t(t=>"closing"===t.state),Kt(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function OI(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const yae=new j("MatDialogData"),vae=new j("mat-dialog-default-options"),dj=new j("mat-dialog-scroll-strategy"),Eae={provide:dj,deps:[Cc],useFactory:function(n){return()=>n.scrollStrategies.block()}};let bae=(()=>{class n{constructor(t,r,i,s,o,a,l,c,u,d){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=s,this._overlayContainer=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Te,this._afterOpenedAtThisLevel=new Te,this._ariaHiddenElements=new Map,this.afterAllClosed=ih(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Qm(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){r=function(n,e){return M(M({},e),n)}(r,this._defaultOptions||new PI),r.id&&this.getDialogById(r.id);const i=this._createOverlay(r),s=this._attachDialogContainer(i,r),o=this._attachDialogContent(t,s,i,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.afterClosed().subscribe(()=>this._removeOpenDialog(o)),this.afterOpened.next(o),s._initializeWithAttachedContent(),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new MI({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const s=Pe.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:PI,useValue:r}]}),o=new rh(this._dialogContainerType,r.viewContainerRef,s,r.componentFactoryResolver);return t.attach(o).instance}_attachDialogContent(t,r,i,s){const o=new this._dialogRefConstructor(i,r,s.id);if(t instanceof di)r.attachTemplatePortal(new SI(t,null,{$implicit:s.data,dialogRef:o}));else{const a=this._createInjector(s,o,r),l=r.attachComponentPortal(new rh(t,s.viewContainerRef,a,s.componentFactoryResolver));o.componentInstance=l.instance}return o.updateSize(s.width,s.height).updatePosition(s.position),o}_createInjector(t,r,i){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!s||!s.get(zC,null,ae.Optional))&&o.push({provide:zC,useValue:{value:t.direction,change:Q()}}),Pe.create({parent:s||this._injector,providers:o})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let s=r[i];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){bg()},n.\u0275dir=G({type:n}),n})(),Xm=(()=>{class n extends bae{constructor(t,r,i,s,o,a,l,c){super(t,r,s,a,l,o,NI,mae,yae,c)}}return n.\u0275fac=function(t){return new(t||n)(E(Cc),E(Pe),E(Vd,8),E(vae,8),E(dj),E(n,12),E(kI),E(bc,8))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),Iae=0,Tae=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=hj(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){OI(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(b(NI,8),b(dt),b(Xm))},n.\u0275dir=G({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&it("click",function(s){return r._onButtonClick(s)}),2&t&&sn("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Wn]}),n})(),Dae=(()=>{class n{constructor(t,r,i){this._dialogRef=t,this._elementRef=r,this._dialog=i,this.id="mat-dialog-title-"+Iae++}ngOnInit(){this._dialogRef||(this._dialogRef=hj(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(b(NI,8),b(dt),b(Xm))},n.\u0275dir=G({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,r){2&t&&Dg("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),Sae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=G({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function hj(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}let Aae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[Xm,Eae],imports:[[JU,AI,Oi],Oi]}),n})();const Zm=nn(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function fj(){return nt((n,e)=>{let t=null;n._refCount++;const r=new ze(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class pj extends Ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,DP(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yn;const t=this.getSubject();e.add(this.source.subscribe(new ze(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yn.EMPTY)}return e}refCount(){return fj()(this)}}function Sr(n,e){return nt((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(new ze(r,l=>{null==i||i.unsubscribe();let c=0;const u=s++;sr(n(l,u)).subscribe(i=new ze(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function xae(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(new ze(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function gj(n,e){return nt(xae(n,e,arguments.length>=2,!0))}function co(n){return nt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new ze(t,void 0,void 0,o=>{s=sr(n(o,co(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function sh(n,e){return re(e)?Mt(n,e,1):Mt(n,1)}function FI(n){return n<=0?()=>is:nt((e,t)=>{let r=[];e.subscribe(new ze(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function mj(n=Mae){return nt((e,t)=>{let r=!1;e.subscribe(new ze(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Mae(){return new Zm}function _j(n){return nt((e,t)=>{let r=!1;e.subscribe(new ze(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Dc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?$t((i,s)=>n(i,s,r)):zs,Kt(1),t?_j(e):mj(()=>new Zm))}function Jn(n,e,t){const r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?nt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(new ze(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):zs}class vs{constructor(e,t){this.id=e,this.url=t}}class LI extends vs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oh extends vs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yj extends vs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pae extends vs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nae extends vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oae extends vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fae extends vs{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lae extends vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vae extends vs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vj{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wj{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bae{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uae{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jae{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ej{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bj{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ve="primary";class $ae{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Sc(n){return new $ae(n)}const Cj="ngNavigationCancelingError";function VI(n){const e=Error("NavigationCancelingError: "+n);return e[Cj]=!0,e}function zae(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Li(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Ij(n[i],e[i]))return!1;return!0}function Ij(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Tj(n){return Array.prototype.concat.apply([],n)}function Dj(n){return n.length>0?n[n.length-1]:null}function vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Vi(n){return lb(n)?n:Cd(n)?qt(Promise.resolve(n)):Q(n)}const qae={exact:function xj(n,e,t){if(!wa(n.segments,e.segments)||!Jm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!xj(n.children[r],e.children[r],t))return!1;return!0},subset:Mj},Sj={exact:function(n,e){return Li(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ij(n[t],e[t]))},ignored:()=>!0};function Aj(n,e,t){return qae[t.paths](n.root,e.root,t.matrixParams)&&Sj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Mj(n,e,t){return kj(n,e,e.segments,t)}function kj(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!wa(i,t)||e.hasChildren()||!Jm(i,t,r))}if(n.segments.length===t.length){if(!wa(n.segments,t)||!Jm(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Mj(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(wa(n.segments,i)&&Jm(n.segments,i,r)&&n.children[ve])&&kj(n.children[ve],e,s,r)}}function Jm(n,e,t){return e.every((r,i)=>Sj[t](n[i].parameters,r.parameters))}class va{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sc(this.queryParams)),this._queryParamMap}toString(){return Zae.serialize(this)}}class be{constructor(e,t){this.segments=e,this.children=t,this.parent=null,vn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return e_(this)}}class ah{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Sc(this.parameters)),this._parameterMap}toString(){return Fj(this)}}function wa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Rj{}class Pj{parse(e){const t=new ale(e);return new va(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lh(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${t_(t)}=${t_(i)}`).join("&"):`${t_(t)}=${t_(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Zae=new Pj;function e_(n){return n.segments.map(e=>Fj(e)).join("/")}function lh(n,e){if(!n.hasChildren())return e_(n);if(e){const t=n.children[ve]?lh(n.children[ve],!1):"",r=[];return vn(n.children,(i,s)=>{s!==ve&&r.push(`${s}:${lh(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return vn(n.children,(r,i)=>{i===ve&&(t=t.concat(e(r,i)))}),vn(n.children,(r,i)=>{i!==ve&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ve?[lh(n.children[ve],!1)]:[`${i}:${lh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ve]?`${e_(n)}/${t[0]}`:`${e_(n)}/(${t.join("//")})`}}function Nj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function t_(n){return Nj(n).replace(/%3B/gi,";")}function BI(n){return Nj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function n_(n){return decodeURIComponent(n)}function Oj(n){return n_(n.replace(/\+/g,"%20"))}function Fj(n){return`${BI(n.path)}${function(n){return Object.keys(n).map(e=>`;${BI(e)}=${BI(n[e])}`).join("")}(n.parameters)}`}const nle=/^[^\/()?;=#]+/;function r_(n){const e=n.match(nle);return e?e[0]:""}const rle=/^[^=?&#]+/,sle=/^[^&#]+/;class ale{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ve]=new be(e,t)),r}parseSegment(){const e=r_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ah(n_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=r_(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=r_(this.remaining);i&&(r=i,this.capture(r))}e[n_(t)]=n_(r)}parseQueryParam(e){const t=function(n){const e=n.match(rle);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function(n){const e=n.match(sle);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Oj(t),s=Oj(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=r_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ve);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ve]:new be([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Lj{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=UI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=UI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jI(e,this._root).map(t=>t.value)}}function UI(n,e){if(n===e.value)return e;for(const t of e.children){const r=UI(n,t);if(r)return r}return null}function jI(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jI(n,t);if(r.length)return r.unshift(e),r}return[]}class ws{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ac(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Vj extends Lj{constructor(e,t){super(e),this.snapshot=t,$I(this,e)}toString(){return this.snapshot.toString()}}function Bj(n,e){const t=function(n,e){const o=new i_([],{},{},"",{},ve,e,null,n.root,-1,{});return new jj("",new ws(o,[]))}(n,e),r=new Gr([new ah("",{})]),i=new Gr({}),s=new Gr({}),o=new Gr({}),a=new Gr(""),l=new xc(r,i,o,a,s,ve,e,t.root);return l.snapshot=t.root,new Vj(new ws(l,[]),t)}class xc{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(_e(e=>Sc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(_e(e=>Sc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Uj(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class i_{constructor(e,t,r,i,s,o,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Sc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Sc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jj extends Lj{constructor(e,t){super(t),this.url=e,$I(this,t)}toString(){return $j(this._root)}}function $I(n,e){e.value._routerState=n,e.children.forEach(t=>$I(n,t))}function $j(n){const e=n.children.length>0?` { ${n.children.map($j).join(", ")} } `:"";return`${n.value}${e}`}function HI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Li(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Li(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Li(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Li(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zI(n,e){const t=Li(n.params,e.params)&&function(n,e){return wa(n,e)&&n.every((t,r)=>Li(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zI(n.parent,e.parent))}function ch(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ch(n,r,i);return ch(n,r)})}(n,e,t);return new ws(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ch(n,a)),o}}const r=function(n){return new xc(new Gr(n.url),new Gr(n.params),new Gr(n.queryParams),new Gr(n.fragment),new Gr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>ch(n,s));return new ws(r,i)}}function s_(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function uh(n){return"object"==typeof n&&null!=n&&n.outlets}function GI(n,e,t,r,i){let s={};return r&&vn(r,(o,a)=>{s[a]=Array.isArray(o)?o.map(l=>`${l}`):`${o}`}),new va(t.root===n?e:Hj(t.root,n,e),s,i)}function Hj(n,e,t){const r={};return vn(n.children,(i,s)=>{r[s]=i===e?t:Hj(i,e,t)}),new be(n.segments,r)}class zj{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&s_(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(uh);if(i&&i!==Dj(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class WI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Gj(n,e,t){if(n||(n=new be([],{})),0===n.segments.length&&n.hasChildren())return o_(n,e,t);const r=function(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(uh(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!qj(l,c,o))return s;r+=2}else{if(!qj(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new be(n.segments.slice(0,r.pathIndex),{});return s.children[ve]=new be(n.segments.slice(r.pathIndex),n.children),o_(s,0,i)}return r.match&&0===i.length?new be(n.segments,{}):r.match&&!n.hasChildren()?qI(n,e,t):r.match?o_(n,0,i):qI(n,e,t)}function o_(n,e,t){if(0===t.length)return new be(n.segments,{});{const r=function(n){return uh(n[0])?n[0].outlets:{[ve]:n}}(t),i={};return vn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Gj(n.children[o],e,s))}),vn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new be(n.segments,i)}}function qI(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(uh(s)){const l=vle(s.outlets);return new be(r,l)}if(0===i&&s_(t[0])){r.push(new ah(n.segments[e].path,Wj(t[0]))),i++;continue}const o=uh(s)?s.outlets[ve]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&s_(a)?(r.push(new ah(o,Wj(a))),i+=2):(r.push(new ah(o,{})),i++)}return new be(r,{})}function vle(n){const e={};return vn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=qI(new be([],{}),0,t))}),e}function Wj(n){const e={};return vn(n,(t,r)=>e[r]=`${t}`),e}function qj(n,e,t){return n==t.path&&Li(e,t.parameters)}class Ele{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),HI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ac(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),vn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ac(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ac(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ac(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ej(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Uae(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(HI(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),HI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),l=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=l,o.outlet&&o.outlet.activateWith(i,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class KI{constructor(e,t){this.routes=e,this.module=t}}function uo(n){return"function"==typeof n}function Ea(n){return n instanceof va}const dh=Symbol("INITIAL_VALUE");function hh(){return Sr(n=>nj(n.map(e=>e.pipe(Kt(1),Qm(dh)))).pipe(gj((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==dh?i:(s===dh&&(r=!0),r||!1!==s&&o!==t.length-1&&!Ea(s)?i:s),e)},dh),$t(e=>e!==dh),_e(e=>Ea(e)?e:!0===e),Kt(1)))}class Ale{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new fh,this.attachRef=null}}class fh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ale,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let QI=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.name=s||ve,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new xle(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(b(fh),b($r),b(ds),td("name"),b(hc))},n.\u0275dir=G({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class xle{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xc?this.route:e===fh?this.childContexts:this.parent.get(e,t)}}let YI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Gn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&on(0,"router-outlet")},directives:[QI],encapsulation:2}),n})();function Kj(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Mle(r,kle(e,r))}}function Mle(n,e){n.children&&Kj(n.children,e)}function kle(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function XI(n){const e=n.children&&n.children.map(XI),t=e?xt(M({},n),{children:e}):M({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ve&&(t.component=YI),t}function Kr(n){return n.outlet||ve}function Qj(n,e){const t=n.filter(r=>Kr(r)===e);return t.push(...n.filter(r=>Kr(r)!==e)),t}const Yj={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function a_(n,e,t){var a;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?M({},Yj):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||zae)(t,n,e);if(!i)return M({},Yj);const s={};vn(i.posParams,(l,c)=>{s[c]=l.path});const o=i.consumed.length>0?M(M({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!=(a=i.posParams)?a:{}}}function l_(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>c_(n,e,r)&&Kr(r)!==ve)}(n,t,r)){const o=new be(e,function(n,e,t,r){const i={};i[ve]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Kr(s)!==ve){const o=new be([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Kr(s)]=o}return i}(n,e,r,new be(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>c_(n,e,r))}(n,t,r)){const o=new be(n.segments,function(n,e,t,r,i,s){const o={};for(const a of r)if(c_(n,t,a)&&!i[Kr(a)]){const l=new be([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Kr(a)]=l}return M(M({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new be(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function c_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Xj(n,e,t,r){return!!(Kr(n)===r||r!==ve&&c_(e,t,n))&&("**"===n.path||a_(e,n,t).matched)}function Zj(n,e,t){return 0===e.length&&!n.children[t]}class ph{constructor(e){this.segmentGroup=e||null}}class Jj{constructor(e){this.urlTree=e}}function u_(n){return new Ae(e=>e.error(new ph(n)))}function e$(n){return new Ae(e=>e.error(new Jj(n)))}function Fle(n){return new Ae(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Ble{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(fs)}apply(){const e=l_(this.urlTree.root,[],[],this.config).segmentGroup,t=new be(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ve).pipe(_e(s=>this.createUrlTree(ZI(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(co(s=>{if(s instanceof Jj)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ph?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ve).pipe(_e(i=>this.createUrlTree(ZI(i),e.queryParams,e.fragment))).pipe(co(i=>{throw i instanceof ph?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new be([],{[ve]:e}):e;return new va(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(_e(s=>new be([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return qt(i).pipe(sh(s=>{const o=r.children[s],a=Qj(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(_e(l=>({segment:l,outlet:s})))}),gj((s,o)=>(s[o.outlet]=o.segment,s),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?$t((i,s)=>n(i,s,r)):zs,FI(1),t?_j(e):mj(()=>new Zm))}())}expandSegment(e,t,r,i,s,o){return qt(r).pipe(sh(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(co(c=>{if(c instanceof ph)return Q(null);throw c}))),Dc(a=>!!a),co((a,l)=>{if(a instanceof Zm||"EmptyError"===a.name){if(Zj(t,i,s))return Q(new be([],{}));throw new ph(t)}throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return Xj(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):u_(t):u_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?e$(s):this.lineralizeSegments(r,s).pipe(Mt(o=>{const a=new be(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:u}=a_(t,i,s);if(!a)return u_(t);const d=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?e$(d):this.lineralizeSegments(i,d).pipe(Mt(h=>this.expandSegment(e,t,r,h.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Q(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(_e(h=>(r._loadedConfig=h,new be(i,{})))):Q(new be(i,{}));const{matched:o,consumedSegments:a,lastChild:l}=a_(t,r,i);if(!o)return u_(t);const c=i.slice(l);return this.getChildConfig(e,r,i).pipe(Mt(d=>{const h=d.module,f=d.routes,{segmentGroup:p,slicedSegments:g}=l_(t,a,c,f),m=new be(p.segments,p.children);if(0===g.length&&m.hasChildren())return this.expandChildren(h,f,m).pipe(_e(x=>new be(a,x)));if(0===f.length&&0===g.length)return Q(new be(a,{}));const v=Kr(r)===s;return this.expandSegment(h,m,f,g,v?ve:s,!0).pipe(_e(I=>new be(a.concat(I.segments),I.children)))}))}getChildConfig(e,t,r){return t.children?Q(new KI(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Q(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(Mt(i=>{return i?this.configLoader.load(e.injector,t).pipe(_e(s=>(t._loadedConfig=s,s))):(n=t,new Ae(e=>e.error(VI(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):Q(new KI([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Q(i.map(o=>{const a=e.get(o);let l;if((n=a)&&uo(n.canLoad))l=a.canLoad(t,r);else{if(!uo(a))throw new Error("Invalid CanLoad guard");l=a(t,r)}var n;return Vi(l)})).pipe(hh(),Jn(o=>{if(!Ea(o))return;const a=VI(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),_e(o=>!0===o)):Q(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Q(r);if(i.numberOfChildren>1||!i.children[ve])return Fle(e.redirectTo);i=i.children[ve]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new va(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return vn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return vn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new be(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function ZI(n){const e={};for(const r of Object.keys(n.children)){const s=ZI(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function(n){if(1===n.numberOfChildren&&n.children[ve]){const e=n.children[ve];return new be(n.segments.concat(e.segments),e.children)}return n}(new be(n.segments,e))}class t${constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class d_{constructor(e,t){this.component=e,this.route=t}}function $le(n,e,t){const r=n._root;return gh(r,e?e._root:null,t,[r.value])}function h_(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function gh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ac(e);return n.children.forEach(o=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!wa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wa(n.url,e.url)||!Li(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zI(n,e)||!Li(n.queryParams,e.queryParams);default:return!zI(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new t$(r)):(s.data=o.data,s._resolvedData=o._resolvedData),gh(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new d_(a.outlet.component,o))}else o&&mh(e,a,i),i.canActivateChecks.push(new t$(r)),gh(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),vn(s,(o,a)=>mh(o,t.getContext(a),i)),i}function mh(n,e,t){const r=Ac(n),i=n.value;vn(r,(s,o)=>{mh(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new d_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class tce{}function n$(n){return new Ae(e=>e.error(n))}class rce{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=l_(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ve);if(null===t)return null;const r=new i_([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,{},ve,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ws(r,t),s=new jj(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=Uj(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=Qj(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=r$(r);return i.sort((e,t)=>e.value.outlet===ve?-1:t.value.outlet===ve?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return Zj(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Xj(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const f=r.length>0?Dj(r).parameters:{};s=new i_(r,f,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,o$(e),Kr(e),e.component,e,i$(t),s$(t)+r.length,a$(e))}else{const f=a_(t,e,r);if(!f.matched)return null;o=f.consumedSegments,a=r.slice(f.lastChild),s=new i_(o,f.parameters,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,o$(e),Kr(e),e.component,e,i$(t),s$(t)+o.length,a$(e))}const l=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:c,slicedSegments:u}=l_(t,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);var n;if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new ws(s,f)]}if(0===l.length&&0===u.length)return[new ws(s,[])];const d=Kr(e)===i,h=this.processSegment(l,c,u,d?ve:i);return null===h?null:[new ws(s,h)]}}function oce(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function r$(n){const e=[],t=new Set;for(const r of n){if(!oce(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=r$(r.children);e.push(new ws(r.value,i))}return e.filter(r=>!t.has(r))}function i$(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function s$(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function o$(n){return n.data||{}}function a$(n){return n.resolve||{}}function JI(n){return Sr(e=>{const t=n(e);return t?qt(t).pipe(_e(()=>e)):Q(e)})}class pce extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const eT=new j("ROUTES");class l${constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(_e(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new KI(Tj(o.injector.get(eT,void 0,ae.Self|ae.Optional)).map(XI),o)}),co(s=>{throw t._loader$=void 0,s}));return t._loader$=new pj(i,()=>new Te).pipe(fj()),t._loader$}loadModuleFactory(e){return Vi(e()).pipe(Mt(t=>t instanceof _L?Q(t):qt(this.compiler.compileModuleAsync(t))))}}class mce{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function _ce(n){throw n}function yce(n,e,t){return e.parse("/")}function c$(n,e){return Q(null)}const vce={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wce={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let On=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Te,this.errorHandler=_ce,this.malformedUriErrorHandler=yce,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:c$,afterPreactivation:c$},this.urlHandlingStrategy=new mce,this.routeReuseStrategy=new pce,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(fs),this.console=o.get(tV);const d=o.get(te);this.isNgZoneEnabled=d instanceof te&&te.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new va(new be([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new l$(o,a,h=>this.triggerEvent(new vj(h)),h=>this.triggerEvent(new wj(h))),this.routerState=Bj(this.currentUrlTree,this.rootComponentType),this.transitions=new Gr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe($t(i=>0!==i.id),_e(i=>xt(M({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Sr(i=>{let s=!1,o=!1;return Q(i).pipe(Jn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?xt(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Sr(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return f_(a.source)&&(this.browserUrlTree=a.extractedUrl),Q(a).pipe(Sr(d=>{const h=this.transitions.getValue();return r.next(new LI(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?is:Promise.resolve(d)}),function(n,e,t,r){return Sr(i=>function(n,e,t,r,i){return new Ble(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(_e(s=>xt(M({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Jn(d=>{this.currentNavigation=xt(M({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function(n,e,t,r,i){return Mt(s=>function(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new rce(n,e,t,r,i,s).recognize();return null===o?n$(new tce):Q(o)}catch(o){return n$(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(_e(o=>xt(M({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),Jn(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Nae(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=a,v=new LI(h,this.serializeUrl(f),p,g);r.next(v);const y=Bj(f,this.rootComponentType).snapshot;return Q(xt(M({},a),{targetSnapshot:y,urlAfterRedirects:f,extras:xt(M({},m),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),is}),JI(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Jn(a=>{const l=new Oae(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),_e(a=>xt(M({},a),{guards:$le(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(n,e){return Mt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Q(xt(M({},t),{guardsResult:!0})):function(n,e,t,r){return qt(n).pipe(Mt(i=>function(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Q(s.map(a=>{const l=h_(a,e,i);let c;if(function(n){return n&&uo(n.canDeactivate)}(l))c=Vi(l.canDeactivate(n,e,t,r));else{if(!uo(l))throw new Error("Invalid CanDeactivate guard");c=Vi(l(n,e,t,r))}return c.pipe(Dc())})).pipe(hh()):Q(!0)}(i.component,i.route,t,e,r)),Dc(i=>!0!==i,!0))}(o,r,i,n).pipe(Mt(a=>a&&function(n){return"boolean"==typeof n}(a)?function(n,e,t,r){return qt(e).pipe(sh(i=>Ic(function(n,e){return null!==n&&e&&e(new Bae(n)),Q(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new jae(n)),Q(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>ih(()=>Q(o.guards.map(l=>{const c=h_(l,o.node,t);let u;if(function(n){return n&&uo(n.canActivateChild)}(c))u=Vi(c.canActivateChild(r,n));else{if(!uo(c))throw new Error("Invalid CanActivateChild guard");u=Vi(c(r,n))}return u.pipe(Dc())})).pipe(hh())));return Q(s).pipe(hh())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Q(!0);const i=r.map(s=>ih(()=>{const o=h_(s,e,t);let a;if(function(n){return n&&uo(n.canActivate)}(o))a=Vi(o.canActivate(e,n));else{if(!uo(o))throw new Error("Invalid CanActivate guard");a=Vi(o(e,n))}return a.pipe(Dc())}));return Q(i).pipe(hh())}(n,i.route,t))),Dc(i=>!0!==i,!0))}(r,s,n,e):Q(a)),_e(a=>xt(M({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Jn(a=>{if(Ea(a.guardsResult)){const c=VI(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new Fae(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),$t(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),JI(a=>{if(a.guards.canActivateChecks.length)return Q(a).pipe(Jn(l=>{const c=new Lae(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Sr(l=>{let c=!1;return Q(l).pipe(function(n,e){return Mt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Q(t);let s=0;return qt(i).pipe(sh(o=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Q({});const s={};return qt(i).pipe(Mt(o=>function(n,e,t,r){const i=h_(n,e,r);return Vi(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(Jn(a=>{s[o]=a}))),FI(1),Mt(()=>Object.keys(s).length===i.length?Q(s):is))}(n._resolve,n,e,r).pipe(_e(s=>(n._resolvedData=s,n.data=M(M({},n.data),Uj(n,t).resolve),null)))}(o.route,r,n,e)),Jn(()=>s++),FI(1),Mt(o=>s===i.length?Q(t):is))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Jn({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),Jn(l=>{const c=new Vae(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),JI(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),_e(a=>{const l=function(n,e,t){const r=ch(n,e._root,t?t._root:void 0);return new Vj(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return xt(M({},a),{targetRouterState:l})}),Jn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>_e(r=>(new Ele(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Jn({next(){s=!0},complete(){s=!0}}),function(n){return nt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null==(a=this.currentNavigation)?void 0:a.id)===i.id&&(this.currentNavigation=null)}),co(a=>{if(o=!0,function(n){return n&&n[Cj]}(a)){const l=Ea(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const c=new yj(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||f_(i.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new Pae(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return is}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(M(M({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var a;const i={replaceUrl:!0},s=(null==(a=t.state)?void 0:a.navigationId)?t.state:null;if(s){const l=M({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Kj(t),this.config=t.map(XI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d=M(M({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function(n,e,t,r,i){if(0===t.length)return GI(e.root,e.root,e,r,i);const s=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return vn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new zj(t,e,r)}(t);if(s.toRoot())return GI(e.root,new be([],{}),e,r,i);const o=function(n,e,t){if(n.isAbsolute)return new WI(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new WI(s,s===e.root,0)}const r=s_(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new WI(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?o_(o.segmentGroup,o.index,s.commands):Gj(o.segmentGroup,o.index,s.commands);return GI(o.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ea(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?M({},vce):!1===r?M({},wce):r,Ea(t))return Aj(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Aj(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new oh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var v,y,I;if(this.disposed)return Promise.resolve(!1);const a=this.transitions.value,l=f_(r)&&a&&!f_(a.source),c=a.rawUrl.toString()===t.toString(),u=a.id===(null==(v=this.currentNavigation)?void 0:v.id);if(l&&c&&u)return Promise.resolve(!0);let h,f,p;o?(h=o.resolve,f=o.reject,p=o.promise):p=new Promise((x,$)=>{h=x,f=$});const g=++this.navigationId;let m;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),m=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!=(y=this.browserPageId)?y:0:(null!=(I=this.browserPageId)?I:0)+1):m=0,this.setTransition({id:g,targetPageId:m,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:f,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=M(M({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(i=this.currentNavigation)?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null==(s=this.currentNavigation)?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new yj(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){bg()},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();function f_(n){return"imperative"!==n}let p_=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new Te,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Mc(this.skipLocationChange),replaceUrl:Mc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Mc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(b(On),b(xc),td("tabindex"),b(hs),b(dt))},n.\u0275dir=G({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&it("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Wn]}),n})(),g_=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Te,this.subscription=t.events.subscribe(s=>{s instanceof oh&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,o){if(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const a={skipLocationChange:Mc(this.skipLocationChange),replaceUrl:Mc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Mc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(b(On),b(xc),b(pc))},n.\u0275dir=G({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&it("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&sn("target",r.target)("href",r.href,cg)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Wn]}),n})();function Mc(n){return""===n||!!n}class u${}class d${preload(e,t){return Q(null)}}let h$=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new l$(i,r,l=>t.triggerEvent(new vj(l)),l=>t.triggerEvent(new wj(l)))}setUpPreloading(){this.subscription=this.router.events.pipe($t(t=>t instanceof oh),sh(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(fs);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return qt(i).pipe(zu(),_e(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Q(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Mt(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(E(On),E(Bg),E(Pe),E(u$))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),tT=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof LI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof oh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof bj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new bj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){bg()},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const ba=new j("ROUTER_CONFIGURATION"),f$=new j("ROUTER_FORROOT_GUARD"),Tce=[Vd,{provide:Rj,useClass:Pj},{provide:On,useFactory:function(n,e,t,r,i,s,o={},a,l){const c=new On(null,n,e,t,r,i,Tj(s));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(u=>{var d,h;null==(d=console.group)||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null==(h=console.groupEnd)||h.call(console)}),c},deps:[Rj,fh,Vd,Pe,Bg,eT,ba,[class{},new qe],[class{},new qe]]},fh,{provide:xc,useFactory:function(n){return n.routerState.root},deps:[On]},h$,d$,class{preload(e,t){return t().pipe(co(()=>Q(null)))}},{provide:ba,useValue:{enableTracing:!1}}];function Dce(){return new aV("Router",On)}let p$=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Tce,g$(t),{provide:f$,useFactory:xce,deps:[[On,new qe,new Pl]]},{provide:ba,useValue:r||{}},{provide:pc,useFactory:Ace,deps:[ua,[new cd(Qb),new qe],ba]},{provide:tT,useFactory:Sce,deps:[On,$te,ba]},{provide:u$,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:d$},{provide:aV,multi:!0,useFactory:Dce},[nT,{provide:uc,multi:!0,useFactory:Pce,deps:[nT]},{provide:m$,useFactory:Nce,deps:[nT]},{provide:eV,multi:!0,useExisting:m$}]]}}static forChild(t){return{ngModule:n,providers:[g$(t)]}}}return n.\u0275fac=function(t){return new(t||n)(E(f$,8),E(On,8))},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({}),n})();function Sce(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new tT(n,e,t)}function Ace(n,e,t={}){return t.useHash?new Cee(n,e):new xV(n,e)}function xce(n){return"guarded"}function g$(n){return[{provide:J8,multi:!0,useValue:n},{provide:eT,multi:!0,useValue:n}]}let nT=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Te}appInitializer(){return this.injector.get(wee,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(On),o=this.injector.get(ba);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Q(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ba),i=this.injector.get(h$),s=this.injector.get(tT),o=this.injector.get(On),a=this.injector.get(la);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(E(Pe))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();function Pce(n){return n.appInitializer.bind(n)}function Nce(n){return n.bootstrapListener.bind(n)}const m$=new j("Router Initializer");function _$(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function _(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){_$(s,r,i,o,a,"next",l)}function a(l){_$(s,r,i,o,a,"throw",l)}o(void 0)})}}const P=function(n,e){if(!n)throw kc(e)},kc=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},y$=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},m_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,o||(h=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(y$(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new Lce;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Lce extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v$=function(n){const e=y$(n);return m_.encodeByteArray(e,!0)},__=function(n){return v$(n).replace(/\./g,"")},y_=function(n){try{return m_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Vce(n){return w$(void 0,n)}function w$(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Bce(t)||(n[t]=w$(n[t],e[t]));return n}function Bce(n){return"__proto__"!==n}const v_=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if("undefined"==typeof document)return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=n&&y_(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},E$=n=>{var e,t;return null===(t=null===(e=v_())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},b$=n=>{const e=E$(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},C$=()=>{var n;return null===(n=v_())||void 0===n?void 0:n.config},I$=n=>{var e;return null===(e=v_())||void 0===e?void 0:e[`_${n}`]};class Rc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function T$(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[__(JSON.stringify({alg:"none",type:"JWT"})),__(JSON.stringify(o)),""].join(".")}function an(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function iT(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function sT(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function D$(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ca(){try{return"object"==typeof indexedDB}catch(n){return!1}}function _h(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function oT(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Qr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bi.prototype.create)}}class Bi{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function(n,e){return n.replace(Kce,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Qr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Kce=/\{\$([^}]+)}/g;function yh(n){return JSON.parse(n)}function wn(n){return JSON.stringify(n)}const w_=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=yh(y_(s[0])||""),t=yh(y_(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch(s){}return{header:e,claims:t,data:r,signature:i}};function bs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Pc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function aT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function E_(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function vh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(S$(s)&&S$(o)){if(!vh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function S$(n){return null!==n&&"object"==typeof n}function Nc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class Xce{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,u,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class Jce{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function(n,e){if("object"!=typeof n||null===n)return!1;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}(e)?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=lT),void 0===i.error&&(i.error=lT),void 0===i.complete&&(i.complete=lT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lT(){}const C_=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function cT(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Ct(n){return n&&n._delegate?n._delegate:n}class En{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ia="[DEFAULT]";class aue{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Rc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Ia})}catch(t){}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=Ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ia){return this.instances.has(e)}getOptions(e=Ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ia?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}var n;return r||null}normalizeInstanceIdentifier(e=Ia){return this.component?this.component.multipleInstances?e:Ia:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class uue{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aue(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const uT=[];var Ce=(()=>{return(n=Ce||(Ce={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Ce;var n})();const A$={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},due=Ce.INFO,hue={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},fue=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=hue[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Ta{constructor(e){this.name=e,this._logLevel=due,this._logHandler=fue,this._userLogHandler=null,uT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?A$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}let x$,M$;const k$=new WeakMap,dT=new WeakMap,R$=new WeakMap,hT=new WeakMap,fT=new WeakMap;let pT={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return dT.get(n);if("objectStoreNames"===e)return n.objectStoreNames||R$.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ho(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Eue(n){return"function"==typeof n?function(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(M$||(M$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(gT(this),e),ho(k$.get(this))}:function(...e){return ho(n.apply(gT(this),e))}:function(e,...t){const r=n.call(gT(this),e,...t);return R$.set(r,e.sort?e.sort():[e]),ho(r)}}(n):(n instanceof IDBTransaction&&function(n){if(dT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});dT.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,x$||(x$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,pT):n)}function ho(n){if(n instanceof IDBRequest)return function(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ho(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&k$.set(t,n)}).catch(()=>{}),fT.set(e,n),e}(n);if(hT.has(n))return hT.get(n);const e=Eue(n);return e!==n&&(hT.set(n,e),fT.set(e,n)),e}const gT=n=>fT.get(n),Cue=["get","getKey","getAll","getAllKeys","count"],Iue=["put","add","delete","clear"],mT=new Map;function P$(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(mT.get(e))return mT.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Iue.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Cue.includes(t))return;const s=function(){var o=_(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return mT.set(e,s),s}var n;pT=xt(M({},n=pT),{get:(e,t,r)=>P$(e,t)||n.get(e,t,r),has:(e,t)=>!!P$(e,t)||n.has(e,t)});class Tue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const _T="@firebase/app",Da=new Ta("@firebase/app"),I_="[DEFAULT]",Zue={[_T]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Sa=new Map,T_=new Map;function Jue(n,e){try{n.container.addComponent(e)}catch(t){Da.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fn(n){const e=n.name;if(T_.has(e))return Da.debug(`There were multiple attempts to register component ${e}.`),!1;T_.set(e,n);for(const t of Sa.values())Jue(t,n);return!0}function Cs(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Is=new Bi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class tde{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}const fo="9.23.0";function O$(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:I_,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Is.create("bad-app-name",{appName:String(i)});if(t||(t=C$()),!t)throw Is.create("no-options");const s=Sa.get(i);if(s){if(vh(t,s.options)&&vh(r,s.config))return s;throw Is.create("duplicate-app",{appName:i})}const o=new uue(i);for(const l of T_.values())o.addComponent(l);const a=new tde(t,r,o);return Sa.set(i,a),a}function wh(n=I_){const e=Sa.get(n);if(!e&&n===I_&&C$())return O$();if(!e)throw Is.create("no-app",{appName:n});return e}function F$(){return Array.from(Sa.values())}function He(n,e,t){var r;let i=null!==(r=Zue[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Da.warn(a.join(" "))}Fn(new En(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Eh="firebase-heartbeat-store";let $$,H$,vT=null;function L$(){return vT||(vT=function(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=ho(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ho(o.result),l.oldVersion,l.newVersion,ho(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Eh)}}).catch(n=>{throw Is.create("idb-open",{originalErrorMessage:n.message})})),vT}function wT(){return wT=_(function*(n){try{return yield(yield L$()).transaction(Eh).objectStore(Eh).get(B$(n))}catch(e){if(e instanceof Qr)Da.warn(e.message);else{const t=Is.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Da.warn(t.message)}}}),wT.apply(this,arguments)}function V$(n,e){return ET.apply(this,arguments)}function ET(){return ET=_(function*(n,e){try{const r=(yield L$()).transaction(Eh,"readwrite");yield r.objectStore(Eh).put(e,B$(n)),yield r.done}catch(t){if(t instanceof Qr)Da.warn(t.message);else{const r=Is.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});Da.warn(r.message)}}}),ET.apply(this,arguments)}function B$(n){return`${n.name}!${n.options.appId}`}class ade{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cde(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=U$();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=U$(),{heartbeatsToSend:r,unsentEntries:i}=function(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),j$(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),j$(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=__(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function U$(){return(new Date).toISOString().substring(0,10)}class cde{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!Ca()&&_h().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(n){return wT.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return _(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return V$(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return _(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return V$(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function j$(n){return __(JSON.stringify({version:2,heartbeats:n})).length}Fn(new En("platform-logger",e=>new Tue(e),"PRIVATE")),Fn(new En("heartbeat",e=>new ade(e),"PRIVATE")),He(_T,"0.9.13",""),He(_T,"0.9.13","esm2017"),He("fire-js",""),He("firebase","9.23.0","app");const z$=new WeakMap,bT=new WeakMap,G$=new WeakMap,CT=new WeakMap,IT=new WeakMap;let TT={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return bT.get(n);if("objectStoreNames"===e)return n.objectStoreNames||G$.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return po(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function wde(n){return"function"==typeof n?function(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H$||(H$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(DT(this),e),po(z$.get(this))}:function(...e){return po(n.apply(DT(this),e))}:function(e,...t){const r=n.call(DT(this),e,...t);return G$.set(r,e.sort?e.sort():[e]),po(r)}}(n):(n instanceof IDBTransaction&&function(n){if(bT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});bT.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,$$||($$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,TT):n)}function po(n){if(n instanceof IDBRequest)return function(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(po(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&z$.set(t,n)}).catch(()=>{}),IT.set(e,n),e}(n);if(CT.has(n))return CT.get(n);const e=wde(n);return e!==n&&(CT.set(n,e),IT.set(e,n)),e}const DT=n=>IT.get(n),bde=["get","getKey","getAll","getAllKeys","count"],Cde=["put","add","delete","clear"],ST=new Map;function W$(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(ST.get(e))return ST.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Cde.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!bde.includes(t))return;const s=function(){var o=_(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return ST.set(e,s),s}TT=(n=>xt(M({},n),{get:(e,t,r)=>W$(e,t)||n.get(e,t,r),has:(e,t)=>!!W$(e,t)||n.has(e,t)}))(TT);const q$="@firebase/installations",Q$="w:0.6.4",Y$="FIS_v2",Ts=new Bi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function X$(n){return n instanceof Qr&&n.code.includes("request-failed")}function xT({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function Z$(n){return{token:n.token,requestStatus:2,expiresIn:xde(n.expiresIn),creationTime:Date.now()}}function MT(n,e){return kT.apply(this,arguments)}function kT(){return kT=_(function*(n,e){const r=(yield e.json()).error;return Ts.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),kT.apply(this,arguments)}function J$({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function eH(n,{refreshToken:e}){const t=J$(n);return t.append("Authorization",function(n){return`${Y$} ${n}`}(e)),t}function RT(n){return PT.apply(this,arguments)}function PT(){return PT=_(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),PT.apply(this,arguments)}function xde(n){return Number(n.replace("s","000"))}function kde(n,e){return NT.apply(this,arguments)}function NT(){return NT=_(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=xT(n),i=J$(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Y$,appId:n.appId,sdkVersion:Q$})},l=yield RT(()=>fetch(r,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:Z$(c.authToken)}}throw yield MT("Create Installation",l)}),NT.apply(this,arguments)}function tH(n){return new Promise(e=>{setTimeout(e,n)})}const Pde=/^[cdef][\w-]{21}$/;function Nde(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function(n){return function(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Pde.test(t)?t:""}catch(n){return""}}function Oc(n){return`${n.appName}!${n.appId}`}const Fc=new Map;function nH(n,e){const t=Oc(n);rH(t,e),function(n,e){const t=(!Aa&&"BroadcastChannel"in self&&(Aa=new BroadcastChannel("[Firebase] FID Change"),Aa.onmessage=n=>{rH(n.data.key,n.data.fid)}),Aa);t&&t.postMessage({key:n,fid:e}),0===Fc.size&&Aa&&(Aa.close(),Aa=null)}(t,e)}function rH(n,e){const t=Fc.get(n);if(t)for(const r of t)r(e)}let Aa=null;const xa="firebase-installations-store";let FT=null;function LT(){return FT||(FT=function(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=po(o);return r&&o.addEventListener("upgradeneeded",l=>{r(po(o.result),l.oldVersion,l.newVersion,po(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(xa)}})),FT}function D_(n,e){return VT.apply(this,arguments)}function VT(){return VT=_(function*(n,e){const t=Oc(n),i=(yield LT()).transaction(xa,"readwrite"),s=i.objectStore(xa),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&nH(n,e.fid),e}),VT.apply(this,arguments)}function BT(n){return UT.apply(this,arguments)}function UT(){return UT=_(function*(n){const e=Oc(n),r=(yield LT()).transaction(xa,"readwrite");yield r.objectStore(xa).delete(e),yield r.done}),UT.apply(this,arguments)}function bh(n,e){return jT.apply(this,arguments)}function jT(){return jT=_(function*(n,e){const t=Oc(n),i=(yield LT()).transaction(xa,"readwrite"),s=i.objectStore(xa),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&nH(n,a.fid),a}),jT.apply(this,arguments)}function $T(n){return HT.apply(this,arguments)}function HT(){return HT=_(function*(n){let e;const t=yield bh(n.appConfig,r=>{const i=jde(r),s=$de(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),HT.apply(this,arguments)}function jde(n){return aH(n||{fid:Nde(),registrationStatus:0})}function $de(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ts.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(n,e){return zT.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:zde(n)}:{installationEntry:e}}function zT(){return zT=_(function*(n,e){try{const t=yield kde(n,e);return D_(n.appConfig,t)}catch(t){throw X$(t)&&409===t.customData.serverCode?yield BT(n.appConfig):yield D_(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),zT.apply(this,arguments)}function zde(n){return GT.apply(this,arguments)}function GT(){return GT=_(function*(n){let e=yield oH(n.appConfig);for(;1===e.registrationStatus;)yield tH(100),e=yield oH(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield $T(n);return r||t}return e}),GT.apply(this,arguments)}function oH(n){return bh(n,e=>{if(!e)throw Ts.create("installation-not-found");return aH(e)})}function aH(n){return function(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Wde(n,e){return WT.apply(this,arguments)}function WT(){return WT=_(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=qde(n,t),i=eH(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Q$,appId:n.appId}})},l=yield RT(()=>fetch(r,a));if(l.ok)return Z$(yield l.json());throw yield MT("Generate Auth Token",l)}),WT.apply(this,arguments)}function qde(n,{fid:e}){return`${xT(n)}/${e}/authTokens:generate`}function qT(n){return KT.apply(this,arguments)}function KT(){return KT=_(function*(n,e=!1){let t;const r=yield bh(n.appConfig,s=>{if(!cH(s))throw Ts.create("not-registered");const o=s.authToken;if(!e&&Yde(o))return s;if(1===o.requestStatus)return t=Kde(n,e),s;{if(!navigator.onLine)throw Ts.create("app-offline");const a=Zde(s);return t=Qde(n,a),a}});return t?yield t:r.authToken}),KT.apply(this,arguments)}function Kde(n,e){return QT.apply(this,arguments)}function QT(){return QT=_(function*(n,e){let t=yield lH(n.appConfig);for(;1===t.authToken.requestStatus;)yield tH(100),t=yield lH(n.appConfig);const r=t.authToken;return 0===r.requestStatus?qT(n,e):r}),QT.apply(this,arguments)}function lH(n){return bh(n,e=>{if(!cH(e))throw Ts.create("not-registered");return function(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Qde(n,e){return YT.apply(this,arguments)}function YT(){return YT=_(function*(n,e){try{const t=yield Wde(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield D_(n.appConfig,r),t}catch(t){if(!X$(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield D_(n.appConfig,r)}else yield BT(n.appConfig);throw t}}),YT.apply(this,arguments)}function cH(n){return void 0!==n&&2===n.registrationStatus}function Yde(n){return 2===n.requestStatus&&!function(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function Zde(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function XT(){return XT=_(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield $T(e);return r?r.catch(console.error):qT(e).catch(console.error),t.fid}),XT.apply(this,arguments)}function ZT(){return ZT=_(function*(n,e=!1){const t=n;return yield nhe(t),(yield qT(t,e)).token}),ZT.apply(this,arguments)}function nhe(n){return JT.apply(this,arguments)}function JT(){return JT=_(function*(n){const{registrationPromise:e}=yield $T(n);e&&(yield e)}),JT.apply(this,arguments)}function n0(n){return Ts.create("missing-app-config-values",{valueName:n})}const uH="installations";Fn(new En(uH,n=>{const e=n.getProvider("app").getImmediate(),t=function(n){if(!n||!n.options)throw n0("App Configuration");if(!n.name)throw n0("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw n0(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Cs(e,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),Fn(new En("installations-internal",n=>{const t=Cs(n.getProvider("app").getImmediate(),uH).getImmediate();return{getId:()=>function(n){return XT.apply(this,arguments)}(t),getToken:i=>function(n){return ZT.apply(this,arguments)}(t,i)}},"PRIVATE")),He(q$,"0.6.4"),He(q$,"0.6.4","esm2017");const r0="@firebase/remote-config",dr=new Bi("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class whe{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return _(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Ehe(n=navigator){return n.languages&&n.languages[0]||n.language}class bhe{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return _(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:Ehe()},c={method:"POST",headers:a,body:JSON.stringify(l)},u=fetch(o,c),d=new Promise((v,y)=>{e.signal.addEventListener(()=>{const I=new Error("The operation was aborted.");I.name="AbortError",y(I)})});let h;try{yield Promise.race([u,d]),h=yield u}catch(v){let y="fetch-client-network";throw"AbortError"===(null==v?void 0:v.name)&&(y="fetch-timeout"),dr.create(y,{originalErrorMessage:null==v?void 0:v.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,m;if(200===h.status){let v;try{v=yield h.json()}catch(y){throw dr.create("fetch-client-parse",{originalErrorMessage:null==y?void 0:y.message})}g=v.entries,m=v.state}if("INSTANCE_STATE_UNSPECIFIED"===m?f=500:"NO_CHANGE"===m?f=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==f&&200!==f)throw dr.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class The{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return _(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return _(function*(){yield function(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(dr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function(n){if(!(n instanceof Qr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+cT(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class Ahe{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function A_(n,e){const t=n.target.error||void 0;return dr.create(e,{originalErrorMessage:t&&(null==t?void 0:t.message)})}const Ma="app_namespace_store";class Rhe{constructor(e,t,r,i=function(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(A_(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ma,{keyPath:"compositeKey"})}}catch(t){e(dr.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return _(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Ma],"readonly").objectStore(Ma),l=t.createCompositeKey(e);try{const c=a.get(l);c.onerror=u=>{s(A_(u,"storage-get"))},c.onsuccess=u=>{const d=u.target.result;i(d?d.value:void 0)}}catch(c){s(dr.create("storage-get",{originalErrorMessage:null==c?void 0:c.message}))}})})()}set(e,t){var r=this;return _(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const l=i.transaction([Ma],"readwrite").objectStore(Ma),c=r.createCompositeKey(e);try{const u=l.put({compositeKey:c,value:t});u.onerror=d=>{o(A_(d,"storage-set"))},u.onsuccess=()=>{s()}}catch(u){o(dr.create("storage-set",{originalErrorMessage:null==u?void 0:u.message}))}})})()}delete(e){var t=this;return _(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Ma],"readwrite").objectStore(Ma),l=t.createCompositeKey(e);try{const c=a.delete(l);c.onerror=u=>{s(A_(u,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(dr.create("storage-delete",{originalErrorMessage:null==c?void 0:c.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Phe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return _(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Ohe(){return c0.apply(this,arguments)}function c0(){return(c0=_(function*(){if(!Ca())return!1;try{return yield _h()}catch(n){return!1}})).apply(this,arguments)}let pH,gH;Fn(new En("remote-config",function(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw dr.create("registration-window");if(!Ca())throw dr.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw dr.create("registration-project-id");if(!o)throw dr.create("registration-api-key");if(!a)throw dr.create("registration-app-id");const l=new Rhe(a,r.name,t=t||"firebase"),c=new Phe(l),u=new Ta(r0);u.logLevel=Ce.ERROR;const d=new bhe(i,fo,t,s,o,a),h=new The(d,l),f=new whe(h,l,c,u),p=new Ahe(r,f,c,l,u);return function(n){const e=Ct(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),He(r0,"0.4.4"),He(r0,"0.4.4","esm2017");const mH=new WeakMap,u0=new WeakMap,_H=new WeakMap,d0=new WeakMap,h0=new WeakMap;let f0={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return u0.get(n);if("objectStoreNames"===e)return n.objectStoreNames||_H.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ds(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Hhe(n){return"function"==typeof n?function(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(gH||(gH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(p0(this),e),Ds(mH.get(this))}:function(...e){return Ds(n.apply(p0(this),e))}:function(e,...t){const r=n.call(p0(this),e,...t);return _H.set(r,e.sort?e.sort():[e]),Ds(r)}}(n):(n instanceof IDBTransaction&&function(n){if(u0.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});u0.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,pH||(pH=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,f0):n)}function Ds(n){if(n instanceof IDBRequest)return function(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ds(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&mH.set(t,n)}).catch(()=>{}),h0.set(e,n),e}(n);if(d0.has(n))return d0.get(n);const e=Hhe(n);return e!==n&&(d0.set(n,e),h0.set(e,n)),e}const p0=n=>h0.get(n);function yH(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Ds(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ds(o.result),l.oldVersion,l.newVersion,Ds(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function g0(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Ds(t).then(()=>{})}const zhe=["get","getKey","getAll","getAllKeys","count"],Ghe=["put","add","delete","clear"],m0=new Map;function vH(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(m0.get(e))return m0.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Ghe.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!zhe.includes(t))return;const s=function(){var o=_(function*(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),i&&c.done]))[0]});return function(l){return o.apply(this,arguments)}}();return m0.set(e,s),s}f0=(n=>xt(M({},n),{get:(e,t,r)=>vH(e,t)||n.get(e,t,r),has:(e,t)=>!!vH(e,t)||n.has(e,t)}))(f0);const Whe="/firebase-messaging-sw.js",qhe="/firebase-cloud-messaging-push-scope",wH="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",EH="google.c.a.c_id",Qhe="google.c.a.c_l",Yhe="google.c.a.ts",Xhe="google.c.a.e";var Lc=(()=>(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"}(Lc||(Lc={})),Lc))();function Ss(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zhe(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const _0="fcm_token_details_db",bH="fcm_token_object_Store";function efe(n){return y0.apply(this,arguments)}function y0(){return y0=_(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(_0))return null;let e=null;return(yield yH(_0,5,{upgrade:(r=_(function*(i,s,o,a){var l;if(s<2||!i.objectStoreNames.contains(bH))return;const c=a.objectStore(bH),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),u)if(2===s){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(l=d.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Ss(d.vapidKey)}}}else if(3===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ss(d.auth),p256dh:Ss(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ss(d.vapidKey)}}}else if(4===s){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ss(d.auth),p256dh:Ss(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ss(d.vapidKey)}}}}),function(s,o,a,l){return r.apply(this,arguments)})})).close(),yield g0(_0),yield g0("fcm_vapid_details_db"),yield g0("undefined"),tfe(e)?e:null;var r}),y0.apply(this,arguments)}function tfe(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const ka="firebase-messaging-store";let v0=null;function w0(){return v0||(v0=yH("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ka)}})),v0}function CH(n){return E0.apply(this,arguments)}function E0(){return E0=_(function*(n){const e=T0(n),r=yield(yield w0()).transaction(ka).objectStore(ka).get(e);if(r)return r;{const i=yield efe(n.appConfig.senderId);if(i)return yield b0(n,i),i}}),E0.apply(this,arguments)}function b0(n,e){return C0.apply(this,arguments)}function C0(){return C0=_(function*(n,e){const t=T0(n),i=(yield w0()).transaction(ka,"readwrite");return yield i.objectStore(ka).put(e,t),yield i.done,e}),C0.apply(this,arguments)}function ife(n){return I0.apply(this,arguments)}function I0(){return I0=_(function*(n){const e=T0(n),r=(yield w0()).transaction(ka,"readwrite");yield r.objectStore(ka).delete(e),yield r.done}),I0.apply(this,arguments)}function T0({appConfig:n}){return n.appId}const bn=new Bi("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ofe(n,e){return D0.apply(this,arguments)}function D0(){return D0=_(function*(n,e){const t=yield M0(n),r=TH(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(x0(n.appConfig),i)).json()}catch(o){throw bn.create("token-subscribe-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw bn.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw bn.create("token-subscribe-no-token");return s.token}),D0.apply(this,arguments)}function afe(n,e){return S0.apply(this,arguments)}function S0(){return S0=_(function*(n,e){const t=yield M0(n),r=TH(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${x0(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw bn.create("token-update-failed",{errorInfo:null==o?void 0:o.toString()})}if(s.error)throw bn.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw bn.create("token-update-no-token");return s.token}),S0.apply(this,arguments)}function IH(n,e){return A0.apply(this,arguments)}function A0(){return A0=_(function*(n,e){const r={method:"DELETE",headers:yield M0(n)};try{const s=yield(yield fetch(`${x0(n.appConfig)}/${e}`,r)).json();if(s.error)throw bn.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw bn.create("token-unsubscribe-failed",{errorInfo:null==i?void 0:i.toString()})}}),A0.apply(this,arguments)}function x0({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function M0(n){return k0.apply(this,arguments)}function k0(){return k0=_(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),k0.apply(this,arguments)}function TH({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==wH&&(i.web.applicationPubKey=r),i}function cfe(n){return R0.apply(this,arguments)}function R0(){return R0=_(function*(n){const e=yield dfe(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ss(e.getKey("auth")),p256dh:Ss(e.getKey("p256dh"))},r=yield CH(n.firebaseDependencies);if(r){if(hfe(r.subscriptionOptions,t))return Date.now()>=r.createTime+6048e5?ufe(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield IH(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return SH(n.firebaseDependencies,t)}return SH(n.firebaseDependencies,t)}),R0.apply(this,arguments)}function DH(n){return P0.apply(this,arguments)}function P0(){return P0=_(function*(n){const e=yield CH(n.firebaseDependencies);e&&(yield IH(n.firebaseDependencies,e.token),yield ife(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),P0.apply(this,arguments)}function ufe(n,e){return N0.apply(this,arguments)}function N0(){return N0=_(function*(n,e){try{const t=yield afe(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield b0(n.firebaseDependencies,r),t}catch(t){throw yield DH(n),t}}),N0.apply(this,arguments)}function SH(n,e){return O0.apply(this,arguments)}function O0(){return O0=_(function*(n,e){const r={token:yield ofe(n,e),createTime:Date.now(),subscriptionOptions:e};return yield b0(n,r),r.token}),O0.apply(this,arguments)}function dfe(n,e){return F0.apply(this,arguments)}function F0(){return F0=_(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zhe(e)})}),F0.apply(this,arguments)}function hfe(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function AH(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function(n,e){!e.data||(n.data=e.data)}(e,n),function(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const l=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;l&&(n.fcmOptions.analyticsLabel=l)}(e,n),e}function mfe(n){return"object"==typeof n&&!!n&&EH in n}function xH(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function L0(n){return bn.create("missing-app-config-values",{valueName:n})}xH("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xH("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yfe{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(n){if(!n||!n.options)throw L0("App Configuration Object");if(!n.name)throw L0("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw L0(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function MH(n){return V0.apply(this,arguments)}function V0(){return V0=_(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(Whe,{scope:qhe}),n.swRegistration.update().catch(()=>{})}catch(e){throw bn.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}}),V0.apply(this,arguments)}function vfe(n,e){return B0.apply(this,arguments)}function B0(){return B0=_(function*(n,e){if(!e&&!n.swRegistration&&(yield MH(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw bn.create("invalid-sw-registration");n.swRegistration=e}}),B0.apply(this,arguments)}function wfe(n,e){return U0.apply(this,arguments)}function U0(){return U0=_(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=wH)}),U0.apply(this,arguments)}function j0(){return j0=_(function*(n,e){if(!navigator)throw bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bn.create("permission-blocked");return yield wfe(n,null==e?void 0:e.vapidKey),yield vfe(n,null==e?void 0:e.serviceWorkerRegistration),cfe(n)}),j0.apply(this,arguments)}function Efe(n,e,t){return $0.apply(this,arguments)}function $0(){return $0=_(function*(n,e,t){const r=bfe(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[EH],message_name:t[Qhe],message_time:t[Yhe],message_device_time:Math.floor(Date.now()/1e3)})}),$0.apply(this,arguments)}function bfe(n){switch(n){case Lc.NOTIFICATION_CLICKED:return"notification_open";case Lc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function H0(){return H0=_(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Lc.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(AH(t)):n.onMessageHandler.next(AH(t)));const r=t.data;mfe(r)&&"1"===r[Xhe]&&(yield Efe(n,t.messageType,r))}),H0.apply(this,arguments)}const RH="@firebase/messaging";function NH(){return z0.apply(this,arguments)}function z0(){return(z0=_(function*(){try{yield _h()}catch(n){return!1}return"undefined"!=typeof window&&Ca()&&oT()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}Fn(new En("messaging",n=>{const e=new yfe(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function(n,e){return H0.apply(this,arguments)}(e,t)),e},"PUBLIC")),Fn(new En("messaging-internal",n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function(n,e){return j0.apply(this,arguments)}(e,r)}},"PRIVATE")),He(RH,"0.12.4"),He(RH,"0.12.4","esm2017");const x_="analytics",xfe="firebase_id",Rfe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",q0="https://www.googletagmanager.com/gtag/js",ln=new Ta("@firebase/analytics"),er=new Bi("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Nfe(n){if(!n.startsWith(q0)){const e=er.create("invalid-gtag-resource",{gtagURL:n});return ln.warn(e.message),""}return n}function OH(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Ffe(n,e){const t=function(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy("firebase-js-sdk-policy",e)),t}(0,{createScriptURL:Nfe}),r=document.createElement("script"),i=`${q0}?l=${n}&id=${e}`;r.src=t?null==t?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Vfe(n,e,t,r,i,s){return K0.apply(this,arguments)}function K0(){return K0=_(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const l=(yield OH(t)).find(c=>c.measurementId===i);l&&(yield e[l.appId])}}catch(a){ln.error(a)}n("config",i,s)}),K0.apply(this,arguments)}function Bfe(n,e,t,r,i){return Q0.apply(this,arguments)}function Q0(){return Q0=_(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield OH(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){s=[];break}s.push(u)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){ln.error(s)}}),Q0.apply(this,arguments)}function $fe(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(q0)&&t.src.includes(n))return t;return null}const FH=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Wfe(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function qfe(n){return Y0.apply(this,arguments)}function Y0(){return Y0=_(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Wfe(r)},s=Rfe.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const l=yield o.json();(null===(e=l.error)||void 0===e?void 0:e.message)&&(a=l.error.message)}catch(l){}throw er.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}),Y0.apply(this,arguments)}function Kfe(n){return X0.apply(this,arguments)}function X0(){return X0=_(function*(n,e=FH,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw er.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw er.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Xfe;return setTimeout(_(function*(){a.abort()}),void 0!==t?t:6e4),LH({appId:r,apiKey:i,measurementId:s},o,a,e)}),X0.apply(this,arguments)}function LH(n,e,t){return Z0.apply(this,arguments)}function Z0(){return Z0=_(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=FH){var s;const{appId:o,measurementId:a}=n;try{yield Qfe(r,e)}catch(l){if(a)return ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=yield qfe(n);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!Yfe(c)){if(i.deleteThrottleMetadata(o),a)return ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?cT(t,i.intervalMillis,30):cT(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return i.setThrottleMetadata(o,d),ln.debug(`Calling attemptFetch again in ${u} millis`),LH(n,d,r,i)}}),Z0.apply(this,arguments)}function Qfe(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(er.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Yfe(n){if(!(n instanceof Qr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class Xfe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let J0,oD;function eD(){return eD=_(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}}),eD.apply(this,arguments)}function nD(){return nD=_(function*(n,e,t,r){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();n("config",yield e,{update:!0,user_id:t})}),nD.apply(this,arguments)}function VH(n){oD=n}function BH(n){J0=n}function ipe(){return aD.apply(this,arguments)}function aD(){return aD=_(function*(){if(!Ca())return ln.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield _h()}catch(n){return ln.warn(er.create("indexeddb-unavailable",{errorInfo:null==n?void 0:n.toString()}).message),!1}return!0}),aD.apply(this,arguments)}function lD(){return lD=_(function*(n,e,t,r,i,s,o){var a;const l=Kfe(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&ln.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>ln.error(f)),e.push(l);const c=ipe().then(f=>{if(f)return r.getId()}),[u,d]=yield Promise.all([l,c]);$fe(s)||Ffe(s,u.measurementId),oD&&(i("consent","default",oD),VH(void 0)),i("js",new Date);const h=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[xfe]=d),i("config",u.measurementId,h),J0&&(i("set",J0),BH(void 0)),u.measurementId}),lD.apply(this,arguments)}class ope{constructor(e){this.app=e}_delete(){return delete Ui[this.app.options.appId],Promise.resolve()}}let Ui={},UH=[];const jH={};let HH,ji,M_="dataLayer",cD=!1;function lpe(n,e,t){!function(){const n=[];if(sT()&&n.push("This is a browser extension environment."),oT()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=er.create("invalid-analytics-context",{errorInfo:e});ln.warn(t.message)}}();const r=n.options.appId;if(!r)throw er.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw er.create("no-api-key");ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ui[r])throw er.create("already-exists",{id:r});if(!cD){!function(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(M_);const{wrappedGtag:s,gtagCore:o}=function(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function(n,e,t,r){function s(){return(s=_(function*(o,...a){try{if("event"===o){const[l,c]=a;yield Bfe(n,e,t,l,c)}else if("config"===o){const[l,c]=a;yield Vfe(n,e,t,r,l,c)}else if("consent"===o){const[l]=a;n("consent","update",l)}else if("get"===o){const[l,c,u]=a;n("get",l,c,u)}else if("set"===o){const[l]=a;n("set",l)}else n(o,...a)}catch(l){ln.error(l)}})).apply(this,arguments)}return function(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(Ui,UH,jH,M_,"gtag");ji=s,HH=o,cD=!0}return Ui[r]=function(n,e,t,r,i,s,o){return lD.apply(this,arguments)}(n,UH,jH,e,HH,M_,t),new ope(n)}function cpe(n=wh()){const e=Cs(n=Ct(n),x_);return e.isInitialized()?e.getImmediate():function(n,e={}){const t=Cs(n,x_);if(t.isInitialized()){const i=t.getImmediate();if(vh(e,t.getOptions()))return i;throw er.create("already-initialized")}return t.initialize({options:e})}(n)}function dpe(){return uD.apply(this,arguments)}function uD(){return(uD=_(function*(){if(sT()||!oT()||!Ca())return!1;try{return yield _h()}catch(n){return!1}})).apply(this,arguments)}function hpe(n,e,t){n=Ct(n),function(n,e,t,r){return nD.apply(this,arguments)}(ji,Ui[n.app.options.appId],e,t).catch(r=>ln.error(r))}function zH(n,e,t,r){n=Ct(n),function(n,e,t,r,i){return eD.apply(this,arguments)}(ji,Ui[n.app.options.appId],e,t,r).catch(i=>ln.error(i))}const GH="@firebase/analytics";Fn(new En(x_,(e,{options:t})=>lpe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Fn(new En("analytics-internal",function(e){try{const t=e.getProvider(x_).getImmediate();return{logEvent:(r,i,s)=>zH(t,r,i,s)}}catch(t){throw er.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),He(GH,"0.10.0"),He(GH,"0.10.0","esm2017");const mpe=new class extends wm{}(class extends vm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),go=new to("7.6.1"),hD="__angularfire_symbol__analyticsIsSupportedValue",fD="__angularfire_symbol__analyticsIsSupported",pD="__angularfire_symbol__remoteConfigIsSupportedValue",gD="__angularfire_symbol__remoteConfigIsSupported",mD="__angularfire_symbol__messagingIsSupportedValue",_D="__angularfire_symbol__messagingIsSupported";globalThis[fD]||(globalThis[fD]=dpe().then(n=>globalThis[hD]=n).catch(()=>globalThis[hD]=!1)),globalThis[_D]||(globalThis[_D]=NH().then(n=>globalThis[mD]=n).catch(()=>globalThis[mD]=!1)),globalThis[gD]||(globalThis[gD]=Ohe().then(n=>globalThis[pD]=n).catch(()=>globalThis[pD]=!1));const k_={async:()=>globalThis[fD],sync:()=>{const n=globalThis[hD];if(void 0===n)throw new Error((n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`)("Analytics"));return n}};function Ch(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Ih=(n,e)=>{const t=e?[e]:F$(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Vc(){}class qH{constructor(e,t=mpe){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class _pe{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vc,{},Vc,Vc)),t.pipe(Jn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Th=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new qH(Zone.current)),this.insideAngular=t.run(()=>new qH(Zone.current,Cm)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(E(te))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ra(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function ype(n){return Ra().ngZone.runOutsideAngular(()=>n())}function Pa(n){return Ra().ngZone.run(()=>n())}function vpe(n){return Ra(),function(n){return function(t){return(t=t.lift(new _pe(n.ngZone))).pipe(Mp(n.outsideAngular),xp(n.insideAngular))}}(Ra())(n)}const Epe=(n,e)=>{const t=void 0;return function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Pa(()=>n.apply(t,r))}},Cn=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=Pa(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vc,{},Vc,Vc)))),r[s]=Epe(r[s],t));const i=ype(()=>n.apply(this,r));if(!e){if(i instanceof Ae){const s=Ra();return i.pipe(Mp(s.outsideAngular),xp(s.insideAngular))}return Pa(()=>i)}return i instanceof Ae?i.pipe(vpe):i instanceof Promise?Pa(()=>new Promise((s,o)=>i.then(a=>Pa(()=>s(a)),a=>Pa(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Pa(()=>i)};class mo{constructor(e){return e}}class Dh{constructor(){return F$()}}const vD=new j("angularfire2._apps"),Cpe={provide:mo,useFactory:function(n){return n&&1===n.length?n[0]:new mo(wh())},deps:[[new qe,vD]]},Ipe={provide:Dh,deps:[[new qe,vD]]};function Tpe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mo(r)}}let Dpe=(()=>{class n{constructor(t){He("angularfire",go.full,"core"),He("angularfire",go.full,"app"),He("angular",pL.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(E(no))},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[Cpe,Ipe]}),n})();function Spe(n,...e){return{ngModule:Dpe,providers:[{provide:vD,useFactory:Tpe(n),multi:!0,deps:[te,Pe,Th,...e]}]}}const Ape=Cn(O$,!0),wD=new Map,KH={activated:!1,tokenObservers:[]},xpe={initialized:!1,enabled:!1};function It(n){return wD.get(n)||Object.assign({},KH)}function R_(){return xpe}class Ope{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return _(function*(){t.stop();try{t.pending=new Rc,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Rc,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const In=new Bi("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function bD(n){if(!It(n).activated)throw In.create("use-before-activation",{appName:n.name})}function O_(n,e){return ID.apply(this,arguments)}function ID(){return ID=_(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(d){throw In.create("fetch-network-error",{originalErrorMessage:null==d?void 0:d.message})}if(200!==o.status)throw In.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw In.create("fetch-parse-error",{originalErrorMessage:null==d?void 0:d.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw In.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(l[1]),u=Date.now();return{token:a.token,expireTimeMillis:u+c,issuedAtTimeMillis:u}}),ID.apply(this,arguments)}function YH(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Sh="firebase-app-check-store";let F_=null;function ZH(){return F_||(F_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(In.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Sh,{keyPath:"compositeKey"})}}catch(t){e(In.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),F_)}function TD(){return TD=_(function*(n,e){const r=(yield ZH()).transaction(Sh,"readwrite"),s=r.objectStore(Sh).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(In.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})}),TD.apply(this,arguments)}const Ah=new Ta("@firebase/app-check");function AD(n,e){return Ca()?function(n,e){return function(n,e){return TD.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ah.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MD(){return R_().enabled}function kD(){return RD.apply(this,arguments)}function RD(){return RD=_(function*(){const n=R_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),RD.apply(this,arguments)}const Qpe={error:"UNKNOWN_ERROR"};function Ype(n){return m_.encodeString(JSON.stringify(n),!1)}function L_(n){return PD.apply(this,arguments)}function PD(){return PD=_(function*(n,e=!1){const t=n.app;bD(t);const r=It(t);let s,i=r.token;if(i&&!Bc(i)&&(r.token=void 0,i=void 0),!i){const l=yield r.cachedTokenPromise;l&&(Bc(l)?i=l:yield AD(t,void 0))}if(!e&&i&&Bc(i))return{token:i.token};let a,o=!1;if(MD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=O_(YH(t,yield kD()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=yield r.exchangeTokenPromise;return yield AD(t,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield It(t).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?Ah.warn(l.message):Ah.error(l),s=l}return i?s?a=Bc(i)?{token:i.token,internalError:s}:sz(s):(a={token:i.token},r.token=i,yield AD(t,i)):a=sz(s),o&&iz(t,a),a}),PD.apply(this,arguments)}function ND(){return ND=_(function*(n){const e=n.app;bD(e);const{provider:t}=It(e);if(MD()){const r=yield kD(),{token:i}=yield O_(YH(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),ND.apply(this,arguments)}function FD(n,e){const t=It(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function rz(n){const{app:e}=n,t=It(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new Ope(_(function*(){let r;if(r=It(e).token?yield L_(n,!0):yield L_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=It(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function iz(n,e){const t=It(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Bc(n){return n.expireTimeMillis-Date.now()>0}function sz(n){return{token:Ype(Qpe),error:n}}class Zpe{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=It(this.app);for(const t of e)FD(this.app,t.next);return Promise.resolve()}}const fz="app-check-internal";Fn(new En("app-check",n=>function(n,e){return new Zpe(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fz).initialize()})),Fn(new En(fz,n=>function(n){return{getToken:e=>L_(n,e),getLimitedUseToken:()=>function(n){return ND.apply(this,arguments)}(n),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,s=It(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Bc(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),rz(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>rz(n))}(n,"INTERNAL",e),removeTokenListener:e=>FD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),He("@firebase/app-check","0.8.0");class B_{constructor(){return Ih("app-check")}}function U_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}"undefined"!=typeof window&&window,"function"==typeof SuppressedError&&SuppressedError;const Bge=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yz=new Bi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),j_=new Ta("@firebase/auth");function $_(n,...e){j_.logLevel<=Ce.ERROR&&j_.error(`Auth (${fo}): ${n}`,...e)}function hr(n,...e){throw GD(n,...e)}function Ar(n,...e){return GD(n,...e)}function vz(n,e,t){const r=Object.assign(Object.assign({},Bge()),{[e]:t});return new Bi("auth","Firebase",r).create(e,{appName:n.name})}function Uc(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&hr(n,"argument-error"),vz(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function GD(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yz.create(n,...e)}function k(n,e,...t){if(!n)throw GD(e,...t)}function $i(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $_(e),new Error(e)}function As(n,e){n||$i(e)}function Mh(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function wz(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class kh{constructor(e,t){this.shortDelay=e,this.longDelay=t,As(t>e,"Short delay should be less than long delay!"),this.isMobile=iT()||D$()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===wz()||"https:"===wz()||sT()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function qD(n,e){As(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Ez{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void $i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void $i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void $i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zge=new kh(3e4,6e4);function gt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Tt(n,e,t,r){return KD.apply(this,arguments)}function KD(){return KD=_(function*(n,e,t,r,i={}){return bz(n,i,_(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=Nc(Object.assign({key:n.config.apiKey},o)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),Ez.fetch()(Cz(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))}),KD.apply(this,arguments)}function bz(n,e,t){return QD.apply(this,arguments)}function QD(){return QD=_(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hge),e);try{const i=new Gge(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Rh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw Rh(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===l)throw Rh(n,"email-already-in-use",o);if("USER_DISABLED"===l)throw Rh(n,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw vz(n,u,c);hr(n,u)}}catch(i){if(i instanceof Qr)throw i;hr(n,"network-request-failed",{message:String(i)})}}),QD.apply(this,arguments)}function xs(n,e,t,r){return YD.apply(this,arguments)}function YD(){return YD=_(function*(n,e,t,r,i={}){const s=yield Tt(n,e,t,r,i);return"mfaPendingCredential"in s&&hr(n,"multi-factor-auth-required",{_serverResponse:s}),s}),YD.apply(this,arguments)}function Cz(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?qD(n.config,i):`${n.config.apiScheme}://${i}`}class Gge{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ar(this.auth,"network-request-failed")),zge.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ar(n,e,r);return i.customData._tokenResponse=t,i}function XD(){return XD=_(function*(n,e){return Tt(n,"POST","/v1/accounts:delete",e)}),XD.apply(this,arguments)}function Kge(n,e){return JD.apply(this,arguments)}function JD(){return JD=_(function*(n,e){return Tt(n,"POST","/v1/accounts:lookup",e)}),JD.apply(this,arguments)}function Ph(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function eS(){return eS=_(function*(n,e=!1){const t=Ct(n),r=yield t.getIdToken(e),i=H_(r);k(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ph(tS(i.auth_time)),issuedAtTime:Ph(tS(i.iat)),expirationTime:Ph(tS(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}),eS.apply(this,arguments)}function tS(n){return 1e3*Number(n)}function H_(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return $_("JWT malformed, contained fewer than 3 sections"),null;try{const i=y_(t);return i?JSON.parse(i):($_("Failed to decode base64 JWT payload"),null)}catch(i){return $_("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function Ms(n,e){return nS.apply(this,arguments)}function nS(){return nS=_(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Qr&&Xge(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),nS.apply(this,arguments)}function Xge({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class Zge{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield t.iteration()}),r)}iteration(){var e=this;return _(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class Iz{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ph(this.lastLoginAt),this.creationTime=Ph(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nh(n){return rS.apply(this,arguments)}function rS(){return rS=_(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Ms(n,Kge(t,{idToken:r}));k(null==i?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?tme(s.providerUserInfo):[],a=eme(n.providerData,o),u=!!n.isAnonymous&&!(n.email&&s.passwordHash||(null==a?void 0:a.length)),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Iz(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}),rS.apply(this,arguments)}function iS(){return iS=_(function*(n){const e=Ct(n);yield Nh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),iS.apply(this,arguments)}function eme(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tme(n){return n.map(e=>{var{providerId:t}=e,r=U_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function sS(){return sS=_(function*(n,e){const t=yield bz(n,{},_(function*(){const r=Nc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Cz(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ez.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),sS.apply(this,arguments)}class Oh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(void 0!==e.idToken,"internal-error"),k(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(n){const e=H_(n);return k(e,"internal-error"),k(void 0!==e.exp,"internal-error"),k(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return _(function*(){return k(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return _(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function(n,e){return sS.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Oh;return r&&(k("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(k("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(k("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oh,this.toJSON())}_performRefresh(){return $i("not implemented")}}function _o(n,e){k("string"==typeof n||void 0===n,"internal-error",{appName:e})}class Na{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=U_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zge(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Iz(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return _(function*(){const r=yield Ms(t,t.stsTokenManager.getToken(t.auth,e));return k(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function(n){return eS.apply(this,arguments)}(this,e)}reload(){return function(n){return iS.apply(this,arguments)}(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Na(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return _(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Nh(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return _(function*(){const t=yield e.getIdToken();return yield Ms(e,function(n,e){return XD.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,c,u;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,g=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,v=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:I,emailVerified:x,isAnonymous:$,providerData:W,stsTokenManager:pe}=t;k(I&&pe,e,"internal-error");const yt=Oh.fromJSON(this.name,pe);k("string"==typeof I,e,"internal-error"),_o(d,e.name),_o(h,e.name),k("boolean"==typeof x,e,"internal-error"),k("boolean"==typeof $,e,"internal-error"),_o(f,e.name),_o(p,e.name),_o(g,e.name),_o(m,e.name),_o(v,e.name),_o(y,e.name);const Wt=new Na({uid:I,auth:e,email:h,emailVerified:x,displayName:d,isAnonymous:$,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:yt,createdAt:v,lastLoginAt:y});return W&&Array.isArray(W)&&(Wt.providerData=W.map(ir=>Object.assign({},ir))),m&&(Wt._redirectEventId=m),Wt}static _fromIdTokenResponse(e,t,r=!1){return _(function*(){const i=new Oh;i.updateFromServerResponse(t);const s=new Na({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Nh(s),s})()}}const Tz=new Map;function ks(n){As(n instanceof Function,"Expected a class definition");let e=Tz.get(n);return e?(As(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Tz.set(n,e),e)}const Dz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(t,r){var i=this;return _(function*(){i.storage[t]=r})()}_get(t){var r=this;return _(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return _(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function z_(n,e,t){return`firebase:${n}:${e}:${t}`}class jc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=z_(this.userKey,i.apiKey,s),this.fullPersistenceKey=z_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Na._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return _(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(function*(){if(!t.length)return new jc(ks(Dz),e,r);const i=(yield Promise.all(t.map(function(){var c=_(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||ks(Dz);const o=z_(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(o);if(u){const d=Na._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch(u){}const l=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&l.length?(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=_(function*(u){if(u!==s)try{yield u._remove(o)}catch(d){}});return function(u){return c.apply(this,arguments)}}())),new jc(s,e,r)):new jc(s,e,r)})()}}function Sz(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Az(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rz(e))return"Blackberry";if(Pz(e))return"Webos";if(oS(e))return"Safari";if((e.includes("chrome/")||xz(e))&&!e.includes("edge/"))return"Chrome";if(kz(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function Az(n=an()){return/firefox\//i.test(n)}function oS(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xz(n=an()){return/crios\//i.test(n)}function Mz(n=an()){return/iemobile/i.test(n)}function kz(n=an()){return/android/i.test(n)}function Rz(n=an()){return/blackberry/i.test(n)}function Pz(n=an()){return/webos/i.test(n)}function G_(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Nz(n=an()){return G_(n)||kz(n)||Pz(n)||Rz(n)||/windows phone/i.test(n)||Mz(n)}function Oz(n,e=[]){let t;switch(n){case"Browser":t=Sz(an());break;case"Worker":t=`${Sz(an())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fo}/${r}`}function Fz(n,e){return lS.apply(this,arguments)}function lS(){return lS=_(function*(n,e){return Tt(n,"GET","/v2/recaptchaConfig",gt(n,e))}),lS.apply(this,arguments)}function Vz(n){return void 0!==n&&void 0!==n.enterprise}class Bz{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function cS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ar("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}function Uz(n){return`__${n}${Math.floor(1e6*Math.random())}`}class jz{constructor(e){this.type="recaptcha-enterprise",this.auth=cn(e)}verify(e="verify",t=!1){var r=this;return _(function*(){function s(){return s=_(function*(a){if(!t){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var l=_(function*(c,u){Fz(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(void 0!==d.recaptchaKey){const h=new Bz(d);return null==a.tenantId?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,c(h.siteKey)}u(new Error("recaptcha Enterprise site key undefined"))}).catch(d=>{u(d)})});return function(c,u){return l.apply(this,arguments)}}())}),s.apply(this,arguments)}function o(a,l,c){const u=window.grecaptcha;Vz(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{l(d)}).catch(()=>{l("NO_RECAPTCHA")})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,l)=>{(function(a){return s.apply(this,arguments)})(r.auth).then(c=>{if(!t&&Vz(window.grecaptcha))o(c,a,l);else{if("undefined"==typeof window)return void l(new Error("RecaptchaVerifier is only supported in browser"));cS("https://www.google.com/recaptcha/enterprise.js?render="+c).then(()=>{o(c,a,l)}).catch(u=>{l(u)})}}).catch(c=>{l(c)})})})()}}class dme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return _(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch(o){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null==i?void 0:i.message})}})()}}class hme{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $z(this),this.idTokenSubscription=new $z(this),this.beforeStateQueue=new dme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=ks(t)),this._initializationPromise=this.queue(_(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield jc.create(r,e),!r._deleted)){if(null===(i=r._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(o){}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return _(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,l=null==s?void 0:s._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&(null==c?void 0:c.user)&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return k(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return _(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(i){yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return _(function*(){try{yield Nh(e)}catch(r){if("auth/network-request-failed"!==(null==r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return _(function*(){const r=e?Ct(e):null;return r&&k(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return _(function*(){if(!r._deleted)return e&&k(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(_(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return _(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(_(function*(){yield t.assertedPersistence.setPersistence(ks(e))}))}initializeRecaptchaConfig(){var e=this;return _(function*(){const t=yield Fz(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Bz(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new jz(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return _(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return _(function*(){if(!t.redirectPersistenceManager){const r=e&&ks(e)||t._popupRedirectResolver;k(r,t,"argument-error"),t.redirectPersistenceManager=yield jc.create(t,[ks(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return _(function*(){var r,i;return t._isInitialized&&(yield t.queue(_(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return _(function*(){if(e===t.currentUser)return t.queue(_(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return k(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return _(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oz(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return _(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return(null==r?void 0:r.error)&&function(n,...e){j_.logLevel<=Ce.WARN&&j_.warn(`Auth (${fo}): ${n}`,...[])}(`Error while retrieving App Check token: ${r.error}`),null==r?void 0:r.token})()}}function cn(n){return Ct(n)}class $z{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(n,e){const t=new Jce(n,void 0);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Hz(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zz(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class Gz{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $i("not implemented")}_getIdTokenResponse(e){return $i("not implemented")}_linkToIdToken(e,t){return $i("not implemented")}_getReauthenticationResolver(e){return $i("not implemented")}}function Rs(n,e){return DS.apply(this,arguments)}function DS(){return DS=_(function*(n,e){return xs(n,"POST","/v1/accounts:signInWithIdp",gt(n,e))}),DS.apply(this,arguments)}class $c extends Gz{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $c(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=U_(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new $c(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return Rs(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Rs(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Rs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nc(t)}return e}}class vo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qz extends vo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let kme=(()=>{class n extends Qz{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return $c._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch(s){return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();class Yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(function*(){const s=yield Na._fromIdTokenResponse(e,r,i),o=Yz(r);return new Yr({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return _(function*(){yield e._updateTokensIfNecessary(r,!0);const i=Yz(r);return new Yr({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function Yz(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Y_ extends Qr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Y_.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Y_(e,t,r,i)}}function Xz(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Y_._fromErrorAndOperation(n,s,e,r):s})}function OS(n,e){return FS.apply(this,arguments)}function FS(){return FS=_(function*(n,e,t=!1){const r=yield Ms(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Yr._forOperation(n,"link",r)}),FS.apply(this,arguments)}function VS(){return VS=_(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield Ms(n,Xz(r,i,e,n),t);k(s.idToken,r,"internal-error");const o=H_(s.idToken);k(o,r,"internal-error");const{sub:a}=o;return k(n.uid===a,r,"user-mismatch"),Yr._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&hr(r,"user-mismatch"),s}}),VS.apply(this,arguments)}function BS(){return BS=_(function*(n,e,t=!1){const r="signIn",i=yield Xz(n,r,e),s=yield Yr._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s}),BS.apply(this,arguments)}function Kme(n){return Ct(n).signOut()}new WeakMap;const Z_="__sak";class nG{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Z_,"1"),this.storage.removeItem(Z_),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const n_e=(()=>{class n extends nG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const n=an();return oS(n)||G_(n)}()&&function(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=Nz(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()||10!==document.documentMode||o===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return _(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return _(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return _(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),rG=(()=>{class n extends nG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let i_e=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return _(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,l=r.handlersMap[o];if(!(null==l?void 0:l.size))return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(l).map(function(){var d=_(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function(n){return Promise.all(n.map(function(){var e=_(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:u})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function J_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class s_e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return _(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=J_("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Ht(){return window}function gA(){return void 0!==Ht().WorkerGlobalScope&&"function"==typeof Ht().importScripts}function mA(){return(mA=_(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const iG="firebaseLocalStorageDb",ey="firebaseLocalStorage",sG="fbase_key";class Vh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ty(n,e){return n.transaction([ey],e?"readwrite":"readonly").objectStore(ey)}function _A(){const n=indexedDB.open(iG,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ey,{keyPath:sG})}catch(i){t(i)}}),n.addEventListener("success",_(function*(){const r=n.result;r.objectStoreNames.contains(ey)?e(r):(r.close(),yield function(){const n=indexedDB.deleteDatabase(iG);return new Vh(n).toPromise()}(),e(yield _A()))}))})}function oG(n,e,t){return yA.apply(this,arguments)}function yA(){return yA=_(function*(n,e,t){const r=ty(n,!0).put({[sG]:e,value:t});return new Vh(r).toPromise()}),yA.apply(this,arguments)}function vA(){return vA=_(function*(n,e){const t=ty(n,!1).get(e),r=yield new Vh(t).toPromise();return void 0===r?null:r.value}),vA.apply(this,arguments)}function aG(n,e){const t=ty(n,!0).delete(e);return new Vh(t).toPromise()}const g_e=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return _(function*(){return t.db||(t.db=yield _A()),t.db})()}_withRetries(t){var r=this;return _(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return _(function*(){return gA()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return _(function*(){t.receiver=i_e._getInstance(gA()?self:null),t.receiver._subscribe("keyChanged",function(){var r=_(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=_(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return _(function*(){var r,i;if(t.activeServiceWorker=yield function(){return mA.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new s_e(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(r=s[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return _(function*(){if(r.sender&&r.activeServiceWorker&&function(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch(i){}})()}_isAvailable(){return _(function*(){try{if(!indexedDB)return!1;const t=yield _A();return yield oG(t,Z_,"1"),yield aG(t,Z_),!0}catch(t){}return!1})()}_withPendingWrite(t){var r=this;return _(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return _(function*(){return i._withPendingWrite(_(function*(){return yield i._withRetries(s=>oG(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return _(function*(){const i=yield r._withRetries(s=>function(n,e){return vA.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return _(function*(){return r._withPendingWrite(_(function*(){return yield r._withRetries(i=>aG(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return _(function*(){const r=yield t._withRetries(o=>{const a=ty(o,!1).getAll();return new Vh(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(_(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Fa(n,e){return e?ks(e):(k(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}Uz("rcb"),new kh(3e4,6e4);class AA extends Gz{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Rs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function k_e(n){return function(n,e){return BS.apply(this,arguments)}(n.auth,new AA(n),n.bypassAuthState)}function R_e(n){const{auth:e,user:t}=n;return k(t,e,"internal-error"),function(n,e){return VS.apply(this,arguments)}(t,new AA(n),n.bypassAuthState)}function P_e(n){return xA.apply(this,arguments)}function xA(){return xA=_(function*(n){const{auth:e,user:t}=n;return k(t,e,"internal-error"),OS(t,new AA(n),n.bypassAuthState)}),xA.apply(this,arguments)}class cG{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=_(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return _(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return k_e;case"linkViaPopup":case"linkViaRedirect":return P_e;case"reauthViaPopup":case"reauthViaRedirect":return R_e;default:hr(this.auth,"internal-error")}}resolve(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const N_e=new kh(2e3,1e4);function O_e(n,e,t){return MA.apply(this,arguments)}function MA(){return MA=_(function*(n,e,t){const r=cn(n);Uc(n,e,vo);const i=Fa(r,t);return new PA(r,"signInViaPopup",e,i).executeNotNull()}),MA.apply(this,arguments)}let PA=(()=>{class n extends cG{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return _(function*(){const r=yield t.execute();return k(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return _(function*(){As(1===t.filter.length,"Popup operations only handle one event");const r=J_();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(Ar(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=(null===(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)||void 0===i?void 0:i.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,N_e.get())};t()}}return n.currentPopupAction=null,n})();const Bh=new Map;class L_e extends cG{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return _(function*(){let r=Bh.get(t.auth._key());if(!r){try{const s=(yield function(n,e){return NA.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Bh.set(t.auth._key(),r)}return t.bypassAuthState||Bh.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return _(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return _(function*(){})()}cleanUp(){}}function NA(){return NA=_(function*(n,e){const t=dG(e),r=uG(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i}),NA.apply(this,arguments)}function B_e(n,e){Bh.set(n._key(),e)}function uG(n){return ks(n._redirectPersistence)}function dG(n){return z_("pendingRedirect",n.config.apiKey,n.name)}function hG(n,e){return jA.apply(this,arguments)}function jA(){return jA=_(function*(n,e,t=!1){const r=cn(n),i=Fa(r,e),o=yield new L_e(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o}),jA.apply(this,arguments)}class z_e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gG(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!gG(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ar(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pG(e))}saveEventToCache(e){this.cachedEventUids.add(pG(e)),this.lastProcessedEventTime=Date.now()}}function pG(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function gG({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function W_e(n){return HA.apply(this,arguments)}function HA(){return HA=_(function*(n,e={}){return Tt(n,"GET","/v1/projects",e)}),HA.apply(this,arguments)}const q_e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K_e=/^https?/;function zA(){return zA=_(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield W_e(n);for(const t of e)try{if(Y_e(t))return}catch(r){}hr(n,"unauthorized-domain")}),zA.apply(this,arguments)}function Y_e(n){const e=Mh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!K_e.test(t))return!1;if(q_e.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const X_e=new kh(3e4,6e4);function mG(){const n=Ht().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let ry=null;function J_e(n){return ry=ry||function(n){return new Promise((e,t)=>{var r,i,s;function o(){mG(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mG(),t(Ar(n,"network-request-failed"))},timeout:X_e.get()})}if(null===(i=null===(r=Ht().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Ht().gapi)||void 0===s?void 0:s.load)){const a=Uz("iframefcb");return Ht()[a]=()=>{gapi.load?o():t(Ar(n,"network-request-failed"))},cS(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}o()}}).catch(e=>{throw ry=null,e})}(n),ry}const eye=new kh(5e3,15e3),rye={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iye=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sye(n){const e=n.config;k(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qD(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:fo},i=iye.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Nc(r).slice(1)}`}function GA(){return GA=_(function*(n){const e=yield J_e(n),t=Ht().gapi;return k(t,n,"internal-error"),e.open({where:document.body,url:sye(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rye,dontclear:!0},r=>new Promise(function(){var i=_(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Ar(n,"network-request-failed"),l=Ht().setTimeout(()=>{o(a)},eye.get());function c(){Ht().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),GA.apply(this,arguments)}const aye={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _G{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const mye=encodeURIComponent("fac");function yG(n,e,t,r,i,s){return WA.apply(this,arguments)}function WA(){return WA=_(function*(n,e,t,r,i,s){k(n.config.authDomain,n,"auth-domain-config-required"),k(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:fo,eventId:i};if(e instanceof vo){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",aT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Qz){const u=e.getScopes().filter(d=>""!==d);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=yield n._getAppCheckToken(),c=l?`#${mye}=${encodeURIComponent(l)}`:"";return`${_ye(n)}?${Nc(a).slice(1)}${c}`}),WA.apply(this,arguments)}function _ye({config:n}){return n.emulator?qD(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}const qA="webStorageSupport",vye=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rG,this._completeRedirectFn=hG,this._overrideRedirectResult=B_e}_openPopup(e,t,r,i){var s=this;return _(function*(){var o;As(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=yield yG(e,t,r,Mh(),i);return function(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},aye),{width:r.toString(),height:i.toString(),top:s,left:o}),c=an().toLowerCase();t&&(a=xz(c)?"_blank":t),Az(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function(n=an()){var e;return G_(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new _G(null);const d=window.open(e||"",a,u);k(d,n,"popup-blocked");try{d.focus()}catch(h){}return new _G(d)}(e,a,J_())})()}_openRedirect(e,t,r,i){var s=this;return _(function*(){return yield s._originValidation(e),function(n){Ht().location.href=n}(yield yG(e,t,r,Mh(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(As(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return _(function*(){const r=yield function(n){return GA.apply(this,arguments)}(e),i=new z_e(e);return r.register("authEvent",s=>(k(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qA,{type:qA},i=>{var s;const o=null===(s=null==i?void 0:i[0])||void 0===s?void 0:s[qA];void 0!==o&&t(!!o),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(n){return zA.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Nz()||oS()||G_()}};var EG="@firebase/auth";class wye{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return _(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((null==r?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Iye=I$("authIdTokenMaxAge")||300;let CG=null;const Tye=n=>function(){var e=_(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Iye)return;const s=null==r?void 0:r.token;CG!==s&&(CG=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Dye(n=wh()){const e=Cs(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function(n,e){const t=Cs(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(vh(t.getOptions(),null!=e?e:{}))return i;hr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:vye,persistence:[g_e,n_e,rG]}),r=I$("authTokenSyncURL");if(r){const s=Tye(r);(function(n,e,t){Ct(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function(n,e,t,r){Ct(n).onIdTokenChanged(o=>s(o),void 0,void 0)}(t)}const i=E$("auth");return i&&function(n,e,t){const r=cn(n);k(r._canInitEmulator,r,"emulator-config-failed"),k(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(null==t?void 0:t.disableWarnings),s=Hz(e),{host:o,port:a}=function(n){const e=Hz(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zz(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:zz(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}function Sye(n){return new Ae(function(e){var t=function(n,e,t,r){return Ct(n).onAuthStateChanged(e,t,r)}(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}!function(n){Fn(new En("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;k(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oz(n)},c=new hme(r,i,s,l);return function(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ks);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fn(new En("auth-internal",e=>{const t=cn(e.getProvider("auth").getImmediate());return new wye(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),He(EG,"0.23.2",void 0),He(EG,"0.23.2","esm2017")}("Browser");class Uh{constructor(e){return e}}class QA{constructor(){return Ih("auth")}}const YA=new j("angularfire2.auth-instances");function Mye(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Uh(r)}}const kye={provide:QA,deps:[[new qe,YA]]},Rye={provide:Uh,useFactory:function(n,e){const t=Ch("auth",n,e);return t&&new Uh(t)},deps:[[new qe,YA],mo]};let Pye=(()=>{class n{constructor(){He("angularfire",go.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[Rye,kye]}),n})();function Nye(n,...e){return{ngModule:Pye,providers:[{provide:YA,useFactory:Mye(n),multi:!0,deps:[te,Pe,Th,Dh,[new qe,B_],...e]}]}}const Oye=Cn(Sye,!0),Fye=Cn(Dye,!0),Lye=Cn(O_e,!0),Vye=Cn(Kme,!0);let TG=(()=>{class n{constructor(t){this.auth=t}loginWithGoogle(){return Lye(this.auth,new kme)}logOut(){return Vye(this.auth)}}return n.\u0275fac=function(t){return new(t||n)(E(Uh))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jh=(()=>{class n{constructor(){const t=localStorage.getItem("me");t&&(this.credentials=JSON.parse(t))}setCredentials(t){localStorage.setItem("me",JSON.stringify(t)),this.credentials=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bye=(()=>{class n{constructor(t,r,i){this.authService=t,this.credentialsService=r,this.router=i}ngOnInit(){}loginWithGoogle(){this.authService.loginWithGoogle().then(t=>{this.credentialsService.setCredentials({name:t.user.displayName,email:t.user.email,photo:t.user.photoURL}),this.router.navigate(["my-notes"])}).catch(t=>console.log(t))}logOut(){localStorage.removeItem("me")}}return n.\u0275fac=function(t){return new(t||n)(b(TG),b(jh),b(On))},n.\u0275cmp=Gn({type:n,selectors:[["app-login"]],decls:10,vars:0,consts:[[1,"login-page"],[1,"green-pannel"],["src","../../../assets/imgs/logo.svg","alt","Labnotes logo"],[1,"center-icons"],[1,"icon-btn",3,"click"],[1,"fa-brands","fa-google"]],template:function(t,r){1&t&&(X(0,"section",0),X(1,"article",1),X(2,"h1"),cr(3,"Welcome to Labnotes"),J(),on(4,"img",2),J(),X(5,"h2"),cr(6,"Login using:"),J(),X(7,"div",3),X(8,"button",4),it("click",function(){return r.loginWithGoogle()}),on(9,"i",5),J(),J(),J())},styles:['.login-page[_ngcontent-%COMP%]{background:#FCF6F1;width:100%;height:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin:0;font-weight:500;font-family:"Poppins",sans-serif;font-size:30px;text-align:center}h2[_ngcontent-%COMP%]{margin-top:20px;font-size:20px;font-family:"Poppins",sans-serif}.green-pannel[_ngcontent-%COMP%]{background:#C7EBB3;border-radius:0 0 20px 20px;height:65vh;display:flex;flex-direction:column;align-items:center;justify-content:center}.center-icons[_ngcontent-%COMP%]{display:flex;justify-content:center;grid-gap:50px;gap:50px;margin-top:20px}.icon-btn[_ngcontent-%COMP%]{border:3px solid #EBC7E5;background:#FFD5F8;height:50px;width:50px;display:flex;align-items:center;justify-content:center;border-radius:50%;cursor:pointer}.fa-brands[_ngcontent-%COMP%]{font-size:25px}']}),n})(),Uye=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Gn({type:n,selectors:[["app-delete-note-dialog"]],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-button","","mat-dialog-close",""],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,r){1&t&&(X(0,"h2",0),cr(1,"Delete this note?"),J(),X(2,"p"),cr(3,"You will not be able to recover it"),J(),X(4,"mat-dialog-actions"),X(5,"button",1),cr(6,"No, Cancel"),J(),X(7,"button",2),cr(8,"Yes, Delete it"),J(),J()),2&t&&(Et(7),Xt("mat-dialog-close",!0))},directives:[Dae,Sae,ej,Tae],styles:['h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif}']}),n})();var O,jye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},gi={},XA=XA||{},ie=jye||self;function sy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $h(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ZA="closure_uid_"+(1e9*Math.random()>>>0),Hye=0;function zye(n,e,t){return n.call.apply(n.bind,arguments)}function Gye(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ln(n,e,t){return(Ln=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zye:Gye).apply(null,arguments)}function oy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function un(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function wo(){this.s=this.s,this.o=this.o}wo.prototype.s=!1,wo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(n){Object.prototype.hasOwnProperty.call(n,ZA)&&n[ZA]||(n[ZA]=++Hye)}(this)},wo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const DG=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function JA(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function SG(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(sy(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Vn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Vn.prototype.h=function(){this.defaultPrevented=!0};var qye=function(){if(!ie.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ie.addEventListener("test",()=>{},e),ie.removeEventListener("test",()=>{},e)}catch(t){}return n}();function Hh(n){return/^[\s\xa0]*$/.test(n)}function ay(){var n=ie.navigator;return n&&(n=n.userAgent)?n:""}function Hi(n){return-1!=ay().indexOf(n)}function ex(n){return ex[" "](n),n}ex[" "]=function(){};var nx,Qye=Hi("Opera"),zc=Hi("Trident")||Hi("MSIE"),AG=Hi("Edge"),tx=AG||zc,xG=Hi("Gecko")&&!(-1!=ay().toLowerCase().indexOf("webkit")&&!Hi("Edge"))&&!(Hi("Trident")||Hi("MSIE"))&&!Hi("Edge"),Yye=-1!=ay().toLowerCase().indexOf("webkit")&&!Hi("Edge");function MG(){var n=ie.document;return n?n.documentMode:void 0}e:{var rx="",ix=function(){var n=ay();return xG?/rv:([^\);]+)(\)|;)/.exec(n):AG?/Edge\/([\d\.]+)/.exec(n):zc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Yye?/WebKit\/(\S+)/.exec(n):Qye?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(ix&&(rx=ix?ix[1]:""),zc){var sx=MG();if(null!=sx&&sx>parseFloat(rx)){nx=String(sx);break e}}nx=rx}var Xye=ie.document&&zc&&(MG()||parseInt(nx,10))||void 0;function zh(n,e){if(Vn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(xG){e:{try{ex(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Zye[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&zh.$.h.call(this)}}un(zh,Vn);var Zye={2:"touch",3:"pen",4:"mouse"};zh.prototype.h=function(){zh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gh="closure_listenable_"+(1e6*Math.random()|0),Jye=0;function eve(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Jye,this.fa=this.ia=!1}function ly(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function ax(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function RG(n){const e={};for(const t in n)e[t]=n[t];return e}const PG="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function NG(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<PG.length;s++)t=PG[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function cy(n){this.src=n,this.g={},this.h=0}function lx(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=DG(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ly(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cx(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}cy.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=cx(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new eve(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var ux="closure_lm_"+(1e6*Math.random()|0),dx={};function OG(n,e,t,r,i){if(r&&r.once)return LG(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)OG(n,e[s],t,r,i);return null}return t=gx(t),n&&n[Gh]?n.O(e,t,$h(r)?!!r.capture:!!r,i):FG(n,e,t,!1,r,i)}function FG(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=$h(i)?!!i.capture:!!i,a=fx(n);if(a||(n[ux]=a=new cy(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function(){const e=rve;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)qye||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(BG(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function LG(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)LG(n,e[s],t,r,i);return null}return t=gx(t),n&&n[Gh]?n.P(e,t,$h(r)?!!r.capture:!!r,i):FG(n,e,t,!0,r,i)}function VG(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)VG(n,e[s],t,r,i);else r=$h(r)?!!r.capture:!!r,t=gx(t),n&&n[Gh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cx(s=n.g[e],t,r,i))&&(ly(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=fx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cx(e,t,r,i)),(t=-1<n?e[n]:null)&&hx(t))}function hx(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Gh])lx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(BG(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fx(e))?(lx(t,n),0==t.h&&(t.src=null,e[ux]=null)):ly(n)}}}function BG(n){return n in dx?dx[n]:dx[n]="on"+n}function rve(n,e){if(n.fa)n=!0;else{e=new zh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&hx(n),n=t.call(r,e)}return n}function fx(n){return(n=n[ux])instanceof cy?n:null}var px="__closure_events_fn_"+(1e9*Math.random()>>>0);function gx(n){return"function"==typeof n?n:(n[px]||(n[px]=function(e){return n.handleEvent(e)}),n[px])}function dn(){wo.call(this),this.i=new cy(this),this.S=this,this.J=null}function Tn(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Vn(e,n);else if(e instanceof Vn)e.target=e.target||n;else{var i=e;NG(e=new Vn(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=uy(o,r,!0,e)&&i}if(i=uy(o=e.g=n,r,!0,e)&&i,i=uy(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=uy(o=e.g=t[s],r,!1,e)&&i}function uy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&lx(n.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}un(dn,wo),dn.prototype[Gh]=!0,dn.prototype.removeEventListener=function(n,e,t,r){VG(this,n,e,t,r)},dn.prototype.N=function(){if(dn.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ly(t[r]);delete n.g[e],n.h--}}this.J=null},dn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},dn.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var mx=ie.JSON.stringify;function sve(){var n=_x;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var UG=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ave,n=>n.reset());class ave{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lve(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function cve(n){ie.setTimeout(()=>{throw n},0)}let Wh,qh=!1,_x=new class{constructor(){this.h=this.g=null}add(e,t){const r=UG.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},jG=()=>{const n=ie.Promise.resolve(void 0);Wh=()=>{n.then(uve)}};var uve=()=>{for(var n;n=sve();){try{n.h.call(n.g)}catch(t){cve(t)}var e=UG;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}qh=!1};function dy(n,e){dn.call(this),this.h=n||1,this.g=e||ie,this.j=Ln(this.qb,this),this.l=Date.now()}function yx(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function vx(n,e,t){if("function"==typeof n)t&&(n=Ln(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ln(n.handleEvent,n)}return 2147483647<Number(e)?-1:ie.setTimeout(n,e||0)}function $G(n){n.g=vx(()=>{n.g=null,n.i&&(n.i=!1,$G(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}un(dy,dn),(O=dy.prototype).ga=!1,O.T=null,O.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Tn(this,"tick"),this.ga&&(yx(this),this.start()))}},O.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},O.N=function(){dy.$.N.call(this),yx(this),delete this.g};class dve extends wo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$G(this)}N(){super.N(),this.g&&(ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kh(n){wo.call(this),this.h=n,this.g={}}un(Kh,wo);var HG=[];function zG(n,e,t,r){Array.isArray(t)||(t&&(HG[0]=t.toString()),t=HG);for(var i=0;i<t.length;i++){var s=OG(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function GG(n){ax(n.g,function(e,t){this.g.hasOwnProperty(t)&&hx(e)},n),n.g={}}function hy(){this.g=!0}function Gc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return mx(t)}catch(a){return e}}(n,t)+(r?" "+r:"")})}Kh.prototype.N=function(){Kh.$.N.call(this),GG(this)},Kh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hy.prototype.Ea=function(){this.g=!1},hy.prototype.info=function(){};var La={},WG=null;function fy(){return WG=WG||new dn}function qG(n){Vn.call(this,La.Ta,n)}function Qh(n){const e=fy();Tn(e,new qG(e))}function KG(n,e){Vn.call(this,La.STAT_EVENT,n),this.stat=e}function tr(n){const e=fy();Tn(e,new KG(e,n))}function QG(n,e){Vn.call(this,La.Ua,n),this.size=e}function Yh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ie.setTimeout(function(){n()},e)}La.Ta="serverreachability",un(qG,Vn),La.STAT_EVENT="statevent",un(KG,Vn),La.Ua="timingevent",un(QG,Vn);var py={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},YG={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wx(){}function ZG(){}wx.prototype.h=null;var Cx,Xh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ex(){Vn.call(this,"d")}function bx(){Vn.call(this,"c")}function gy(){}function Zh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Kh(this),this.P=mve,this.V=new dy(n=tx?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new JG}function JG(){this.i=null,this.g="",this.h=!1}un(Ex,Vn),un(bx,Vn),un(gy,wx),gy.prototype.g=function(){return new XMLHttpRequest},gy.prototype.i=function(){return{}},Cx=new gy;var mve=45e3,Ix={},my={};function Tx(n,e,t){n.L=1,n.v=wy(Ps(e)),n.s=t,n.S=!0,eW(n,null)}function eW(n,e){n.G=Date.now(),Jh(n),n.A=Ps(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),uW(t.i,"t",r),n.C=0,t=n.l.J,n.h=new JG,n.g=NW(n.l,t?e:null,!n.s),0<n.O&&(n.M=new dve(Ln(n.Pa,n,n.g),n.O)),zG(n.U,n.g,"readystatechange",n.nb),e=n.I?RG(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Qh(),function(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function tW(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function nW(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=_ve(n,t),i==my){4==e&&(n.o=4,tr(14),r=!1),Gc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ix){n.o=4,tr(15),Gc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Gc(n.j,n.m,i,null),Dx(n,i)}tW(n)&&i!=my&&i!=Ix&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,tr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Px(e),e.M=!0,tr(11))):(Gc(n.j,n.m,t,"[Invalid Chunked Response]"),Va(n),ef(n))}function _ve(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?my:(t=Number(e.substring(t,r)),isNaN(t)?Ix:(r+=1)+t>e.length?my:(e=e.slice(r,r+t),n.C=r+t,e))}function Jh(n){n.Y=Date.now()+n.P,rW(n,n.P)}function rW(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yh(Ln(n.lb,n),e)}function _y(n){n.B&&(ie.clearTimeout(n.B),n.B=null)}function ef(n){0==n.l.H||n.J||MW(n.l,n)}function Va(n){_y(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,yx(n.V),GG(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Dx(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Sx(t.i,n)))if(!n.K&&Sx(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Yh(Ln(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<n.G))break e;Dy(t),Iy(t)}Rx(t),tr(18)}if(1>=fW(t.i)&&t.oa){try{t.oa()}catch(c){}t.oa=void 0}}else Ua(t,11)}else if((n.K||t.g==n)&&Dy(t),!Hh(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const u=c[3];null!=u&&(t.ra=u,t.l.info("VER="+t.ra));const d=c[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.L=r=1.5*h,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ax(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,st(r.I,r.F,g))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=PW(r,r.J?r.pa:null,r.Y),o.K){pW(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(_y(a),Jh(a)),r.g=o}else AW(r);0<t.j.length&&Ty(t)}else"stop"!=c[0]&&"close"!=c[0]||Ua(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ua(t,7):kx(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}Qh()}catch(c){}}function iW(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(sy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(sy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(sy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(O=Zh.prototype).setTimeout=function(n){this.P=n},O.nb=function(n){n=n.target;const e=this.M;e&&3==zi(n)?e.l():this.Pa(n)},O.Pa=function(n){try{if(n==this.g)e:{const u=zi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||tx||this.g&&(this.h.h||this.g.ja()||bW(this.g)))){this.J||4!=u||7==e||Qh(),_y(this);var t=this.g.da();this.ca=t;t:if(tW(this)){var r=bW(this.g);n="";var i=r.length,s=4==zi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Va(this),ef(this);var o="";break t}this.h.i=new ie.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,u,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hh(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.o=3,tr(12),Va(this),ef(this);break e}Gc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dx(this,t)}this.S?(nW(this,u,o),tx&&this.i&&3==u&&(zG(this.U,this.V,"tick",this.mb),this.V.start())):(Gc(this.j,this.m,o,null),Dx(this,o)),4==u&&Va(this),this.i&&!this.J&&(4==u?MW(this.l,this):(this.i=!1,Jh(this)))}else(function(n){const e={};n=(n.g&&2<=zi(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Hh(n[r]))continue;var t=lve(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,tr(12)):(this.o=0,tr(13)),Va(this),ef(this)}}}catch(u){}},O.mb=function(){if(this.g){var n=zi(this.g),e=this.g.ja();this.C<e.length&&(_y(this),nW(this,n,e),this.i&&4!=n&&Jh(this))}},O.cancel=function(){this.J=!0,Va(this)},O.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Qh(),tr(17)),Va(this),this.o=2,ef(this)):rW(this,this.Y-n)};var sW=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ba){this.h=n.h,yy(this,n.j),this.s=n.s,this.g=n.g,vy(this,n.m),this.l=n.l;var e=n.i,t=new rf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),oW(this,t),this.o=n.o}else n&&(e=String(n).match(sW))?(this.h=!1,yy(this,e[1]||"",!0),this.s=tf(e[2]||""),this.g=tf(e[3]||"",!0),vy(this,e[4]),this.l=tf(e[5]||"",!0),oW(this,e[6]||"",!0),this.o=tf(e[7]||"")):(this.h=!1,this.i=new rf(null,this.h))}function Ps(n){return new Ba(n)}function yy(n,e,t){n.j=t?tf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function vy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function oW(n,e,t){e instanceof rf?(n.i=e,function(n,e){e&&!n.j&&(Eo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(lW(this,r),uW(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=nf(e,Ive)),n.i=new rf(e,n.h))}function st(n,e,t){n.i.set(e,t)}function wy(n){return st(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function tf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Eve),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Eve(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ba.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nf(e,aW,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nf(e,aW,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(nf(t,"/"==t.charAt(0)?Cve:bve,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nf(t,Tve)),n.join("")};var aW=/[#\/\?@]/g,bve=/[#\?:]/g,Cve=/[#\?]/g,Ive=/[#\?@]/g,Tve=/#/g;function rf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Eo(n){n.g||(n.g=new Map,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lW(n,e){Eo(n),e=Wc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cW(n,e){return Eo(n),e=Wc(n,e),n.g.has(e)}function uW(n,e,t){lW(n,e),0<t.length&&(n.i=null,n.g.set(Wc(n,e),JA(t)),n.h+=t.length)}function Wc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dW(n){this.l=n||Ave,n=ie.PerformanceNavigationTiming?0<(n=ie.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ie.g&&ie.g.Ka&&ie.g.Ka()&&ie.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(O=rf.prototype).add=function(n,e){Eo(this),this.i=null,n=Wc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},O.forEach=function(n,e){Eo(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},O.ta=function(){Eo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},O.Z=function(n){Eo(this);let e=[];if("string"==typeof n)cW(this,n)&&(e=e.concat(this.g.get(Wc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},O.set=function(n,e){return Eo(this),this.i=null,cW(this,n=Wc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},O.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var Ave=10;function hW(n){return!!n.h||!!n.g&&n.g.size>=n.j}function fW(n){return n.h?1:n.g?n.g.size:0}function Sx(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ax(n,e){n.g?n.g.add(e):n.h=e}function pW(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function gW(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return JA(n.i)}function Mve(){this.g=new class{stringify(n){return ie.JSON.stringify(n,void 0)}parse(n){return ie.JSON.parse(n,void 0)}}}function kve(n,e,t){const r=t||"";try{iW(n,function(i,s){let o=i;$h(i)&&(o=mx(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ey(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function sf(n){this.l=n.fc||null,this.j=n.ob||!1}function by(n,e){dn.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=xx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dW.prototype.cancel=function(){if(this.i=gW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},un(sf,wx),sf.prototype.g=function(){return new by(this.l,this.j)},sf.prototype.i=function(n){return function(){return n}}({}),un(by,dn);var xx=0;function mW(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function af(n){n.readyState=4,n.l=null,n.j=null,n.A=null,lf(n)}function lf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(O=by.prototype).open=function(n,e){if(this.readyState!=xx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,lf(this)},O.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||ie).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,af(this)),this.readyState=xx},O.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,lf(this)),this.g&&(this.readyState=3,lf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==ie.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mW(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},O.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?af(this):lf(this),3==this.readyState&&mW(this)}},O.Za=function(n){this.g&&(this.response=this.responseText=n,af(this))},O.Ya=function(n){this.g&&(this.response=n,af(this))},O.ka=function(){this.g&&af(this)},O.setRequestHeader=function(n,e){this.v.append(n,e)},O.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},O.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(by.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Pve=ie.JSON.parse;function Dt(n){dn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=_W,this.L=this.M=!1}un(Dt,dn);var _W="",Nve=/^https?$/i,Ove=["POST","PUT"];function yW(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vW(n),Cy(n)}function vW(n){n.F||(n.F=!0,Tn(n,"complete"),Tn(n,"error"))}function wW(n){if(n.h&&void 0!==XA&&(!n.C[1]||4!=zi(n)||2!=n.da()))if(n.v&&4==zi(n))vx(n.La,0,n);else if(Tn(n,"readystatechange"),4==zi(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(sW)[1]||null;!i&&ie.self&&ie.self.location&&(i=ie.self.location.protocol.slice(0,-1)),r=!Nve.test(i?i.toLowerCase():"")}t=r}if(t)Tn(n,"complete"),Tn(n,"success");else{n.m=6;try{var s=2<zi(n)?n.g.statusText:""}catch(a){s=""}n.j=s+" ["+n.da()+"]",vW(n)}}finally{Cy(n)}}}function Cy(n,e){if(n.g){EW(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Tn(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function EW(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ie.clearTimeout(n.A),n.A=null)}function zi(n){return n.g?n.g.readyState:0}function bW(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case _W:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function CW(n){let e="";return ax(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Mx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=CW(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):st(n,e,t))}function cf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function IW(n){this.Ga=0,this.j=[],this.l=new hy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cf("baseRetryDelayMs",5e3,n),this.hb=cf("retryDelaySeedMs",1e4,n),this.eb=cf("forwardChannelMaxRetries",2,n),this.xa=cf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new dW(n&&n.concurrentRequestLimit),this.Ja=new Mve,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function kx(n){if(TW(n),3==n.H){var e=n.W++,t=Ps(n.I);if(st(t,"SID",n.K),st(t,"RID",e),st(t,"TYPE","terminate"),uf(n,t),(e=new Zh(n,n.l,e)).L=2,e.v=wy(Ps(t)),t=!1,ie.navigator&&ie.navigator.sendBeacon)try{t=ie.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!t&&ie.Image&&((new Image).src=e.v,t=!0),t||(e.g=NW(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Jh(e)}RW(n)}function Iy(n){n.g&&(Px(n),n.g.cancel(),n.g=null)}function TW(n){Iy(n),n.u&&(ie.clearTimeout(n.u),n.u=null),Dy(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ie.clearTimeout(n.m),n.m=null)}function Ty(n){if(!hW(n.i)&&!n.m){n.m=!0;var e=n.Na;Wh||jG(),qh||(Wh(),qh=!0),_x.add(e,n),n.C=0}}function DW(n,e){var t;t=e?e.m:n.W++;const r=Ps(n.I);st(r,"SID",n.K),st(r,"RID",t),st(r,"AID",n.V),uf(n,r),n.o&&n.s&&Mx(r,n.o,n.s),t=new Zh(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=SW(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Ax(n.i,t),Tx(t,r,e)}function uf(n,e){n.na&&ax(n.na,function(t,r){st(e,r,t)}),n.h&&iW({},function(t,r){st(e,r,t)})}function SW(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ln(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{kve(u,o,"req"+c+"_")}catch(d){r&&r(u)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function AW(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Wh||jG(),qh||(Wh(),qh=!0),_x.add(e,n),n.A=0}}function Rx(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Yh(Ln(n.Ma,n),kW(n,n.A)),n.A++,0))}function Px(n){null!=n.B&&(ie.clearTimeout(n.B),n.B=null)}function xW(n){n.g=new Zh(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ps(n.wa);st(e,"RID","rpc"),st(e,"SID",n.K),st(e,"AID",n.V),st(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&st(e,"TO",n.qa),st(e,"TYPE","xmlhttp"),uf(n,e),n.o&&n.s&&Mx(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=wy(Ps(e)),t.s=null,t.S=!0,eW(t,n)}function Dy(n){null!=n.v&&(ie.clearTimeout(n.v),n.v=null)}function MW(n,e){var t=null;if(n.g==e){Dy(n),Px(n),n.g=null;var r=2}else{if(!Sx(n.i,e))return;t=e.F,pW(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Tn(r=fy(),new QG(r,t)),Ty(n)}else AW(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function(n,e){return!(fW(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Yh(Ln(n.Na,n,e),kW(n,n.C)),n.C++,0)))}(n,e)||2==r&&Rx(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ua(n,5);break;case 4:Ua(n,10);break;case 3:Ua(n,6);break;default:Ua(n,2)}}function kW(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Ua(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ln(n.pb,n);t||(t=new Ba("//www.google.com/images/cleardot.gif"),ie.location&&"http"==ie.location.protocol||yy(t,"https"),wy(t)),function(n,e){const t=new hy;if(ie.Image){const r=new Image;r.onload=oy(Ey,t,r,"TestLoadImage: loaded",!0,e),r.onerror=oy(Ey,t,r,"TestLoadImage: error",!1,e),r.onabort=oy(Ey,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=oy(Ey,t,r,"TestLoadImage: timeout",!1,e),ie.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else tr(2);n.H=0,n.h&&n.h.za(e),RW(n),TW(n)}function RW(n){if(n.H=0,n.ma=[],n.h){const e=gW(n.i);(0!=e.length||0!=n.j.length)&&(SG(n.ma,e),SG(n.ma,n.j),n.i.i.length=0,JA(n.j),n.j.length=0),n.h.ya()}}function PW(n,e,t){var r=t instanceof Ba?Ps(t):new Ba(t);if(""!=r.g)e&&(r.g=e+"."+r.g),vy(r,r.m);else{var i=ie.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ba(null);r&&yy(s,r),e&&(s.g=e),i&&vy(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&st(r,t,e),st(r,"VER",n.ra),uf(n,r),r}function NW(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dt(t&&n.Ha&&!n.va?new sf({ob:!0}):n.va)).Oa(n.J),e}function OW(){}function Sy(){if(zc&&!(10<=Number(Xye)))throw Error("Environmental error: no available transport.")}function xr(n,e){dn.call(this),this.g=new IW(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Hh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new qc(this)}function FW(n){Ex.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function LW(){bx.call(this),this.status=1}function qc(n){this.g=n}function mi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Nx(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Ue(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(O=Dt.prototype).Oa=function(n){this.M=n},O.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cx.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Cx),this.g.onreadystatechange=Ln(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void yW(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=ie.FormData&&n instanceof ie.FormData,!(0<=DG(Ove,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{EW(this),0<this.B&&((this.L=function(n){return zc&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ln(this.ua,this)):this.A=vx(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){yW(this,s)}},O.ua=function(){void 0!==XA&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tn(this,"timeout"),this.abort(8))},O.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Tn(this,"complete"),Tn(this,"abort"),Cy(this))},O.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cy(this,!0)),Dt.$.N.call(this)},O.La=function(){this.s||(this.G||this.v||this.l?wW(this):this.kb())},O.kb=function(){wW(this)},O.isActive=function(){return!!this.g},O.da=function(){try{return 2<zi(this)?this.g.status:-1}catch(n){return-1}},O.ja=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},O.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Pve(e)}},O.Ia=function(){return this.m},O.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(O=IW.prototype).ra=8,O.H=1,O.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Zh(this,this.l,n);let s=this.s;if(this.U&&(s?(s=RG(s),NG(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=SW(this,i,e),st(t=Ps(this.I),"RID",n),st(t,"CVER",22),this.F&&st(t,"X-HTTP-Session-Id",this.F),uf(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(CW(s)))+"&"+e:this.o&&Mx(t,this.o,s)),Ax(this.i,i),this.bb&&st(t,"TYPE","init"),this.P?(st(t,"$req",e),st(t,"SID","null"),i.aa=!0,Tx(i,t,null)):Tx(i,t,e),this.H=2}}else 3==this.H&&(n?DW(this,n):0==this.j.length||hW(this.i)||DW(this))},O.Ma=function(){if(this.u=null,xW(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Yh(Ln(this.jb,this),n)}},O.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,tr(10),Iy(this),xW(this))},O.ib=function(){null!=this.v&&(this.v=null,Iy(this),Rx(this),tr(19))},O.pb=function(n){n?(this.l.info("Successfully pinged google.com"),tr(2)):(this.l.info("Failed to ping google.com"),tr(1))},O.isActive=function(){return!!this.h&&this.h.isActive(this)},(O=OW.prototype).Ba=function(){},O.Aa=function(){},O.za=function(){},O.ya=function(){},O.isActive=function(){return!0},O.Va=function(){},Sy.prototype.g=function(n,e){return new xr(n,e)},un(xr,dn),xr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;tr(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=PW(n,null,n.Y),Ty(n)},xr.prototype.close=function(){kx(this.g)},xr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=mx(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Ty(e)},xr.prototype.N=function(){this.g.h=null,delete this.j,kx(this.g),delete this.g,xr.$.N.call(this)},un(FW,Ex),un(LW,bx),un(qc,OW),qc.prototype.Ba=function(){Tn(this.g,"a")},qc.prototype.Aa=function(n){Tn(this.g,new FW(n))},qc.prototype.za=function(n){Tn(this.g,new LW)},qc.prototype.ya=function(){Tn(this.g,"b")},un(mi,function(){this.blockSize=-1}),mi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},mi.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)Nx(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){Nx(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){Nx(this,r),i=0;break}}this.h=i,this.i+=e},mi.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Uve={};function Ox(n){return-128<=n&&128>n?function(n,e){var t=Uve;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=function(e){return new Ue([0|e],0>e?-1:0)}(n)}(n):new Ue([0|n],0>n?-1:0)}function Gi(n){if(isNaN(n)||!isFinite(n))return Kc;if(0>n)return Dn(Gi(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Fx;return new Ue(e,0)}var Fx=4294967296,Kc=Ox(0),Lx=Ox(1),BW=Ox(16777216);function Ns(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Xr(n){return-1==n.h}function Dn(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Ue(t,~n.h).add(Lx)}function Ay(n,e){return n.add(Dn(e))}function xy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function df(n,e){this.g=n,this.h=e}function My(n,e){if(Ns(e))throw Error("division by zero");if(Ns(n))return new df(Kc,Kc);if(Xr(n))return e=My(Dn(n),e),new df(Dn(e.g),Dn(e.h));if(Xr(e))return e=My(n,Dn(e)),new df(Dn(e.g),e.h);if(30<n.g.length){if(Xr(n)||Xr(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Lx,r=e;0>=r.X(n);)t=UW(t),r=UW(r);var i=Qc(t,1),s=Qc(r,1);for(r=Qc(r,2),t=Qc(t,2);!Ns(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Qc(r,1),t=Qc(t,1)}return e=Ay(n,i.R(e)),new df(i,e)}for(i=Kc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Gi(t)).R(e);Xr(o)||0<o.X(n);)o=(s=Gi(t-=r)).R(e);Ns(s)&&(s=Lx),i=i.add(s),n=Ay(n,o)}return new df(i,n)}function UW(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Ue(t,n.h)}function Qc(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Ue(i,n.h)}(O=Ue.prototype).ea=function(){if(Xr(this))return-Dn(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Fx+r)*e,e*=Fx}return n},O.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ns(this))return"0";if(Xr(this))return"-"+Dn(this).toString(n);for(var e=Gi(Math.pow(n,6)),t=this,r="";;){var i=My(t,e).g,s=((0<(t=Ay(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ns(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},O.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},O.X=function(n){return Xr(n=Ay(this,n))?-1:Ns(n)?0:1},O.abs=function(){return Xr(this)?Dn(this):this},O.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new Ue(t,-2147483648&t[t.length-1]?-1:0)},O.R=function(n){if(Ns(this)||Ns(n))return Kc;if(Xr(this))return Xr(n)?Dn(this).R(Dn(n)):Dn(Dn(this).R(n));if(Xr(n))return Dn(this.R(Dn(n)));if(0>this.X(BW)&&0>n.X(BW))return Gi(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,l=65535&n.D(i);t[2*r+2*i]+=o*l,xy(t,2*r+2*i),t[2*r+2*i+1]+=s*l,xy(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,xy(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,xy(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Ue(t,0)},O.gb=function(n){return My(this,n).h},O.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Ue(t,this.h&n.h)},O.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Ue(t,this.h|n.h)},O.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Ue(t,this.h^n.h)},Sy.prototype.createWebChannel=Sy.prototype.g,xr.prototype.send=xr.prototype.u,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,py.NO_ERROR=0,py.TIMEOUT=8,py.HTTP_ERROR=6,YG.COMPLETE="complete",ZG.EventType=Xh,Xh.OPEN="a",Xh.CLOSE="b",Xh.ERROR="c",Xh.MESSAGE="d",dn.prototype.listen=dn.prototype.O,Dt.prototype.listenOnce=Dt.prototype.P,Dt.prototype.getLastError=Dt.prototype.Sa,Dt.prototype.getLastErrorCode=Dt.prototype.Ia,Dt.prototype.getStatus=Dt.prototype.da,Dt.prototype.getResponseJson=Dt.prototype.Wa,Dt.prototype.getResponseText=Dt.prototype.ja,Dt.prototype.send=Dt.prototype.ha,Dt.prototype.setWithCredentials=Dt.prototype.Oa,mi.prototype.digest=mi.prototype.l,mi.prototype.reset=mi.prototype.reset,mi.prototype.update=mi.prototype.j,Ue.prototype.add=Ue.prototype.add,Ue.prototype.multiply=Ue.prototype.R,Ue.prototype.modulo=Ue.prototype.gb,Ue.prototype.compare=Ue.prototype.X,Ue.prototype.toNumber=Ue.prototype.ea,Ue.prototype.toString=Ue.prototype.toString,Ue.prototype.getBits=Ue.prototype.D,Ue.fromNumber=Gi,Ue.fromString=function VW(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Dn(VW(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Gi(Math.pow(e,8)),r=Kc,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=Gi(Math.pow(e,s)),r=r.R(s).add(Gi(o))):r=(r=r.R(t)).add(Gi(o))}return r};var jve=gi.createWebChannelTransport=function(){return new Sy},$ve=gi.getStatEventTarget=function(){return fy()},Vx=gi.ErrorCode=py,Hve=gi.EventType=YG,zve=gi.Event=La,jW=gi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gve=gi.FetchXmlHttpFactory=sf,ky=gi.WebChannel=ZG,Wve=gi.XhrIo=Dt,qve=gi.Md5=mi,Yc=gi.Integer=Ue;const $W="@firebase/firestore";class hn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");let Xc="9.23.0";const bo=new Ta("@firebase/firestore");function Bx(){return bo.logLevel}function S(n,...e){if(bo.logLevel<=Ce.DEBUG){const t=e.map(Ux);bo.debug(`Firestore (${Xc}): ${n}`,...t)}}function Pt(n,...e){if(bo.logLevel<=Ce.ERROR){const t=e.map(Ux);bo.error(`Firestore (${Xc}): ${n}`,...t)}}function _i(n,...e){if(bo.logLevel<=Ce.WARN){const t=e.map(Ux);bo.warn(`Firestore (${Xc}): ${n}`,...t)}}function Ux(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function B(n="Unexpected state"){const e=`FIRESTORE (${Xc}) INTERNAL ASSERTION FAILED: `+n;throw Pt(e),new Error(e)}function H(n,e){n||B()}function N(n,e){return n}const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends Qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class en{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HW{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kve{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hn.UNAUTHENTICATED))}shutdown(){}}class Qve{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yve{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new en;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new en,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(_(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new en)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(H("string"==typeof r.accessToken),new HW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return H(null===e||"string"==typeof e),new hn(e)}}class Xve{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Zve{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Xve(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zW{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jve{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,S("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(H("string"==typeof t.token),this.T=t.token,new zW(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ewe(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class GW{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ewe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ne(n,e){return n<e?-1:n>e?1:0}function Zc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class mt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new mt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new z(e)}static min(){return new z(new mt(0,0))}static max(){return new z(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hf{constructor(e,t,r){void 0===t?t=0:t>e.length&&B(),void 0===r?r=e.length-t:r>e.length-t&&B(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===hf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ke extends hf{construct(e,t,r){return new ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new ke(t)}static emptyPath(){return new ke([])}}const twe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends hf{construct(e,t,r){return new Nt(e,t,r)}static isValidIdentifier(e){return twe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new T(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new T(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new T(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new T(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}class R{constructor(e){this.path=e}static fromPath(e){return new R(ke.fromString(e))}static fromName(e){return new R(ke.fromString(e).popFirst(5))}static empty(){return new R(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ke.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new R(new ke(e.slice()))}}function KW(n){return new Mr(n.readTime,n.key,-1)}class Mr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Mr(z.min(),R.empty(),-1)}static max(){return new Mr(z.max(),R.empty(),-1)}}function $x(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=R.comparator(n.documentKey,e.documentKey),0!==t?t:ne(n.largestBatchId,e.largestBatchId))}const QW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function Co(n){return Hx.apply(this,arguments)}function Hx(){return Hx=_(function*(n){if(n.code!==C.FAILED_PRECONDITION||n.message!==QW)throw n;S("LocalStore","Unexpectedly lost primary lease")}),Hx.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,r)=>{t(e)})}static reject(e){return new w((t,r)=>{r(e)})}static waitFor(e){return new w((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=w.resolve(!1);for(const r of e)t=t.next(i=>i?w.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new w((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new w((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Io(n){return"IndexedDbTransactionError"===n.name}let kr=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function gf(n){return null==n}function mf(n){return 0===n&&1/n==-1/0}function iq(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function To(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sq(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Je{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new Je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fy(this.root,e,this.comparator,!0)}}class Fy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:Sn.RED,this.left=null!=i?i:Sn.EMPTY,this.right=null!=s?s:Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Sn(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();const e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1,Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Sn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ot{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oq(this.data.getIterator())}getIteratorFrom(e){return new oq(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class oq{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fr{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new fr([])}unionWith(e){let t=new ot(Nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new fr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class aq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw"undefined"!=typeof DOMException&&i instanceof DOMException?new aq("Invalid base64 string: "+i):i}}(e);return new tn(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const Swe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Do(n){if(H(!!n),"string"==typeof n){let e=0;const t=Swe.exec(n);if(H(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Os(n){return"string"==typeof n?tn.fromBase64String(n):tn.fromUint8Array(n)}function Ly(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Vy(n){const e=n.mapValue.fields.__previous_value__;return Ly(e)?Vy(e):e}function _f(n){const e=Do(n.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}class Awe{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ha{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ha("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ha&&e.projectId===this.projectId&&e.database===this.database}}const So_mapValue={fields:{__type__:{stringValue:"__max__"}}};function Ao(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ly(n)?4:dq(n)?9007199254740991:10:B()}function qi(n,e){if(n===e)return!0;const t=Ao(n);if(t!==Ao(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _f(n).isEqual(_f(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Do(r.timestampValue),o=Do(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Os(n.bytesValue).isEqual(Os(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return St(r.geoPointValue.latitude)===St(i.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return St(r.integerValue)===St(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=St(r.doubleValue),o=St(i.doubleValue);return s===o?mf(s)===mf(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Zc(n.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(iq(s)!==iq(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!qi(s[a],o[a])))return!1;return!0}(n,e);default:return B()}var i}function yf(n,e){return void 0!==(n.values||[]).find(t=>qi(t,e))}function xo(n,e){if(n===e)return 0;const t=Ao(n),r=Ao(e);if(t!==r)return ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ne(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=St(i.integerValue||i.doubleValue),a=St(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return lq(n.timestampValue,e.timestampValue);case 4:return lq(_f(n),_f(e));case 5:return ne(n.stringValue,e.stringValue);case 6:return function(i,s){const o=Os(i),a=Os(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ne(o[l],a[l]);if(0!==c)return c}return ne(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ne(St(i.latitude),St(s.latitude));return 0!==o?o:ne(St(i.longitude),St(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=xo(o[l],a[l]);if(c)return c}return ne(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===So_mapValue&&s===So_mapValue)return 0;if(i===So_mapValue)return 1;if(s===So_mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=ne(a[u],c[u]);if(0!==d)return d;const h=xo(o[a[u]],l[c[u]]);if(0!==h)return h}return ne(a.length,c.length)}(n.mapValue,e.mapValue);default:throw B()}}function lq(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ne(n,e);const t=Do(n),r=Do(e),i=ne(t.seconds,r.seconds);return 0!==i?i:ne(t.nanos,r.nanos)}function eu(n){return Wx(n)}function Wx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Do(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Os(n.bytesValue).toBase64():"referenceValue"in n?R.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Wx(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${Wx(r.fields[a])}`;return s+"}"}(n.mapValue):B();var e}function qx(n){return!!n&&"integerValue"in n}function vf(n){return!!n&&"arrayValue"in n}function cq(n){return!!n&&"nullValue"in n}function uq(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jy(n){return!!n&&"mapValue"in n}function wf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return To(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dq(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wf(t)}setAll(e){let t=Nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=wf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());jy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){To(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new An(wf(this.value))}}function pq(n){const e=[];return To(n.fields,(t,r)=>{const i=new Nt([t]);if(jy(r)){const s=pq(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new fr(e)}class at{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new at(e,0,z.min(),z.min(),z.min(),An.empty(),0)}static newFoundDocument(e,t,r,i){return new at(e,1,t,z.min(),r,i,0)}static newNoDocument(e,t){return new at(e,2,t,z.min(),z.min(),An.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,z.min(),z.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(z.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mo{constructor(e,t){this.position=e,this.inclusive=t}}function gq(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?R.comparator(R.fromName(o.referenceValue),t.key):xo(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function mq(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qi(n.position[t],e.position[t]))return!1;return!0}class tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function kwe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class _q{}class Ie extends _q{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Rwe(e,t,r):"array-contains"===t?new Owe(e,r):"in"===t?new Cq(e,r):"not-in"===t?new Fwe(e,r):"array-contains-any"===t?new Lwe(e,r):new Ie(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Pwe(e,r):new Nwe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xo(t,this.value)):null!==t&&Ao(this.value)===Ao(t)&&this.matchesComparison(xo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class je extends _q{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new je(e,t)}matches(e){return nu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function nu(n){return"and"===n.op}function Qx(n){return function(n){for(const e of n.filters)if(e instanceof je)return!1;return!0}(n)&&nu(n)}function Yx(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+eu(n.value);if(Qx(n))return n.filters.map(e=>Yx(e)).join(",");{const e=n.filters.map(t=>Yx(t)).join(",");return`${n.op}(${e})`}}function vq(n,e){return n instanceof Ie?(t=n,(r=e)instanceof Ie&&t.op===r.op&&t.field.isEqual(r.field)&&qi(t.value,r.value)):n instanceof je?function(t,r){return r instanceof je&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&vq(s,r.filters[o]),!0)}(n,e):void B();var t,r}function Eq(n){return n instanceof Ie?`${(e=n).field.canonicalString()} ${e.op} ${eu(e.value)}`:n instanceof je?function(e){return e.op.toString()+" {"+e.getFilters().map(Eq).join(" ,")+"}"}(n):"Filter";var e}class Rwe extends Ie{constructor(e,t,r){super(e,t,r),this.key=R.fromName(r.referenceValue)}matches(e){const t=R.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pwe extends Ie{constructor(e,t){super(e,"in",t),this.keys=bq(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Nwe extends Ie{constructor(e,t){super(e,"not-in",t),this.keys=bq(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bq(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>R.fromName(r.referenceValue))}class Owe extends Ie{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vf(t)&&yf(t.arrayValue,this.value)}}class Cq extends Ie{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yf(this.value.arrayValue,t)}}class Fwe extends Ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(yf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yf(this.value.arrayValue,t)}}class Lwe extends Ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yf(this.value.arrayValue,r))}}class Vwe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function Xx(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Vwe(n,e,t,r,i,s,o)}function Ga(n){const e=N(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eu(r)).join(",")),e.dt=t}return e.dt}function Ef(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kwe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vq(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mq(n.startAt,e.startAt)&&mq(n.endAt,e.endAt)}function $y(n){return R.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Fs{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null}}function ru(n){return new Fs(n)}function Sq(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Wa(n){const e=N(n);if(null===e.wt){e.wt=[];const t=function(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new tu(t)),e.wt.push(new tu(Nt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new tu(Nt.keyField(),s))}}}return e.wt}function nr(n){const e=N(n);if(!e._t)if("F"===e.limitType)e._t=Xx(e.path,e.collectionGroup,Wa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Wa(e))t.push(new tu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Mo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Mo(e.startAt.position,e.startAt.inclusive):null;e._t=Xx(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Gy(n,e,t){return new Fs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bf(n,e){return Ef(nr(n),nr(e))&&n.limitType===e.limitType}function Aq(n){return`${Ga(nr(n))}|lt:${n.limitType}`}function tM(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Eq(r)).join(", ")}]`),gf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eu(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eu(r)).join(",")),`Target(${t})`}(nr(n))}; limitType=${n.limitType})`}function Cf(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):R.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Wa(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const a=gq(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,Wa(t),r)||t.endAt&&!function(i,s,o){const a=gq(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,Wa(t),r)));var t,r}function Mq(n){return(e,t)=>{let r=!1;for(const i of Wa(n)){const s=Bwe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Bwe(n,e,t){const r=n.field.isKeyField()?R.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return null!==a&&null!==l?xo(a,l):B()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}class Ls{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return sq(this.inner)}size(){return this.innerSize}}const Uwe=new Je(R.comparator);function pr(){return Uwe}const kq=new Je(R.comparator);function If(...n){let e=kq;for(const t of n)e=e.insert(t.key,t);return e}function Rq(n){let e=kq;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ki(){return Tf()}function Pq(){return Tf()}function Tf(){return new Ls(n=>n.toString(),(n,e)=>n.isEqual(e))}const jwe=new Je(R.comparator),$we=new ot(R.comparator);function ue(...n){let e=$we;for(const t of n)e=e.add(t);return e}const Hwe=new ot(ne);function Nq(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function Oq(n){return{integerValue:""+n}}function Fq(n,e){return function(n){return"number"==typeof n&&Number.isInteger(n)&&!mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?Oq(e):Nq(n,e)}class Wy{constructor(){this._=void 0}}function zwe(n,e,t){return n instanceof iu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Ly(i)&&(i=Vy(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof qa?Vq(n,e):n instanceof Ka?Bq(n,e):function(r,i){const s=Lq(r,i),o=Uq(s)+Uq(r.gt);return qx(s)&&qx(r.gt)?Oq(o):Nq(r.serializer,o)}(n,e)}function Gwe(n,e,t){return n instanceof qa?Vq(n,e):n instanceof Ka?Bq(n,e):t}function Lq(n,e){return n instanceof su?qx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class iu extends Wy{}class qa extends Wy{constructor(e){super(),this.elements=e}}function Vq(n,e){const t=jq(e);for(const r of n.elements)t.some(i=>qi(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ka extends Wy{constructor(e){super(),this.elements=e}}function Bq(n,e){let t=jq(e);for(const r of n.elements)t=t.filter(i=>!qi(i,r));return{arrayValue:{values:t}}}class su extends Wy{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Uq(n){return St(n.integerValue||n.doubleValue)}function jq(n){return vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qwe{constructor(e,t){this.version=e,this.transformResults=t}}class ht{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ht}static exists(e){return new ht(void 0,e)}static updateTime(e){return new ht(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ky{}function $q(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new au(n.key,ht.none()):new ou(n.key,n.data,ht.none());{const t=n.data,r=An.empty();let i=new ot(Nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Vs(n.key,r,new fr(i.toArray()),ht.none())}}function Kwe(n,e,t){n instanceof ou?function(r,i,s){const o=r.value.clone(),a=Gq(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Vs?function(r,i,s){if(!qy(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=Gq(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(zq(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sf(n,e,t,r){return n instanceof ou?function(i,s,o,a){if(!qy(i.precondition,s))return o;const l=i.value.clone(),c=Wq(i.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vs?function(i,s,o,a){if(!qy(i.precondition,s))return o;const l=Wq(i.fieldTransforms,a,s),c=s.data;return c.setAll(zq(i)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(n,e,t,r):(o=t,qy(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Qwe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Lq(r.transform,i||null);null!=s&&(null===t&&(t=An.empty()),t.set(r.field,s))}return t||null}function Hq(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Zc(t,r,(i,s)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof qa&&r instanceof qa||t instanceof Ka&&r instanceof Ka?Zc(t.elements,r.elements,qi):t instanceof su&&r instanceof su?qi(t.gt,r.gt):t instanceof iu&&r instanceof iu);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ou extends Ky{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vs extends Ky{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zq(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Gq(n,e,t){const r=new Map;H(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Gwe(o,a,t[i]))}return r}function Wq(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,zwe(s,o,e))}return r}class au extends Ky{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rM extends Ky{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Kwe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Sf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Pq();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=$q(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&Zc(this.mutations,e.mutations,(t,r)=>Hq(t,r))&&Zc(this.baseMutations,e.baseMutations,(t,r)=>Hq(t,r))}}class sM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){H(e.mutations.length===r.length);let i=jwe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sM(e,t,r,i)}}class oM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Xwe{constructor(e,t){this.count=e,this.unchangedNames=t}}var zt,Re;function qq(n){switch(n){default:return B();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function Kq(n){if(void 0===n)return Pt("GRPC error has no .code"),C.UNKNOWN;switch(n){case zt.OK:return C.OK;case zt.CANCELLED:return C.CANCELLED;case zt.UNKNOWN:return C.UNKNOWN;case zt.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case zt.INTERNAL:return C.INTERNAL;case zt.UNAVAILABLE:return C.UNAVAILABLE;case zt.UNAUTHENTICATED:return C.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case zt.NOT_FOUND:return C.NOT_FOUND;case zt.ALREADY_EXISTS:return C.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return C.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case zt.ABORTED:return C.ABORTED;case zt.OUT_OF_RANGE:return C.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return C.UNIMPLEMENTED;case zt.DATA_LOSS:return C.DATA_LOSS;default:return B()}}(Re=zt||(zt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";class aM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Qy}static getOrCreateInstance(){return null===Qy&&(Qy=new aM),Qy}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Qy=null;const Zwe=new Yc([4294967295,4294967295],0);function Yq(n){const e=(new TextEncoder).encode(n),t=new qve;return t.update(e),new Uint8Array(t.digest())}function Xq(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yc([t,r],0),new Yc([i,s],0)]}class lM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Af(`Invalid padding: ${t}`);if(r<0)throw new Af(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Af(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Af(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Yc.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Yc.fromNumber(r)));return 1===i.compare(Zwe)&&(i=new Yc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Yq(e),[r,i]=Xq(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lM(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const t=Yq(e),[r,i]=Xq(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Af extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xf{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Mf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xf(z.min(),i,new Je(ne),pr(),ue())}}class Mf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Mf(r,t,ue(),ue(),ue())}}class Yy{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class Zq{constructor(e,t){this.targetId=e,this.Vt=t}}class Jq{constructor(e,t,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class e4{constructor(){this.St=0,this.Dt=n4(),this.Ct=tn.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ue(),t=ue(),r=ue();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:B()}}),new Mf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=n4()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Jwe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=pr(),this.zt=t4(),this.Wt=new Je(ne)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:B()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if($y(o))if(0===i){const a=new R(o.path);this.Yt(r,a,at.newNoDocument(a,z.min()))}else H(1===i);else{const a=this.ie(r);if(a!==i){const l=this.re(e,a);0!==l&&(this.ee(r),this.Wt=this.Wt.insert(r,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=aM.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(c,u,d){var h,f,p,g,m,v;const y={localCacheCount:u,existenceFilterCount:d.count},I=d.unchangedNames;return I&&(y.bloomFilter={applied:0===c,hashCount:null!==(h=null==I?void 0:I.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(g=null===(p=null===(f=null==I?void 0:I.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==g?g:0,padding:null!==(v=null===(m=null==I?void 0:I.bits)||void 0===m?void 0:m.padding)&&void 0!==v?v:0}),y}(l,a,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,c;try{l=Os(s).toUint8Array()}catch(u){if(u instanceof aq)return _i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new lM(l,o,a)}catch(u){return _i(u instanceof Af?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return 0===c.It?1:i!==t-this.oe(e.targetId,c)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&$y(a.target)){const l=new R(a.target.path);null!==this.jt.get(l)||this.ae(o,l)||this.Yt(o,l,at.newNoDocument(l,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let r=ue();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new xf(e,t,this.Wt,this.jt,r);return this.jt=pr(),this.zt=t4(),this.Wt=new Je(ne),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new e4,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ot(ne),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||S("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new e4),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function t4(){return new Je(R.comparator)}function n4(){return new Je(R.comparator)}const eEe={asc:"ASCENDING",desc:"DESCENDING"},tEe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nEe={and:"AND",or:"OR"};class rEe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cM(n,e){return n.useProto3Json||gf(e)?e:{value:e}}function lu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iEe(n,e){return lu(n,e.toTimestamp())}function Ot(n){return H(!!n),z.fromTimestamp(function(e){const t=Do(e);return new mt(t.seconds,t.nanos)}(n))}function uM(n,e){return(t=n,new ke(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function i4(n){const e=ke.fromString(n);return H(f4(e)),e}function kf(n,e){return uM(n.databaseId,e.path)}function Qi(n,e){const t=i4(e);if(t.get(1)!==n.databaseId.projectId)throw new T(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new T(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new R(o4(t))}function dM(n,e){return uM(n.databaseId,e)}function Rf(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function o4(n){return H(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function a4(n,e,t){return{name:kf(n,e),fields:t.value.mapValue.fields}}function c4(n,e){return{documents:[dM(n,e.path)]}}function fM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(0!==l.length)return h4(je.create(l,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(l){if(0!==l.length)return l.map(c=>{return{field:ko((u=c).field),direction:cEe(u.dir)};var u})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=cM(n,e.limit);var a,l;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(l=e.endAt).inclusive,values:l.position}),t}function u4(n){let e=function(n){const e=i4(n);return 4===e.length?ke.emptyPath():o4(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){H(1===r);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(u){const d=d4(u);return d instanceof je&&Qx(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(u=>{return new tu(cu((d=u).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,gf(d)?null:d}(t.limit));let l=null;var u;t.startAt&&(l=new Mo((u=t.startAt).values||[],!!u.before));let c=null;return t.endAt&&(c=function(u){return new Mo(u.values||[],!u.before)}(t.endAt)),function(n,e,t,r,i,s,o,a){return new Fs(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",l,c)}function d4(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cu(e.unaryFilter.field);return Ie.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=cu(e.unaryFilter.field);return Ie.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=cu(e.unaryFilter.field);return Ie.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=cu(e.unaryFilter.field);return Ie.create(s,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(n):void 0!==n.fieldFilter?Ie.create(cu((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return je.create(e.compositeFilter.filters.map(t=>d4(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return B()}}(e.compositeFilter.op))}(n):B();var e}function cEe(n){return eEe[n]}function uEe(n){return tEe[n]}function dEe(n){return nEe[n]}function ko(n){return{fieldPath:n.canonicalString()}}function cu(n){return Nt.fromServerFormat(n.fieldPath)}function h4(n){return n instanceof Ie?function(e){if("=="===e.op){if(uq(e.value))return{unaryFilter:{field:ko(e.field),op:"IS_NAN"}};if(cq(e.value))return{unaryFilter:{field:ko(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(uq(e.value))return{unaryFilter:{field:ko(e.field),op:"IS_NOT_NAN"}};if(cq(e.value))return{unaryFilter:{field:ko(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(e.field),op:uEe(e.op),value:e.value}}}(n):n instanceof je?function(e){const t=e.getFilters().map(r=>h4(r));return 1===t.length?t[0]:{compositeFilter:{op:dEe(e.op),filters:t}}}(n):B()}function hEe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function f4(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Bs{constructor(e,t,r,i,s=z.min(),o=z.min(),a=tn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class p4{constructor(e){this.fe=e}}function pM(n){const e=u4({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gy(e,e.limit,"L"):e}class Za{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(St(e.integerValue));else if("doubleValue"in e){const r=St(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),mf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Os(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?dq(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):B()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),R.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Za.Ve=new Za;class EEe{constructor(){this.rn=new wM}addToCollectionParentIndex(e,t){return this.rn.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(Mr.min())}updateCollectionGroup(e,t,r){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class wM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ot(ke.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ot(ke.comparator)).toArray()}}new Uint8Array(0);class Un{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(41943040,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);class el{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new el(0)}static Mn(){return new el(-1)}}class MEe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class U4{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Sf(r.mutation,i,fr.empty(),mt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){const i=Ki();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=If();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ki();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=pr();const o=Tf(),a=Tf();return t.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(void 0===u||u.mutation instanceof Vs)?s=s.insert(c.key,c):void 0!==u?(o.set(c.key,u.mutation.getFieldMask()),Sf(u.mutation,c,u.mutation.getFieldMask(),mt.now())):o.set(c.key,fr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new MEe(u,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Tf();let i=new Je((o,a)=>o-a),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let u=r.get(l)||fr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||ue()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=Pq();u.forEach(h=>{if(!s.has(h)){const f=$q(t.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return w.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return R.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):w.resolve(Ki());let a=-1,l=s;return o.next(c=>w.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?w.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ue())).next(u=>({batchId:a,changes:Rq(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new R(t)).next(r=>{let i=If();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=If();return this.indexManager.getCollectionParents(e,i).next(o=>w.forEach(o,a=>{const l=(c=t,u=a.child(i),new Fs(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,u;return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();null===s.get(c)&&(s=s.insert(c,at.newInvalidDocument(c)))});let o=If();return s.forEach((a,l)=>{const c=i.get(a);void 0!==c&&Sf(c.mutation,l,fr.empty(),mt.now()),Cf(t,l)&&(o=o.insert(a,l))}),o})}}class kEe{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return w.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Ot(r.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:pM(r.bundledQuery),readTime:Ot(r.readTime)}),w.resolve();var r}}class REe{constructor(){this.overlays=new Je(R.comparator),this.ls=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ki();return w.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),w.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),w.resolve()}getOverlaysForCollection(e,t,r){const i=Ki(),s=t.length+1,o=new R(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return w.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Je((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=s.get(c.largestBatchId);null===u&&(u=Ki(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ki(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return w.resolve(a)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oM(t,r));let s=this.ls.get(t);void 0===s&&(s=ue(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class EM{constructor(){this.fs=new ot(pn.ds),this.ws=new ot(pn._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new pn(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new pn(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new R(new ke([])),r=new pn(t,e),i=new pn(t,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new R(new ke([])),r=new pn(t,e),i=new pn(t,e+1);let s=ue();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new pn(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pn{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return R.comparator(e.key,t.key)||ne(e.As,t.As)}static _s(e,t){return ne(e.As,t.As)||R.comparator(e.key,t.key)}}class PEe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ot(pn.ds)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const o=new iM(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new pn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,t){return w.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pn(t,0),i=new pn(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ot(ne);return t.forEach(i=>{const s=new pn(i,0),o=new pn(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),w.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;R.isDocumentKey(s)||(s=s.child(""));const o=new pn(new R(s),0);let a=new ot(ne);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.As)),!0)},o),w.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){H(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return w.forEach(t.mutations,i=>{const s=new pn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new pn(t,0),i=this.Rs.firstAfterOrEqual(r);return w.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return w.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class NEe{constructor(e){this.Ds=e,this.docs=new Je(R.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return w.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=pr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():at.newInvalidDocument(i))}),w.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=pr();const o=t.path,a=new R(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||$x(KW(u),r)<=0||(i.has(u.key)||Cf(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return w.resolve(s)}getAllFromCollectionGroup(e,t,r,i){B()}Cs(e,t){return w.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new OEe(this)}getSize(e){return w.resolve(this.size)}}class OEe extends class{constructor(){this.changes=new Ls(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?w.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),w.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class FEe{constructor(e){this.persistence=e,this.xs=new Ls(t=>Ga(t),Ef),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Ns=0,this.ks=new EM,this.targetCount=0,this.Ms=el.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),w.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new el(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.Fn(t),w.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),w.waitFor(s).next(()=>i)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return w.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),w.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),w.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return w.resolve(r)}containsKey(e,t){return w.resolve(this.ks.containsKey(t))}}class bM{constructor(e,t){this.$s={},this.overlays={},this.Os=new kr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new FEe(this),this.indexManager=new EEe,this.remoteDocumentCache=new NEe(r=>this.referenceDelegate.Ls(r)),this.serializer=new p4(t),this.qs=new kEe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new REe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new PEe(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){S("MemoryPersistence","Starting transaction:",e);const i=new LEe(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return w.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class LEe extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class sv{constructor(e){this.persistence=e,this.Qs=new EM,this.js=null}static zs(e){return new sv(e)}get Ws(){if(this.js)return this.js;throw B()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),w.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),w.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Ws,r=>{const i=R.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,z.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return w.or([()=>w.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class DM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=ue(),i=ue();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new DM(e,t.fromCache,r,i)}}class $4{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(Sq(t))return w.resolve(null);let r=nr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Gy(t,null,"F"),r=nr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ue(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ji(t,a);return this.zi(t,c,o,l.readTime)?this.Ki(e,Gy(t,null,"F")):this.Wi(e,c,t,l)}))})))}Gi(e,t,r,i){return Sq(t)||i.isEqual(z.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(t,s);return this.zi(t,o,r,i)?this.Qi(e,t):(Bx()<=Ce.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tM(t)),this.Wi(e,o,t,function(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=z.fromTimestamp(1e9===r?new mt(t+1,0):new mt(t,r));return new Mr(i,R.empty(),e)}(i,-1)))})}ji(e,t){let r=new ot(Mq(e));return t.forEach((i,s)=>{Cf(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return Bx()<=Ce.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",tM(t)),this.Ui.getDocumentsMatchingQuery(e,t,Mr.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class BEe{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Je(ne),this.Yi=new Ls(s=>Ga(s),Ef),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U4(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function z4(n,e){return SM.apply(this,arguments)}function SM(){return SM=_(function*(n,e){const t=N(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ue();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}),SM.apply(this,arguments)}function UEe(n,e){const t=N(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=w.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=l.docVersions.get(f);H(null!==g),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ue();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function G4(n){const e=N(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function jEe(n,e){const t=N(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(t.Bs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Bs.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;null!==e.targetMismatches.get(d)?f=f.withResumeToken(tn.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),g=f,m=u,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(t.Bs.updateTargetData(s,f))});let l=pr(),c=ue();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(function(n,e,t){let r=ue(),i=ue();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=pr();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):S("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(u=>{l=u.nr,c=u.sr})),!r.isEqual(z.min())){const u=t.Bs.getLastRemoteSnapshotVersion(s).next(d=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ji=i,s))}function $Ee(n,e){const t=N(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hu(n,e){const t=N(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,w.resolve(i)):t.Bs.allocateTargetId(r).next(o=>(i=new Bs(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function fu(n,e,t){return AM.apply(this,arguments)}function AM(){return AM=_(function*(n,e,t){const r=N(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Io(o))throw o;S("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),AM.apply(this,arguments)}function lv(n,e,t){const r=N(n);let i=z.min(),s=ue();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=N(a),d=u.Yi.get(c);return void 0!==d?w.resolve(u.Ji.get(d)):u.Bs.getTargetData(l,c)}(r,o,nr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,t?i:z.min(),t?s:ue())).next(a=>(function(n,e,t){let r=n.Xi.get(e)||z.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}(r,function(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ir:s})))}class PM{constructor(){this.activeTargetIds=Hwe}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z4{constructor(){this.Hr=new PM,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new PM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class GEe{Yr(e){}shutdown(){}}class J4{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dv=null;function OM(){return null===dv?dv=268435456+Math.round(2147483648*Math.random()):dv++,"0x"+dv.toString(16)}const WEe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qEe{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const jn="WebChannelConnection";class KEe extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const o=OM(),a=this.To(e,t);S("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const l={};return this.Eo(l,i,s),this.Ao(e,a,l,r).then(c=>(S("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw _i("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}vo(e,t,r,i,s,o){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${WEe[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=OM();return new Promise((o,a)=>{const l=new Wve;l.setWithCredentials(!0),l.listenOnce(Hve.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vx.NO_ERROR:const u=l.getResponseJson();S(jn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Vx.TIMEOUT:S(jn,`RPC '${e}' ${s} timed out`),a(new T(C.DEADLINE_EXCEEDED,"Request time out"));break;case Vx.HTTP_ERROR:const d=l.getStatus();if(S(jn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=null==h?void 0:h.error;if(f&&f.status&&f.message){const p=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(m)>=0?m:C.UNKNOWN}(f.status);a(new T(p,f.message))}else a(new T(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new T(C.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{S(jn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);S(jn,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Ro(e,t,r){const i=OM(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jve(),a=$ve(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new Gve({})),this.Eo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=s.join("");S(jn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,f=!1;const p=new qEe({ro:m=>{f?S(jn,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(S(jn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),S(jn,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},oo:()=>d.close()}),g=(m,v,y)=>{m.listen(v,I=>{try{y(I)}catch(x){setTimeout(()=>{throw x},0)}})};return g(d,ky.EventType.OPEN,()=>{f||S(jn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,ky.EventType.CLOSE,()=>{f||(f=!0,S(jn,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,ky.EventType.ERROR,m=>{f||(f=!0,_i(jn,`RPC '${e}' stream ${i} transport errored:`,m),p.wo(new T(C.UNAVAILABLE,"The operation could not be completed")))}),g(d,ky.EventType.MESSAGE,m=>{var v;if(!f){const y=m.data[0];H(!!y);const I=y,x=I.error||(null===(v=I[0])||void 0===v?void 0:v.error);if(x){S(jn,`RPC '${e}' stream ${i} received error:`,x);const $=x.status;let W=function(yt){const Wt=zt[yt];if(void 0!==Wt)return Kq(Wt)}($),pe=x.message;void 0===W&&(W=C.INTERNAL,pe="Unknown error status: "+$+" with message "+x.message),f=!0,p.wo(new T(W,pe)),d.close()}else S(jn,`RPC '${e}' stream ${i} received:`,y),p._o(y)}}),g(a,zve.STAT_EVENT,m=>{m.stat===jW.PROXY?S(jn,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===jW.NOPROXY&&S(jn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function hv(){return"undefined"!=typeof document?document:null}function $f(n){return new rEe(n,!0)}class FM{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&S("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class t3{constructor(e,t,r,i,s,o,a,l){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new FM(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return _(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return _(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return _(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===C.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new T(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(_(function*(){e.state=0,e.start()}))}tu(e){return S("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QEe extends t3{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:B(),i=e.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(H(void 0===c||"string"==typeof c),tn.fromBase64String(c||"")):(H(void 0===c||c instanceof Uint8Array),tn.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=void 0===l.code?C.UNKNOWN:Kq(l.code);return new T(c,l.message||"")}(o);t=new Jq(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Qi(n,r.document.name),s=Ot(r.document.updateTime),o=r.document.createTime?Ot(r.document.createTime):z.min(),a=new An({mapValue:{fields:r.document.fields}}),l=at.newFoundDocument(i,s,o,a);t=new Yy(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Qi(n,r.document),s=r.readTime?Ot(r.readTime):z.min(),o=at.newNoDocument(i,s);t=new Yy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Qi(n,r.document);t=new Yy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return B();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Xwe(i,s);t=new Zq(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return z.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?z.min():s.readTime?Ot(s.readTime):z.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Rf(this.serializer),t.addTarget=function(i,s){let o;const a=s.target;if(o=$y(a)?{documents:c4(i,a)}:{query:fM(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=r4(i,s.resumeToken);const l=cM(i,s.expectedCount);null!==l&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(z.min())>0){o.readTime=lu(i,s.snapshotVersion.toTimestamp());const l=cM(i,s.expectedCount);null!==l&&(o.expectedCount=l)}return o}(this.serializer,e);const r=function(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Rf(this.serializer),t.removeTarget=e,this.Wo(t)}}class YEe extends t3{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(H(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(n,e){return n&&n.length>0?(H(void 0!==e),n.map(t=>function(r,i){let s=Ot(r.updateTime?r.updateTime:i);return s.isEqual(z.min())&&(s=Ot(i)),new qwe(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ot(e.commitTime);return this.listener.cu(r,t)}return H(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Rf(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function(n,e){let t;if(e instanceof ou)t={update:a4(n,e.key,e.value)};else if(e instanceof au)t={delete:kf(n,e.key)};else if(e instanceof Vs)t={update:a4(n,e.key,e.data),updateMask:hEe(e.fieldMask)};else{if(!(e instanceof rM))return B();t={verify:kf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof iu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof qa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ka)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof su)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw B()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:iEe(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:B()),t;var i}(this.serializer,r))};this.Wo(t)}}class XEe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new T(C.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(C.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(C.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class JEe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Pt(t),this.mu=!1):S("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class ebe{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(_(function*(){var l;Oo(o)&&(S("RemoteStore","Restarting streams for network reachability change."),yield(l=_(function*(c){const u=N(c);u.vu.add(4),yield pu(u),u.bu.set("Unknown"),u.vu.delete(4),yield Hf(u)}),function(c){return l.apply(this,arguments)})(o))}))}),this.bu=new JEe(r,i)}}function Hf(n){return VM.apply(this,arguments)}function VM(){return VM=_(function*(n){if(Oo(n))for(const e of n.Ru)yield e(!0)}),VM.apply(this,arguments)}function pu(n){return BM.apply(this,arguments)}function BM(){return BM=_(function*(n){for(const e of n.Ru)yield e(!1)}),BM.apply(this,arguments)}function fv(n,e){const t=N(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),$M(t)?jM(t):mu(t).Ko()&&UM(t,e))}function zf(n,e){const t=N(n),r=mu(t);t.Au.delete(e),r.Ko()&&n3(t,e),0===t.Au.size&&(r.Ko()?r.jo():Oo(t)&&t.bu.set("Unknown"))}function UM(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mu(n).su(e)}function n3(n,e){n.Vu.qt(e),mu(n).iu(e)}function jM(n){n.Vu=new Jwe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),mu(n).start(),n.bu.gu()}function $M(n){return Oo(n)&&!mu(n).Uo()&&n.Au.size>0}function Oo(n){return 0===N(n).vu.size}function r3(n){n.Vu=void 0}function tbe(n){return HM.apply(this,arguments)}function HM(){return HM=_(function*(n){n.Au.forEach((e,t)=>{UM(n,e)})}),HM.apply(this,arguments)}function nbe(n,e){return zM.apply(this,arguments)}function zM(){return zM=_(function*(n,e){r3(n),$M(n)?(n.bu.Iu(e),jM(n)):n.bu.set("Unknown")}),zM.apply(this,arguments)}function rbe(n,e,t){return GM.apply(this,arguments)}function GM(){return GM=_(function*(n,e,t){if(n.bu.set("Online"),e instanceof Jq&&2===e.state&&e.cause)try{yield(r=_(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){S("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pv(n,r)}else if(e instanceof Yy?n.Vu.Ht(e):e instanceof Zq?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(z.min()))try{const r=yield G4(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(l);c&&i.Au.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(tn.EMPTY_BYTE_STRING,c.snapshotVersion)),n3(i,a);const u=new Bs(c.target,a,l,c.sequenceNumber);UM(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){S("RemoteStore","Failed to raise snapshot:",r),yield pv(n,r)}var r}),GM.apply(this,arguments)}function pv(n,e,t){return WM.apply(this,arguments)}function WM(){return WM=_(function*(n,e,t){if(!Io(e))throw e;n.vu.add(1),yield pu(n),n.bu.set("Offline"),t||(t=()=>G4(n.localStore)),n.asyncQueue.enqueueRetryable(_(function*(){S("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Hf(n)}))}),WM.apply(this,arguments)}function s3(n,e){return e().catch(t=>pv(n,t,e))}function gu(n){return qM.apply(this,arguments)}function qM(){return qM=_(function*(n){const e=N(n),t=Fo(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;ibe(e);)try{const i=yield $Ee(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,sbe(e,i)}catch(i){yield pv(e,i)}o3(e)&&a3(e)}),qM.apply(this,arguments)}function ibe(n){return Oo(n)&&n.Eu.length<10}function sbe(n,e){n.Eu.push(e);const t=Fo(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function o3(n){return Oo(n)&&!Fo(n).Uo()&&n.Eu.length>0}function a3(n){Fo(n).start()}function obe(n){return KM.apply(this,arguments)}function KM(){return KM=_(function*(n){Fo(n).hu()}),KM.apply(this,arguments)}function abe(n){return QM.apply(this,arguments)}function QM(){return QM=_(function*(n){const e=Fo(n);for(const t of n.Eu)e.uu(t.mutations)}),QM.apply(this,arguments)}function lbe(n,e,t){return YM.apply(this,arguments)}function YM(){return YM=_(function*(n,e,t){const r=n.Eu.shift(),i=sM.from(r,e,t);yield s3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield gu(n)}),YM.apply(this,arguments)}function cbe(n,e){return XM.apply(this,arguments)}function XM(){return XM=_(function*(n,e){var t;e&&Fo(n).ou&&(yield(t=_(function*(r,i){if(qq(s=i.code)&&s!==C.ABORTED){const o=r.Eu.shift();Fo(r).Qo(),yield s3(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield gu(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),o3(n)&&a3(n)}),XM.apply(this,arguments)}function l3(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=_(function*(n,e){const t=N(n);t.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");const r=Oo(t);t.vu.add(3),yield pu(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Hf(t)}),ZM.apply(this,arguments)}function ek(){return ek=_(function*(n,e){const t=N(n);e?(t.vu.delete(2),yield Hf(t)):e||(t.vu.add(2),yield pu(t),t.bu.set("Unknown"))}),ek.apply(this,arguments)}function mu(n){return n.Su||(n.Su=function(e,t,r){const i=N(e);return i.fu(),new QEe(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:tbe.bind(null,n),ao:nbe.bind(null,n),nu:rbe.bind(null,n)}),n.Ru.push(function(){var e=_(function*(t){t?(n.Su.Qo(),$M(n)?jM(n):n.bu.set("Unknown")):(yield n.Su.stop(),r3(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Fo(n){return n.Du||(n.Du=function(e,t,r){const i=N(e);return i.fu(),new YEe(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:obe.bind(null,n),ao:cbe.bind(null,n),au:abe.bind(null,n),cu:lbe.bind(null,n)}),n.Ru.push(function(){var e=_(function*(t){t?(n.Du.Qo(),yield gu(n)):(yield n.Du.stop(),n.Eu.length>0&&(S("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class tk{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new tk(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _u(n,e){if(Pt("AsyncQueue",`${e}: ${n}`),Io(n))return new T(C.UNAVAILABLE,`${e}: ${n}`);throw n}class yu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||R.comparator(t.key,r.key):(t,r)=>R.comparator(t.key,r.key),this.keyedMap=If(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new yu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new yu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class c3{constructor(){this.Cu=new Je(R.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):B():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class vu{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new vu(e,t,yu.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ube{constructor(){this.Nu=void 0,this.listeners=[]}}class dbe{constructor(){this.queries=new Ls(e=>Aq(e),bf),this.onlineState="Unknown",this.ku=new Set}}function nk(n,e){return rk.apply(this,arguments)}function rk(){return rk=_(function*(n,e){const t=N(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new ube),i)try{s.Nu=yield t.onListen(r)}catch(o){const a=_u(o,`Initialization of query '${tM(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&ok(t)}),rk.apply(this,arguments)}function ik(n,e){return sk.apply(this,arguments)}function sk(){return sk=_(function*(n,e){const t=N(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),sk.apply(this,arguments)}function hbe(n,e){const t=N(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&ok(t)}function fbe(n,e,t){const r=N(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function ok(n){n.ku.forEach(e=>{e.next()})}class ak{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new vu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=vu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class h3{constructor(e){this.key=e}}class f3{constructor(e){this.key=e}}class p3{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ue(),this.mutatedKeys=ue(),this.tc=Mq(e),this.ec=new yu(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new c3,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=Cf(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.rc(h,f)||(r.track({type:2,doc:f}),m=!0,(l&&this.tc(f,l)>0||c&&this.tc(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(l||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return f(d)-f(h)}(c.type,u.type)||this.tc(c.doc,u.doc)),this.oc(r);const o=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,0!==s.length||l?{snapshot:new vu(this.query,e.ec,i,s,e.mutatedKeys,0===a,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new c3,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ue(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new f3(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new h3(r))}),t}hc(e){this.Yu=e.ir,this.Zu=ue();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return vu.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class mbe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _be{constructor(e){this.key=e,this.fc=!1}}class ybe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ls(a=>Aq(a),bf),this._c=new Map,this.mc=new Set,this.gc=new Je(R.comparator),this.yc=new Map,this.Ic=new EM,this.Tc={},this.Ec=new Map,this.Ac=el.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function vbe(n,e){return lk.apply(this,arguments)}function lk(){return lk=_(function*(n,e){const t=kk(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield hu(t.localStore,nr(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield ck(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&fv(t.remoteStore,o)}return i}),lk.apply(this,arguments)}function ck(n,e,t,r,i){return uk.apply(this,arguments)}function uk(){return uk=_(function*(n,e,t,r,i){n.Rc=(d,h,f)=>{return(p=_(function*(g,m,v,y){let I=m.view.sc(v);I.zi&&(I=yield lv(g.localStore,m.query,!1).then(({documents:W})=>m.view.sc(W,I)));const x=y&&y.targetChanges.get(m.targetId),$=m.view.applyChanges(I,g.isPrimaryClient,x);return wk(g,m.targetId,$.cc),$.snapshot}),function(g,m,v,y){return p.apply(this,arguments)})(n,d,h,f);var p};const s=yield lv(n.localStore,e,!0),o=new p3(e,s.ir),a=o.sc(s.documents),l=Mf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);wk(n,t,c.cc);const u=new mbe(e,t,o);return n.wc.set(e,u),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),c.snapshot}),uk.apply(this,arguments)}function wbe(n,e){return dk.apply(this,arguments)}function dk(){return dk=_(function*(n,e){const t=N(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!bf(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),zf(t.remoteStore,r.targetId),wu(t,r.targetId)}).catch(Co))):(wu(t,r.targetId),yield fu(t.localStore,r.targetId,!0))}),dk.apply(this,arguments)}function hk(){return hk=_(function*(n,e,t){const r=Rk(n);try{const i=yield function(s,o){const a=N(s),l=mt.now(),c=o.reduce((h,f)=>h.add(f.key),ue());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=pr(),p=ue();return a.Zi.getEntries(h,c).next(g=>{f=g,f.forEach((m,v)=>{v.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{u=g;const m=[];for(const v of o){const y=Qwe(v,u.get(v.key).overlayedDocument);null!=y&&m.push(new Vs(v.key,y,pq(y.value.mapValue),ht.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:Rq(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new Je(ne)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Us(r,i.changes),yield gu(r.remoteStore)}catch(i){const s=_u(i,"Failed to persist write");t.reject(s)}}),hk.apply(this,arguments)}function g3(n,e){return fk.apply(this,arguments)}function fk(){return fk=_(function*(n,e){const t=N(n);try{const r=yield jEe(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.yc.get(s);o&&(H(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?H(o.fc):i.removedDocuments.size>0&&(H(o.fc),o.fc=!1))}),yield Us(t,r,e)}catch(r){yield Co(r)}}),fk.apply(this,arguments)}function m3(n,e,t){const r=N(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=N(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.Mu(o)&&(l=!0)}),l&&ok(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bbe(n,e,t){return pk.apply(this,arguments)}function pk(){return pk=_(function*(n,e,t){const r=N(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new Je(R.comparator);o=o.insert(s,at.newNoDocument(s,z.min()));const a=ue().add(s),l=new xf(z.min(),new Map,new Je(ne),o,a);yield g3(r,l),r.gc=r.gc.remove(s),r.yc.delete(e),Ek(r)}else yield fu(r.localStore,e,!1).then(()=>wu(r,e,t)).catch(Co)}),pk.apply(this,arguments)}function Cbe(n,e){return gk.apply(this,arguments)}function gk(){return gk=_(function*(n,e){const t=N(n),r=e.batch.batchId;try{const i=yield UEe(t.localStore,e);vk(t,r,null),yk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Us(t,i)}catch(i){yield Co(i)}}),gk.apply(this,arguments)}function Ibe(n,e,t){return mk.apply(this,arguments)}function mk(){return mk=_(function*(n,e,t){const r=N(n);try{const i=yield function(s,o){const a=N(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(H(null!==u),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);vk(r,e,t),yk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Us(r,i)}catch(i){yield Co(i)}}),mk.apply(this,arguments)}function yk(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function vk(n,e,t){const r=N(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function wu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||_3(n,r)})}function _3(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(zf(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),Ek(n))}function wk(n,e,t){for(const r of t)r instanceof h3?(n.Ic.addReference(r.key,e),Dbe(n,r)):r instanceof f3?(S("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||_3(n,r.key)):B()}function Dbe(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(S("SyncEngine","New document in limbo: "+t),n.mc.add(r),Ek(n))}function Ek(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new R(ke.fromString(e)),r=n.Ac.next();n.yc.set(r,new _be(t)),n.gc=n.gc.insert(t,r),fv(n.remoteStore,new Bs(nr(ru(t.path)),r,"TargetPurposeLimboResolution",kr.ct))}}function Us(n,e,t){return bk.apply(this,arguments)}function bk(){return bk=_(function*(n,e,t){const r=N(n),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,l)=>{o.push(r.Rc(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,(null==c?void 0:c.fromCache)?"not-current":"current"),c){i.push(c);const u=DM.Li(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=_(function*(l,c){const u=N(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(c,h=>w.forEach(h.Fi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.Bi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Io(d))throw d;S("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=u.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);u.Ji=u.Ji.insert(h,g)}}}),function(l,c){return a.apply(this,arguments)})(r.localStore,s))}),bk.apply(this,arguments)}function Sbe(n,e){return Ck.apply(this,arguments)}function Ck(){return Ck=_(function*(n,e){const t=N(n);if(!t.currentUser.isEqual(e)){S("SyncEngine","User change. New user:",e.toKey());const r=yield z4(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(o=>{o.forEach(a=>{a.reject(new T(C.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Us(t,r.er)}var i}),Ck.apply(this,arguments)}function Abe(n,e){const t=N(n),r=t.yc.get(e);if(r&&r.fc)return ue().add(r.key);{let i=ue();const s=t._c.get(e);if(!s)return i;for(const o of s){const a=t.wc.get(o);i=i.unionWith(a.view.nc)}return i}}function kk(n){const e=N(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=g3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Abe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bbe.bind(null,e),e.dc.nu=hbe.bind(null,e.eventManager),e.dc.Pc=fbe.bind(null,e.eventManager),e}function Rk(n){const e=N(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cbe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ibe.bind(null,e),e}class gv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return _(function*(){t.serializer=$f(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(n,e,t,r){return new BEe(n,e,t,r)}(this.persistence,new $4,e.initialUser,this.serializer)}createPersistence(e){return new bM(sv.zs,this.serializer)}createSharedClientState(e){return new Z4}terminate(){var e=this;return _(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Eu{initialize(e,t){var r=this;return _(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>m3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Sbe.bind(null,r.syncEngine),yield function(n,e){return ek.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dbe}createDatastore(e){const t=$f(e.databaseInfo.databaseId),r=new KEe(e.databaseInfo);return new XEe(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>m3(this.syncEngine,a,0),o=J4.D()?new J4:new GEe,new ebe(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,l,c){const u=new ybe(r,i,s,o,a,l);return c&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=_(function*(t){const r=N(t);S("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield pu(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class mv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jbe{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hn.UNAUTHENTICATED,this.clientId=GW.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=_(function*(a){S("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(S("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return _(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=_u(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function _v(n,e){return Pk.apply(this,arguments)}function Pk(){return Pk=_(function*(n,e){n.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=_(function*(s){r.isEqual(s)||(yield z4(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Pk.apply(this,arguments)}function Nk(n,e){return Ok.apply(this,arguments)}function Ok(){return Ok=_(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Fk(n);S("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>l3(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>l3(e.remoteStore,s)),n._onlineComponents=e}),Ok.apply(this,arguments)}function C3(n){return"FirebaseError"===n.name?n.code===C.FAILED_PRECONDITION||n.code===C.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Fk(n){return Lk.apply(this,arguments)}function Lk(){return Lk=_(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){S("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _v(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!C3(t))throw t;_i("Error using user provided cache. Falling back to memory cache: "+t),yield _v(n,new gv)}}else S("FirestoreClient","Using default OfflineComponentProvider"),yield _v(n,new gv);return n._offlineComponents}),Lk.apply(this,arguments)}function yv(n){return Vk.apply(this,arguments)}function Vk(){return Vk=_(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(S("FirestoreClient","Using user provided OnlineComponentProvider"),yield Nk(n,n._uninitializedComponentsProvider._online)):(S("FirestoreClient","Using default OnlineComponentProvider"),yield Nk(n,new Eu))),n._onlineComponents}),Vk.apply(this,arguments)}function bu(n){return Uk.apply(this,arguments)}function Uk(){return Uk=_(function*(n){const e=yield yv(n),t=e.eventManager;return t.onListen=vbe.bind(null,e.syncEngine),t.onUnlisten=wbe.bind(null,e.syncEngine),t}),Uk.apply(this,arguments)}function x3(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const M3=new Map;function jk(n,e,t){if(!t)throw new T(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k3(n){if(!R.isDocumentKey(n))throw new T(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function R3(n){if(R.isDocumentKey(n))throw new T(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":B()}function Se(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new T(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wv(n);throw new T(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class N3{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new T(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(n,e,t,r){if(!0===e&&!0===r)throw new T(C.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=x3(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new T(C.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new T(C.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new T(C.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Kve;switch(t.type){case"firstParty":return new Zve(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new T(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=M3.get(e);t&&(S("ComponentProvider","Removing Datastore"),M3.delete(e),t.terminate())}(this),Promise.resolve()}}class Ft{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}}class xn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xn(this.firestore,e,this._query)}}class Yi extends xn{constructor(e,t,r){super(e,t,ru(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new R(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function Zbe(n,e,...t){if(n=Ct(n),jk("collection","path",e),n instanceof Gf){const r=ke.fromString(e,...t);return R3(r),new Yi(n,null,r)}{if(!(n instanceof Ft||n instanceof Yi))throw new T(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ke.fromString(e,...t));return R3(r),new Yi(n.firestore,null,r)}}function O3(n,e,...t){if(n=Ct(n),1===arguments.length&&(e=GW.A()),jk("doc","path",e),n instanceof Gf){const r=ke.fromString(e,...t);return k3(r),new Ft(n,null,new R(r))}{if(!(n instanceof Ft||n instanceof Yi))throw new T(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ke.fromString(e,...t));return k3(r),new Ft(n.firestore,n instanceof Yi?n.converter:null,new R(r))}}class Jbe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new FM(this,"async_queue_retry"),this.Xc=()=>{const t=hv();t&&S("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=hv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=hv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new en;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return _(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Io(t))throw t;S("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Pt("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=tk.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&B()}verifyOperationInProgress(){}sa(){var e=this;return _(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class lt extends Gf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jbe,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||L3(this),this._firestoreClient.terminate()}}function tCe(n,e){const r="string"==typeof n?n:e||"(default)",i=Cs("object"==typeof n?n:wh(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=b$("firestore");s&&function(n,e,t,r={}){var i;const s=(n=Se(n,Gf))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&_i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=hn.MOCK_USER;else{a=T$(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new T(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new hn(c)}n._authCredentials=new Qve(new HW(a,l))}}(i,...s)}return i}function Gt(n){return n._firestoreClient||L3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function L3(n){var e,t,r;const i=n._freezeSettings(),s=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Awe(n._databaseId,a,n._persistenceKey,(c=i).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,x3(c.experimentalLongPollingOptions),c.useFetchStreams));var a,c;n._firestoreClient=new jbe(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nl(tn.fromBase64String(e))}catch(t){throw new T(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nl(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new T(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hk{constructor(e){this._methodName=e}}class zk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}}const rCe=/^__.*__$/;class iCe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ou(e,this.data,t,this.fieldTransforms)}}class U3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function j3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}class Ev{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Ev(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Cv(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(j3(this.ca)&&rCe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class sCe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$f(e)}ya(e,t,r,i=!1){return new Ev({ca:e,methodName:t,ga:r,path:Nt.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iu(n){const e=n._freezeSettings(),t=$f(n._databaseId);return new sCe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Gk(n,e,t,r,i,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,i);qk("Data must be an object, but it was:",o,r);const a=W3(r,o);let l,c;if(s.merge)l=new fr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=Kf(e,d,t);if(!o.contains(h))throw new T(C.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);K3(u,h)||u.push(h)}l=new fr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new iCe(new An(a),l,c)}class qf extends Hk{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qf}}function rl(n,e){if(q3(n=Ct(n)))return qk("Unsupported field value:",e,n),W3(n,e);if(n instanceof Hk)return function(t,r){if(!j3(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let a=rl(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=Ct(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fq(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=mt.fromDate(t);return{timestampValue:lu(r.serializer,i)}}if(t instanceof mt){const i=new mt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:lu(r.serializer,i)}}if(t instanceof zk)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nl)return{bytesValue:r4(r.serializer,t._byteString)};if(t instanceof Ft){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${wv(t)}`)}(n,e)}function W3(n,e){const t={};return sq(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(n,(r,i)=>{const s=rl(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function q3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mt||n instanceof zk||n instanceof nl||n instanceof Ft||n instanceof Hk)}function qk(n,e,t){if(!q3(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=wv(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Kf(n,e,t){if((e=Ct(e))instanceof Cu)return e._internalPath;if("string"==typeof e)return bv(n,e);throw Cv("Field path arguments must be of type string or ",n,!1,void 0,t)}const cCe=new RegExp("[~\\*/\\[\\]]");function bv(n,e,t){if(e.search(cCe)>=0)throw Cv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cu(...e.split("."))._internalPath}catch(r){throw Cv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new T(C.INVALID_ARGUMENT,a+n+l)}function K3(n,e){return n.some(t=>t.isEqual(e))}class Kk{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uCe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Iv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uCe extends Kk{data(){return super.data()}}function Iv(n,e){return"string"==typeof e?bv(n,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}class il{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Du extends Kk{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Av(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Iv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Av extends Du{data(e={}){return super.data(e)}}class Su{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new il(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Av(this._firestore,this._userDataWriter,r.key,r,new il(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Av(r._firestore,r._userDataWriter,o.doc.key,o.doc,new il(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new Av(r._firestore,r._userDataWriter,o.doc.key,o.doc,new il(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:pCe(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pCe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}function gCe(n){n=Se(n,Ft);const e=Se(n.firestore,lt);return function(n,e,t={}){const r=new en;return n.asyncQueue.enqueueAndForget(_(function*(){return function(i,s,o,a,l){const c=new mv({next:d=>{s.enqueueAndForget(()=>ik(i,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new T(C.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&"server"===a.source?l.reject(new T(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new ak(ru(o.path),c,{includeMetadataChanges:!0,Ku:!0});return nk(i,u)}(yield bu(n),n.asyncQueue,e,t,r)})),r.promise}(Gt(e),n._key).then(t=>function(n,e,t){const r=t.docs.get(e._key),i=new Lo(n);return new Du(n,i,e._key,r,new il(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))}class Lo extends class{convertValue(e,t="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw B()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return To(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new zk(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_f(e));default:return null}}convertTimestamp(e){const t=Do(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ke.fromString(e);H(f4(r));const i=new Ha(r.get(1),r.get(3)),s=new R(r.popFirst(5));return i.isEqual(t)||Pt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}}function mCe(n){n=Se(n,xn);const e=Se(n.firestore,lt),t=Gt(e),r=new Lo(e);return function(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new T(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),function(n,e,t={}){const r=new en;return n.asyncQueue.enqueueAndForget(_(function*(){return function(i,s,o,a,l){const c=new mv({next:d=>{s.enqueueAndForget(()=>ik(i,u)),d.fromCache&&"server"===a.source?l.reject(new T(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new ak(o,c,{includeMetadataChanges:!0,Ku:!0});return nk(i,u)}(yield bu(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new Su(e,r,n,i))}function _Ce(n,e,t,...r){n=Se(n,Ft);const i=Se(n.firestore,lt),s=Iu(i);let o;return o="string"==typeof(e=Ct(e))||e instanceof Cu?function(n,e,t,r,i,s){const o=n.ya(1,e,t),a=[Kf(e,r,t)],l=[i];if(s.length%2!=0)throw new T(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Kf(e,s[h])),l.push(s[h+1]);const c=[],u=An.empty();for(let h=a.length-1;h>=0;--h)if(!K3(c,a[h])){const f=a[h];let p=l[h];p=Ct(p);const g=o.da(f);if(p instanceof qf)c.push(f);else{const m=rl(p,g);null!=m&&(c.push(f),u.set(f,m))}}const d=new fr(c);return new U3(u,d,o.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function(n,e,t,r){const i=n.ya(1,e,t);qk("Data must be an object, but it was:",i,r);const s=[],o=An.empty();To(r,(l,c)=>{const u=bv(e,l,t);c=Ct(c);const d=i.da(u);if(c instanceof qf)s.push(u);else{const h=rl(c,d);null!=h&&(s.push(u),o.set(u,h))}});const a=new fr(s);return new U3(o,a,i.fieldTransforms)}(s,"updateDoc",n._key,e),Yf(i,[o.toMutation(n._key,ht.exists(!0))])}function yCe(n){return Yf(Se(n.firestore,lt),[new au(n._key,ht.none())])}function vCe(n,e){const t=Se(n.firestore,lt),r=O3(n),i=function(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return Yf(t,[Gk(Iu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ht.exists(!1))]).then(()=>r)}function Yf(n,e){return function(t,r){const i=new en;return t.asyncQueue.enqueueAndForget(_(function*(){return function(n,e,t){return hk.apply(this,arguments)}(yield function(n){return yv(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(Gt(n),e)}!function(n,e=!0){Xc="9.23.0",Fn(new En("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),o=new lt(new Yve(t.getProvider("auth-internal")),new Jve(t.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new T(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ha(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),He($W,"3.13.0",n),He($W,"3.13.0","esm2017")}();class Mv{constructor(e){return e}}const r6="firestore",Zk=new j("angularfire2.firestore-instances");function PCe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Mv(r)}}const NCe={provide:class{constructor(){return Ih(r6)}},deps:[[new qe,Zk]]},OCe={provide:Mv,useFactory:function(n,e){const t=Ch(r6,n,e);return t&&new Mv(t)},deps:[[new qe,Zk],mo]};let FCe=(()=>{class n{constructor(){He("angularfire",go.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[OCe,NCe]}),n})();function LCe(n,...e){return{ngModule:FCe,providers:[{provide:Zk,useFactory:PCe(n),multi:!0,deps:[te,Pe,Th,Dh,[new qe,QA],[new qe,B_],...e]}]}}const VCe=Cn(vCe,!0),i6=Cn(Zbe,!0),BCe=Cn(yCe,!0),Jk=Cn(O3,!0),UCe=Cn(gCe,!0),jCe=Cn(mCe,!0),$Ce=Cn(tCe,!0),HCe=Cn(_Ce,!0);let eR=(()=>{class n{constructor(t){this.firestore=t}getMyNotes(t){const r=i6(this.firestore,"notes-"+t);return jCe(r)}getNoteById(t,r){const i=Jk(this.firestore,"notes-"+t,r);return UCe(i)}saveNote(t,r){const i=i6(this.firestore,"notes-"+t);return VCe(i,r)}updateNote(t,r,i){const s=Jk(this.firestore,"notes-"+t,i);return HCe(s,r)}deleteNote(t,r){const i=Jk(this.firestore,"notes-"+t,r);return BCe(i)}}return n.\u0275fac=function(t){return new(t||n)(E(Mv))},n.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zCe=(()=>{class n{constructor(t,r,i){this.credentialsService=t,this.authService=r,this.router=i,this.user={name:"",email:"",photo:""}}ngOnInit(){this.user=this.credentialsService.credentials}logOut(){this.authService.logOut().then(()=>{localStorage.removeItem("me"),this.router.navigate([""])})}}return n.\u0275fac=function(t){return new(t||n)(b(jh),b(TG),b(On))},n.\u0275cmp=Gn({type:n,selectors:[["app-user-bar"]],decls:5,vars:2,consts:[["alt","profile photo",1,"photo",3,"src"],[1,"fa-solid","fa-right-from-bracket",3,"click"]],template:function(t,r){1&t&&(X(0,"article"),on(1,"img",0),X(2,"p"),cr(3),J(),X(4,"i",1),it("click",function(){return r.logOut()}),J(),J()),2&t&&(Et(1),ub("src",r.user.photo,cg),Et(2),Dd("Hi, ",r.user.name,""))},styles:['article[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:25px;gap:25px}.photo[_ngcontent-%COMP%]{border-radius:50px;height:45px;width:45px;object-fit:contain}p[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;margin:0}i[_ngcontent-%COMP%]{cursor:pointer}']}),n})();const GCe=function(n){return["/edit/",n]};function WCe(n,e){if(1&n){const t=Cg();X(0,"article",8),X(1,"header"),X(2,"h3"),cr(3),J(),X(4,"button",9),it("click",function(i){const o=Cl(t).$implicit;return li(2).openDeleteDialog(o),i.stopPropagation()}),on(5,"i",10),J(),J(),X(6,"div",11),X(7,"p"),cr(8),J(),X(9,"div",12),cr(10," Tap the note to continue "),J(),J(),J()}if(2&n){const t=e.$implicit;Xt("routerLink",bL(3,GCe,t.id)),Et(3),Td(t.note_title),Et(5),Dd(" ",t.note_content," ")}}function qCe(n,e){if(1&n&&(X(0,"section",6),ai(1,WCe,11,5,"article",7),J()),2&n){const t=li();Et(1),Xt("ngForOf",t.notes)}}function KCe(n,e){1&n&&(X(0,"article",13),on(1,"mat-spinner",14),J()),2&n&&(Et(1),Xt("diameter",70))}const QCe=function(){return["/new-note"]};let YCe=(()=>{class n{constructor(t,r,i){this.firestoreService=t,this.credentialsService=r,this.dialog=i,this.userEmail="",this.notes=[],this.isLoading=!0}ngOnInit(){this.userEmail=this.credentialsService.credentials.email,this.getMyNotes()}getMyNotes(){var t=this;return _(function*(){t.notes=[],(yield t.firestoreService.getMyNotes(t.userEmail)).forEach(i=>{const s={id:i.id,note_content:i.data().note_content,note_title:i.data().note_title};t.notes.push(s)}),t.isLoading=!1})()}openDeleteDialog(t){this.dialog.open(Uye,{panelClass:"custom-dialog"}).afterClosed().subscribe(i=>{i&&(this.isLoading=!0,this.deleteNote(t))})}deleteNote(t){this.firestoreService.deleteNote(this.userEmail,t.id),this.getMyNotes()}}return n.\u0275fac=function(t){return new(t||n)(b(eR),b(jh),b(Xm))},n.\u0275cmp=Gn({type:n,selectors:[["app-my-notes"]],decls:9,vars:4,consts:[[1,"containerNotes"],[3,"routerLink"],[1,"green-btn"],[1,"fa-solid","fa-pencil"],["class","allNotes",4,"ngIf","ngIfElse"],["spinner",""],[1,"allNotes"],["class","notes",3,"routerLink",4,"ngFor","ngForOf"],[1,"notes",3,"routerLink"],[1,"delete-btn",3,"click"],[1,"fa-solid","fa-trash"],[1,"note-content"],[1,"edit"],[1,"spinner"],[3,"diameter"]],template:function(t,r){if(1&t&&(X(0,"section",0),on(1,"app-user-bar"),X(2,"a",1),X(3,"article",2),on(4,"i",3),cr(5," Create new note "),J(),J(),ai(6,qCe,2,1,"section",4),ai(7,KCe,2,1,"ng-template",null,5,kb),J()),2&t){const i=bd(8);Et(2),Xt("routerLink",function(n,e,t){const r=qn()+n,i=D();return i[r]===le?xi(i,r,t?e.call(t):e()):function(n,e){return n[e]}(i,r)}(3,QCe)),Et(4),Xt("ngIf",!r.isLoading)("ngIfElse",i)}},directives:[zCe,g_,Zg,BV,p_,Fi],styles:['.containerNotes[_ngcontent-%COMP%]{display:flex;margin:20px;flex-direction:column;align-items:center;grid-gap:15px;gap:15px}.allNotes[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;flex-direction:column;align-items:center;grid-gap:15px;gap:15px}.green-btn[_ngcontent-%COMP%]{height:74px}.green-btn[_ngcontent-%COMP%], .notes[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;background:linear-gradient(99.63deg,#C7EBB3 12.78%,rgba(199,235,179,0) 132.88%);border-radius:37px;display:flex;align-items:center;justify-content:center;grid-gap:10px;gap:10px;font-size:16px;cursor:pointer}a[_ngcontent-%COMP%]{width:80%;text-decoration:none;color:#000}.notes[_ngcontent-%COMP%]{width:80%;flex-direction:column;grid-gap:15px;gap:15px;padding:20px}.notes[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:space-between}.notes[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-family:"Poppins",sans-serif}.notes[_ngcontent-%COMP%]   .edit[_ngcontent-%COMP%]{color:#888;margin:7px 0 0 7px;padding:5px;border-radius:4px;border-left:3px solid #888888}.note-content[_ngcontent-%COMP%]{background:white;padding:16px;width:100%;border-radius:37px}.note-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden}.delete-btn[_ngcontent-%COMP%]{border-radius:50%;width:45px;height:45px;border:none;background:white;font-size:16px}h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}.spinner[_ngcontent-%COMP%]{padding:20px}']}),n})(),XCe=(()=>{class n{constructor(t,r,i){this.firestoreService=t,this.credentialsService=r,this._snackBar=i,this.title="",this.noteContent="",this.userEmail=""}ngOnInit(){this.userEmail=this.credentialsService.credentials.email}saveNote(){var t=this;return _(function*(){const r={note_title:t.title,note_content:t.noteContent};yield t.firestoreService.saveNote(t.userEmail,r),t.openSnackBar()})()}openSnackBar(){this._snackBar.open("Note saved","",{duration:3e3})}}return n.\u0275fac=function(t){return new(t||n)(b(eR),b(jh),b(uj))},n.\u0275cmp=Gn({type:n,selectors:[["app-new-note"]],decls:7,vars:2,consts:[[1,"new-note"],["placeholder","Insert title","autosize","",1,"title",3,"ngModel","ngModelChange"],[1,"save-btn",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"content"],["placeholder","Insert your note content","autosize","",1,"content-input",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(X(0,"section",0),X(1,"header"),X(2,"textarea",1),it("ngModelChange",function(s){return r.title=s}),J(),X(3,"button",2),it("click",function(){return r.saveNote()}),on(4,"i",3),J(),J(),X(5,"section",4),X(6,"textarea",5),it("ngModelChange",function(s){return r.noteContent=s}),J(),J(),J()),2&t&&(Et(2),Xt("ngModel",r.title),Et(4),Xt("ngModel",r.noteContent))},directives:[Hd,cB,vC,pm],styles:['.new-note[_ngcontent-%COMP%]{padding:25px 20px;background:linear-gradient(99.63deg,#C7EBB3 12.78%,rgba(199,235,179,0) 132.88%);height:auto;display:flex;grid-gap:10px;gap:10px;flex-direction:column}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;grid-gap:30px;gap:30px}.title[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-size:18px;margin:0}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:none;background:none;resize:none;width:100%}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, .textarea[_ngcontent-%COMP%]:focus{outline:none}.textarea[_ngcontent-%COMP%]{display:block;width:100%;line-height:30px;resize:both}.textarea[contenteditable][_ngcontent-%COMP%]:empty:before{content:"Insert title";color:gray}.content[_ngcontent-%COMP%]{background:white;font-family:"Poppins",sans-serif;border-radius:40px;height:auto;min-height:100%;padding:25px 20px}.content-input[_ngcontent-%COMP%]{width:100%;min-height:100%;height:auto;font-family:"Poppins",sans-serif;font-size:16px}.save-btn[_ngcontent-%COMP%]{background:rgba(255,255,255,.7);width:40px;height:40px;border-radius:50%;border:none;font-size:20px}']}),n})();function ZCe(n,e){if(1&n){const t=Cg();X(0,"section",2),X(1,"header"),X(2,"textarea",3),it("ngModelChange",function(i){return Cl(t),li().title=i}),J(),X(3,"button",4),it("click",function(){return Cl(t),li().updateNote()}),on(4,"i",5),J(),J(),X(5,"section",6),X(6,"textarea",7),it("ngModelChange",function(i){return Cl(t),li().noteContent=i}),J(),J(),J()}if(2&n){const t=li();Et(2),Xt("ngModel",t.title),Et(4),Xt("ngModel",t.noteContent)}}function JCe(n,e){1&n&&(X(0,"article",8),on(1,"mat-spinner",9),J()),2&n&&(Et(1),Xt("diameter",70))}const eIe=[{path:"",component:Bye},{path:"my-notes",component:YCe},{path:"new-note",component:XCe},{path:"edit/:id",component:(()=>{class n{constructor(t,r,i){this.firestoreService=t,this.credentialsService=r,this._snackBar=i,this.title="",this.noteContent="",this.userEmail="",this.noteId="",this.isLoading=!0}ngOnInit(){this.userEmail=this.credentialsService.credentials.email,this.getNoteById()}getNoteById(){var t=this;return _(function*(){t.noteId=window.location.pathname.replace("/edit/","");const r=yield t.firestoreService.getNoteById(t.userEmail,t.noteId);r.exists()?(t.title=r.data().note_title,t.noteContent=r.data().note_content,t.isLoading=!1):console.log("No existe ese documento")})()}updateNote(){this.firestoreService.updateNote(this.userEmail,{note_title:this.title,note_content:this.noteContent},this.noteId),this.openSnackBar()}openSnackBar(){this._snackBar.open("Note saved","",{duration:3e3})}}return n.\u0275fac=function(t){return new(t||n)(b(eR),b(jh),b(uj))},n.\u0275cmp=Gn({type:n,selectors:[["app-edit"]],decls:3,vars:2,consts:[["class","new-note",4,"ngIf","ngIfElse"],["spinner",""],[1,"new-note"],["placeholder","Insert title","autosize","",1,"title",3,"ngModel","ngModelChange"],[1,"save-btn",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"content"],["placeholder","Insert your note content","autosize","",1,"content-input",3,"ngModel","ngModelChange"],[1,"spinner"],[3,"diameter"]],template:function(t,r){if(1&t&&(ai(0,ZCe,7,2,"section",0),ai(1,JCe,2,1,"ng-template",null,1,kb)),2&t){const i=bd(2);Xt("ngIf",!r.isLoading)("ngIfElse",i)}},directives:[Zg,Hd,cB,vC,pm,Fi],styles:['.new-note[_ngcontent-%COMP%]{padding:25px 20px;background:linear-gradient(99.63deg,#C7EBB3 12.78%,rgba(199,235,179,0) 132.88%);height:auto;display:flex;grid-gap:10px;gap:10px;flex-direction:column}header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;grid-gap:30px;gap:30px}.title[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;font-size:18px;margin:0}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:none;background:none;resize:none;width:100%}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, .textarea[_ngcontent-%COMP%]:focus{outline:none}.textarea[_ngcontent-%COMP%]{display:block;width:100%;line-height:30px;resize:both}.textarea[contenteditable][_ngcontent-%COMP%]:empty:before{content:"Insert title";color:gray}.content[_ngcontent-%COMP%]{background:white;font-family:"Poppins",sans-serif;border-radius:40px;height:auto;min-height:100%;padding:25px 20px}.content-input[_ngcontent-%COMP%]{width:100%;min-height:100%;height:auto;font-family:"Poppins",sans-serif;font-size:16px}.save-btn[_ngcontent-%COMP%]{background:rgba(255,255,255,.7);width:40px;height:40px;border-radius:50%;border:none;font-size:20px}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:45px}']}),n})()}];let tIe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({imports:[[p$.forRoot(eIe)],p$]}),n})(),nIe=(()=>{class n{constructor(){this.title="labNotes"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Gn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&on(0,"router-outlet")},directives:[QI],styles:[""]}),n})();const tR_firebase={projectId:"labnotes-luva",appId:"1:697079395685:web:7e0dc0ffc7dc56cc199d8c",storageBucket:"labnotes-luva.appspot.com",apiKey:"AIzaSyCFXj0uBvIZhmElvTsw9SRnqY_t0fZJnLk",authDomain:"labnotes-luva.firebaseapp.com",messagingSenderId:"697079395685",measurementId:"G-1NLMNNFN3E"};class iIe extends ze{constructor(){super(...arguments),this.activeGroups=0,this.teardownAttempted=!1}unsubscribe(){this.teardownAttempted=!0,0===this.activeGroups&&super.unsubscribe()}}class Xf{constructor(e){return e}}const s6="analytics",o6=k_.async,aIe=Cn(cpe,!0),lIe=Cn(zH,!0),cIe=Cn(hpe,!0);let nR=(()=>{class n{constructor(t,r,i){let s;this.disposables=[],He("angularfire",go.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),o6().then(()=>{const o=i.get(Xf);o?this.disposables=[Oye(t).subscribe(a=>{cIe(o,null==a?void 0:a.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(E(Uh),E(te),E(Pe))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const a6="firebase_screen_id",rR="outlet",Zf="screen_class",l6="screen_name";let EIe=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const iR={},bIe=n=>{const e=[n[Zf],n[rR]].join("#");if(iR.hasOwnProperty(e))return iR[e];{const t=EIe++;return iR[e]=t,t}},CIe=(n,e,t)=>n.events.pipe($t(i=>i instanceof Ej)).pipe(Sr(i=>{var s;const a=(null===(s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===s?void 0:s.toString())||"",l=n.routerState.root.children.map(f=>f).find(f=>f.outlet===i.snapshot.outlet);if(!l)return Q(null);let c=l;for(;c.firstChild;)c=c.firstChild;const u=c.pathFromRoot.map(f=>{var p;return null===(p=f.routeConfig)||void 0===p?void 0:p.path}).filter(f=>f).join("/")||"/",d={[l6]:u,page_path:`/${a}`,firebase_event_origin:"auto",firebase_screen:u,[rR]:i.snapshot.outlet};e&&(d.page_title=e.getTitle());let h=l.component;if(h){if(h===YI){let f=i.snapshot;for(;f.firstChild;)f=f.firstChild;h=f.component}}else h=i.snapshot.component;if("string"==typeof h)return Q(Object.assign(Object.assign({},d),{[Zf]:h}));if(h){const f=t.resolveComponentFactory(h);return Q(Object.assign(Object.assign({},d),{[Zf]:f.selector}))}return Q(null)}),$t(i=>!!i),_e(i=>Object.assign({firebase_screen_class:i[Zf],[a6]:bIe(i)},i)),function(n,e,t,r){return nt((i,s)=>{let o;e&&"function"!=typeof e?({duration:t,element:o,connector:r}=e):o=e;const a=new Map,l=h=>{a.forEach(h),h(s)},c=h=>l(f=>f.error(h)),u=new iIe(s,h=>{try{const f=n(h);let p=a.get(f);if(!p){a.set(f,p=r?r():new Te);const g=function(h,f){const p=new Ae(g=>{u.activeGroups++;const m=f.subscribe(g);return()=>{m.unsubscribe(),0==--u.activeGroups&&u.teardownAttempted&&u.unsubscribe()}});return p.key=h,p}(f,p);if(s.next(g),t){const m=new ze(p,()=>{p.complete(),null==m||m.unsubscribe()},void 0,void 0,()=>a.delete(f));u.add(sr(t(g)).subscribe(m))}}p.next(o?o(h):h)}catch(f){c(f)}},()=>l(h=>h.complete()),c,()=>a.clear());i.subscribe(u)})}(i=>i[rR]),Mt(i=>i.pipe(bB((s,o)=>JSON.stringify(s)===JSON.stringify(o)),Qm(void 0),nt((n,e)=>{let t,r=!1;n.subscribe(new ze(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))}),_e(([s,o])=>s?Object.assign({firebase_previous_class:s[Zf],firebase_previous_screen:s[l6],firebase_previous_id:s[a6]},o):o))));let c6=(()=>{class n{constructor(t,r,i,s,o,a){He("angularfire",go.full,"screen-tracking"),o6().then(()=>{const l=a.get(Xf);!t||!l||s.runOutsideAngular(()=>{this.disposable=CIe(t,r,i).pipe(Sr(c=>function(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){return o&&(yield o.initialized),lIe(l,"screen_view",c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(E(On,8),E(s2,8),E(ds),E(te),E(nR,8),E(Pe))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();const sR=new j("angularfire2.analytics-instances");function TIe(n){return(e,t)=>{if(!k_.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new Xf(r)}}const DIe={provide:class{constructor(){return Ih(s6)}},deps:[[new qe,sR]]},SIe={provide:Xf,useFactory:function(n,e){if(!k_.sync())return null;const t=Ch(s6,n,e);return t&&new Xf(t)},deps:[[new qe,sR],mo]};let AIe=(()=>{class n{constructor(t,r){He("angularfire",go.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(E(c6,8),E(nR,8))},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[SIe,DIe,{provide:uc,useValue:k_.async,multi:!0}]}),n})();function xIe(n,...e){return{ngModule:AIe,providers:[{provide:sR,useFactory:TIe(n),multi:!0,deps:[te,Pe,Th,Dh,...e]}]}}const u6="@firebase/database";let oR="";class kIe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:yh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class RIe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return bs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const h6=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kIe(e)}}catch(e){}return new RIe},sl=h6("localStorage"),aR=h6("sessionStorage"),Au=new Ta("@firebase/database"),f6=function(){let n=1;return function(){return n++}}(),p6=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,P(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new Xce;t.update(e);const r=t.digest();return m_.encodeByteArray(r)},Jf=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Jf.apply(null,r):e+="object"==typeof r?wn(r):r,e+=" "}return e};let ol=null,g6=!0;const gn=function(...n){if(!0===g6&&(g6=!1,null===ol&&!0===aR.get("logging_enabled")&&function(n,e){P(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Au.logLevel=Ce.VERBOSE,ol=Au.log.bind(Au),e&&aR.set("logging_enabled",!0)):"function"==typeof n?ol=n:(ol=null,aR.remove("logging_enabled"))}(!0)),ol){const e=Jf.apply(null,n);ol(e)}},ep=function(n){return function(...e){gn(n,...e)}},lR=function(...n){const e="FIREBASE INTERNAL ERROR: "+Jf(...n);Au.error(e)},Xi=function(...n){const e=`FIREBASE FATAL ERROR: ${Jf(...n)}`;throw Au.error(e),new Error(e)},$n=function(...n){const e="FIREBASE WARNING: "+Jf(...n);Au.warn(e)},kv=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Vo="[MIN_NAME]",js="[MAX_NAME]",al=function(n,e){if(n===e)return 0;if(n===Vo||e===js)return-1;if(e===Vo||n===js)return 1;{const t=v6(n),r=v6(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},OIe=function(n,e){return n===e?0:n<e?-1:1},tp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+wn(e))},cR=function(n){if("object"!=typeof n||null===n)return wn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=wn(e[r]),t+=":",t+=cR(n[e[r]]);return t+="}",t},_6=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const y6=function(n){P(!kv(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},BIe=new RegExp("^-?(0*)\\d{1,10}$"),v6=function(n){if(BIe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},xu=function(n){try{n()}catch(e){setTimeout(()=>{throw $n("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},np=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class HIe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zIe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(e)}}let rp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const I6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,S6="websocket",A6="long_polling";class dR{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function x6(n,e,t){let r;if(P("string"==typeof e,"typeof type must == string"),P("object"==typeof t,"typeof params must == object"),e===S6)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==A6)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return mn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class WIe{constructor(){this.counters_={}}incrementCounter(e,t=1){bs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Vce(this.counters_)}}const hR={},fR={};function pR(n){const e=n.toString();return hR[e]||(hR[e]=new WIe),hR[e]}class KIe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&xu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bo{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ep(e),this.stats_=pR(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),x6(t,A6,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new KIe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gR((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&I6.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bo.forceAllow_=!0}static forceDisallow(){Bo.forceDisallow_=!0}static isAvailable(){return!(!Bo.forceAllow_&&(Bo.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=wn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=v$(t),i=_6(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=wn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gR{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=f6(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gR.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){gn("frame writing exception"),a.stack&&gn(a.stack),gn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{gn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Pv=null;"undefined"!=typeof MozWebSocket?Pv=MozWebSocket:"undefined"!=typeof WebSocket&&(Pv=WebSocket);let Mu=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ep(this.connId),this.stats_=pR(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&I6.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),x6(t,S6,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sl.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Pv(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Pv&&!n.forceDisallow_}static previouslyFailed(){return sl.isInMemoryStorage||!0===sl.get("previous_websocket_failure")}markConnectionHealthy(){sl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=yh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(P(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=wn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=_6(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),F6=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bo,Mu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Mu&&Mu.isAvailable();let i=r&&!Mu.previouslyFailed();if(t.webSocketOnly&&(r||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Mu];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class H6{constructor(e,t,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ep("c:"+this.id+":"),this.transportManager_=new F6(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=np(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=tp("t",e),r=tp("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=tp("t",e),r=tp("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=tp("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?lR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),np(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):np(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class z6{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class G6{constructor(e){this.allowedEvents_=e,this.listeners_={},P(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){P(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Nv extends G6{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!iT()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Nv}getInitialEvent(e){return P("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ve{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Fe(){return new Ve("")}function ge(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Uo(n){return n.pieces_.length-n.pieceNum_}function Ke(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ve(n.pieces_,e)}function _R(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ip(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function K6(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ve(e,0)}function ft(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ve)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ve(t,0)}function me(n){return n.pieceNum_>=n.pieces_.length}function rr(n,e){const t=ge(n),r=ge(e);if(null===t)return e;if(t===r)return rr(Ke(n),Ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function yR(n,e){if(Uo(n)!==Uo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Zr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Uo(n)>Uo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class _Te{constructor(e,t){this.errorPrefix_=t,this.parts_=ip(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=C_(this.parts_[r]);Q6(this)}}function Q6(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ll(n))}function ll(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class vR extends G6{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new vR}getInitialEvent(e){return P("visible"===e,"Unknown event type: "+e),[this.visible_]}}const sp=1e3;let Fv,cl=(()=>{class n extends z6{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=ep("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=sp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Nv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(wn(o)),P(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new Rc,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),P(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),P(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&bs(t,"w")){const i=Pc(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=w_(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=w_(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),P(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+wn(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):lR("Unrecognized action received from server: "+wn(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){P(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=sp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=sp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return _(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,s())};t.realtime_={close:u,sendRequest:function(f){P(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?gn("getToken() completed but was canceled"):(gn("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,c=new H6(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,g=>{$n(g+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&$n(f),u())}}})()}interrupt(t){gn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){gn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],aT(this.interruptReasons_)&&(this.reconnectDelay_=sp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>cR(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Ve(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){gn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){gn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+oR.replace(/\./g,"-")]=1,iT()?t["framework.cordova"]=1:D$()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Nv.getInstance().currentlyOnline();return aT(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class we{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new we(e,t)}}class Ov{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new we(Vo,e),i=new we(Vo,t);return 0!==this.compare(r,i)}minPost(){return we.MIN}}class Z6 extends Ov{static get __EMPTY_NODE(){return Fv}static set __EMPTY_NODE(e){Fv=e}compare(e,t){return al(e.name,t.name)}isDefinedOn(e){throw kc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return we.MIN}maxPost(){return new we(js,Fv)}makePost(e,t){return P("string"==typeof e,"KeyIndex indexValue must always be a string."),new we(e,Fv)}toString(){return".key"}}const Zi=new Z6;class Lv{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let ER,vi=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:gr.EMPTY_NODE,this.right=null!=o?o:gr.EMPTY_NODE}copy(t,r,i,s,o){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return gr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return gr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class gr{constructor(e,t=gr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new gr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vi.BLACK,null,null))}remove(e){return new gr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vi.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Lv(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Lv(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Lv(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Lv(this.root_,null,this.comparator_,!0,e)}}function TTe(n,e){return al(n.name,e.name)}function wR(n,e){return al(n,e)}gr.EMPTY_NODE=new class{copy(e,t,r,i,s){return this}insert(e,t,r){return new vi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const J6=function(n){return"number"==typeof n?"number:"+y6(n):"string:"+n},e5=function(n){if(n.isLeafNode()){const e=n.val();P("string"==typeof e||"number"==typeof e||"object"==typeof e&&bs(e,".sv"),"Priority must be a string or number.")}else P(n===ER||n.isEmpty(),"priority of unexpected type.");P(n===ER||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let t5,n5,r5,ku=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,P(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),e5(this.priorityNode_)}static set __childrenNodeConstructor(t){t5=t}static get __childrenNodeConstructor(){return t5}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return me(t)?this:".priority"===ge(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ge(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(P(".priority"!==i||1===Uo(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ke(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+J6(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?y6(this.value_):this.value_,this.lazyHash_=p6(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(P(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return P(s>=0,"Unknown leaf type: "+r),P(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const et=new class extends Ov{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?al(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return we.MIN}maxPost(){return new we(js,new ku("[PRIORITY-POST]",r5))}makePost(e,t){const r=n5(e);return new we(t,new ku("[PRIORITY-POST]",r))}toString(){return".priority"}},MTe=Math.log(2);class kTe{constructor(e){this.count=parseInt(Math.log(e+1)/MTe,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Vv=function(n,e,t,r){n.sort(e);const i=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=n[l],h=t?t(d):d,new vi(h,d.node,vi.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),g=i(f+1,c);return d=n[f],h=t?t(d):d,new vi(h,d.node,vi.BLACK,p,g)}},a=function(l){let c=null,u=null,d=n.length;const h=function(p,g){const m=d-p,v=d;d-=p;const y=i(m+1,v),I=n[m],x=t?t(I):I;f(new vi(x,I.node,g,null,y))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?h(m,vi.BLACK):(h(m,vi.BLACK),h(m,vi.RED))}return u}(new kTe(n.length));return new gr(r||e,a)};let bR;const Ru={};class $s{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return P(Ru&&et,"ChildrenNode.ts has not been loaded"),bR=bR||new $s({".priority":Ru},{".priority":et}),bR}get(e){const t=Pc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof gr?t:null}hasIndex(e){return bs(this.indexSet_,e.toString())}addIndex(e,t){P(e!==Zi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(we.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Vv(r,e.getCompare()):Ru;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new $s(u,c)}addToIndexes(e,t){const r=E_(this.indexes_,(i,s)=>{const o=Pc(this.indexSet_,s);if(P(o,"Missing index implementation for "+s),i===Ru){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(we.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Vv(a,o.getCompare())}return Ru}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new we(e.name,a))),l.insert(e,e.node)}});return new $s(r,this.indexSet_)}removeFromIndexes(e,t){const r=E_(this.indexes_,i=>{if(i===Ru)return i;{const s=t.get(e.name);return s?i.remove(new we(e.name,s)):i}});return new $s(r,this.indexSet_)}}let op,ce=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&e5(this.priorityNode_),this.children_.isEmpty()&&P(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return op||(op=new n(new gr(wR),null,$s.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||op}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?op:r}}getChild(t){const r=ge(t);return null===r?this:this.getImmediateChild(r).getChild(Ke(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(P(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new we(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?op:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=ge(t);if(null===i)return r;{P(".priority"!==ge(t)||1===Uo(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Ke(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(et,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+J6(this.getPriority().val())+":"),this.forEachChild(et,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":p6(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new we(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new we(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new we(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,we.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,we.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ap?-1:0}withIndex(t){if(t===Zi||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Zi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(et),s=r.getIterator(et);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Zi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ap=new class extends ce{constructor(){super(new gr(wR),ce.EMPTY_NODE,$s.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ce.EMPTY_NODE}isEmpty(){return!1}};function _t(n,e=null){if(null===n)return ce.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),P(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ku(n,_t(e));if(n instanceof Array){let t=ce.EMPTY_NODE;return mn(n,(r,i)=>{if(bs(n,r)&&"."!==r.substring(0,1)){const s=_t(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(_t(e))}{const t=[];let r=!1;if(mn(n,(o,a)=>{if("."!==o.substring(0,1)){const l=_t(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new we(o,l)))}}),0===t.length)return ce.EMPTY_NODE;const s=Vv(t,TTe,o=>o.name,wR);if(r){const o=Vv(t,et.getCompare());return new ce(s,_t(e),new $s({".priority":o},{".priority":et}))}return new ce(s,_t(e),$s.Default)}}Object.defineProperties(we,{MIN:{value:new we(Vo,ce.EMPTY_NODE)},MAX:{value:new we(js,ap)}}),Z6.__EMPTY_NODE=ce.EMPTY_NODE,ku.__childrenNodeConstructor=ce,function(n){ER=n}(ap),function(n){r5=n}(ap),function(n){n5=n}(_t);class CR extends Ov{constructor(e){super(),this.indexPath_=e,P(!me(e)&&".priority"!==ge(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?al(e.name,t.name):s}makePost(e,t){const r=_t(e),i=ce.EMPTY_NODE.updateChild(this.indexPath_,r);return new we(t,i)}maxPost(){const e=ce.EMPTY_NODE.updateChild(this.indexPath_,ap);return new we(js,e)}toString(){return ip(this.indexPath_,0).join("/")}}const IR=new class extends Ov{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?al(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,t){const r=_t(e);return new we(t,r)}toString(){return".value"}};function cp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class DR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=et}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return P(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return P(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vo}hasEnd(){return this.endSet_}getIndexEndValue(){return P(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return P(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:js}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return P(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===et}copy(){const e=new DR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function o5(n){const e={};if(n.isDefault())return e;let t;if(n.index_===et?t="$priority":n.index_===IR?t="$value":n.index_===Zi?t="$key":(P(n.index_ instanceof CR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=wn(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=wn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+wn(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=wn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+wn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function a5(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==et&&(e.i=n.index_.toString()),e}class Uv extends z6{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ep("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(P(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Uv.getListenId_(e,r),a={};this.listens_[o]=a;const l=o5(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),Pc(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,t){const r=Uv.getListenId_(e,t);delete this.listens_[r]}get(e){const t=o5(e._queryParams),r=e._path.toString(),i=new Rc;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Nc(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=yh(a.responseText)}catch(c){$n("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&$n("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class $Te{constructor(){this.rootNode_=ce.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function jv(){return{value:null,children:new Map}}function Nu(n,e,t){if(me(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ge(e);n.children.has(r)||n.children.set(r,jv()),Nu(n.children.get(r),e=Ke(e),t)}}function MR(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{MR(i,new Ve(e.toString()+"/"+r),t)})}class zTe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class qTe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new zTe(e);const r=1e4+2e4*Math.random();np(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;mn(e,(i,s)=>{s>0&&bs(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),np(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Jr=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Jr||(Jr={})),Jr))();function PR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class $v{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Jr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(me(this.path)){if(null!=this.affectedTree.value)return P(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ve(e));return new $v(Fe(),t,this.revert)}}return P(ge(this.path)===e,"operationForChild called for unrelated child."),new $v(Ke(this.path),this.affectedTree,this.revert)}}class ul{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Jr.OVERWRITE}operationForChild(e){return me(this.path)?new ul(this.source,Fe(),this.snap.getImmediateChild(e)):new ul(this.source,Ke(this.path),this.snap)}}class Ou{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Jr.MERGE}operationForChild(e){if(me(this.path)){const t=this.children.subtree(new Ve(e));return t.isEmpty()?null:t.value?new ul(this.source,Fe(),t.value):new Ou(this.source,Fe(),t)}return P(ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ou(this.source,Ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class jo{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(me(e))return this.isFullyInitialized()&&!this.filtered_;const t=ge(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function hp(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function(n,e,t){if(null==e.childName||null==t.childName)throw kc("Should only compare child_ events.");const r=new we(e.childName,e.snapshotNode),i=new we(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Hv(n,e){return{eventCache:n,serverCache:e}}function fp(n,e,t,r){return Hv(new jo(e,t,r),n.serverCache)}function c5(n,e,t,r){return Hv(n.eventCache,new jo(e,t,r))}function zv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function dl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let NR;class tt{constructor(e,t=(()=>(NR||(NR=new gr(OIe)),NR))()){this.value=e,this.children=t}static fromObject(e){let t=new tt(null);return mn(e,(r,i)=>{t=t.set(new Ve(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Fe(),value:this.value};if(me(e))return null;{const r=ge(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Ke(e),t);return null!=s?{path:ft(new Ve(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(me(e))return this;{const t=ge(e),r=this.children.get(t);return null!==r?r.subtree(Ke(e)):new tt(null)}}set(e,t){if(me(e))return new tt(t,this.children);{const r=ge(e),s=(this.children.get(r)||new tt(null)).set(Ke(e),t),o=this.children.insert(r,s);return new tt(this.value,o)}}remove(e){if(me(e))return this.children.isEmpty()?new tt(null):new tt(null,this.children);{const t=ge(e),r=this.children.get(t);if(r){const i=r.remove(Ke(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new tt(null):new tt(this.value,s)}return this}}get(e){if(me(e))return this.value;{const t=ge(e),r=this.children.get(t);return r?r.get(Ke(e)):null}}setTree(e,t){if(me(e))return t;{const r=ge(e),s=(this.children.get(r)||new tt(null)).setTree(Ke(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new tt(this.value,o)}}fold(e){return this.fold_(Fe(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ft(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Fe(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(me(e))return null;{const s=ge(e),o=this.children.get(s);return o?o.findOnPath_(Ke(e),ft(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Fe(),t)}foreachOnPath_(e,t,r){if(me(e))return this;{this.value&&r(t,this.value);const i=ge(e),s=this.children.get(i);return s?s.foreachOnPath_(Ke(e),ft(t,i),r):new tt(null)}}foreach(e){this.foreach_(Fe(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ft(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class wi{constructor(e){this.writeTree_=e}static empty(){return new wi(new tt(null))}}function pp(n,e,t){if(me(e))return new wi(new tt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=rr(i,e);return s=s.updateChild(o,t),new wi(n.writeTree_.set(i,s))}{const i=new tt(t),s=n.writeTree_.setTree(e,i);return new wi(s)}}}function OR(n,e,t){let r=n;return mn(t,(i,s)=>{r=pp(r,ft(e,i),s)}),r}function u5(n,e){if(me(e))return wi.empty();{const t=n.writeTree_.setTree(e,new tt(null));return new wi(t)}}function FR(n,e){return null!=hl(n,e)}function hl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(rr(t.path,e)):null}function d5(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(et,(r,i)=>{e.push(new we(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new we(r,i.value))}),e}function $o(n,e){if(me(e))return n;{const t=hl(n,e);return new wi(null!=t?new tt(t):n.writeTree_.subtree(e))}}function LR(n){return n.writeTree_.isEmpty()}function Fu(n,e){return h5(Fe(),n.writeTree_,e)}function h5(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(P(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=h5(ft(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ft(n,".priority"),r)),t}}function Gv(n,e){return _5(e,n)}function r0e(n,e){if(n.snap)return Zr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Zr(ft(n.path,t),e))return!0;return!1}function s0e(n){return n.visible}function f5(n,e,t){let r=wi.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Zr(t,o)?(a=rr(t,o),r=pp(r,a,s.snap)):Zr(o,t)&&(a=rr(o,t),r=pp(r,Fe(),s.snap.getChild(a)));else{if(!s.children)throw kc("WriteRecord should have .snap or .children");if(Zr(t,o))a=rr(t,o),r=OR(r,a,s.children);else if(Zr(o,t))if(a=rr(o,t),me(a))r=OR(r,Fe(),s.children);else{const l=Pc(s.children,ge(a));if(l){const c=l.getChild(Ke(a));r=pp(r,Fe(),c)}}}}}return r}function p5(n,e,t,r,i){if(r||i){const s=$o(n.visibleWrites,e);return!i&&LR(s)?t:i||null!=t||FR(s,Fe())?Fu(f5(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Zr(c.path,e)||Zr(e,c.path))},e),t||ce.EMPTY_NODE):null}{const s=hl(n.visibleWrites,e);if(null!=s)return s;{const o=$o(n.visibleWrites,e);return LR(o)?t:null!=t||FR(o,Fe())?Fu(o,t||ce.EMPTY_NODE):null}}}function Wv(n,e,t,r){return p5(n.writeTree,n.treePath,e,t,r)}function VR(n,e){return function(n,e,t){let r=ce.EMPTY_NODE;const i=hl(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(et,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=$o(n.visibleWrites,e);return t.forEachChild(et,(o,a)=>{const l=Fu($o(s,new Ve(o)),a);r=r.updateImmediateChild(o,l)}),d5(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return d5($o(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function g5(n,e,t,r){return function(n,e,t,r,i){P(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ft(e,t);if(FR(n.visibleWrites,s))return null;{const o=$o(n.visibleWrites,s);return LR(o)?i.getChild(t):Fu(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function qv(n,e){return function(n,e){return hl(n.visibleWrites,e)}(n.writeTree,ft(n.treePath,e))}function BR(n,e,t){return function(n,e,t,r){const i=ft(e,t),s=hl(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Fu($o(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function m5(n,e){return _5(ft(n.treePath,e),n.writeTree)}function _5(n,e){return{treePath:n,writeTree:e}}class f0e{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;P("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),P(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,cp(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw kc("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,cp(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const y5=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class UR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new jo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return BR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:dl(this.viewCache_),s=function(n,e,t,r,i,s){return function(n,e,t,r,i,s,o){let a;const l=$o(n.visibleWrites,e),c=hl(l,Fe());if(null!=c)a=c;else{if(null==t)return[];a=Fu(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)0!==d(f,r)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function v5(n,e,t,r,i,s){const o=e.eventCache;if(null!=qv(r,t))return e;{let a,l;if(me(t))if(P(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=dl(e),d=VR(r,c instanceof ce?c:ce.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Wv(r,dl(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ge(t);if(".priority"===c){P(1===Uo(t),"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=g5(r,t,u,l);a=null!=d?n.filter.updatePriority(u,d):o.getNode()}else{const u=Ke(t);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=g5(r,t,o.getNode(),l);d=null!=h?o.getNode().getImmediateChild(c).updateChild(u,h):o.getNode().getImmediateChild(c)}else d=BR(r,c,e.serverCache);a=null!=d?n.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return fp(e,a,o.isFullyInitialized()||me(t),n.filter.filtersNodes())}}function Kv(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const u=o?n.filter:n.filter.getIndexedFilter();if(me(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=ge(t);if(!l.isCompleteForPath(t)&&Uo(t)>1)return e;const p=Ke(t),m=l.getNode().getImmediateChild(f).updateChild(p,r);c=".priority"===f?u.updatePriority(l.getNode(),m):u.updateChild(l.getNode(),f,m,p,y5,null)}const d=c5(e,c,l.isFullyInitialized()||me(t),u.filtersNodes());return v5(n,d,t,i,new UR(i,d,s),a)}function jR(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const u=new UR(i,e,s);if(me(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=fp(e,c,!0,n.filter.filtersNodes());else{const d=ge(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=fp(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Ke(t),f=a.getNode().getImmediateChild(d);let p;if(me(h))p=r;else{const g=u.getCompleteChild(d);p=null!=g?".priority"===_R(h)&&g.getChild(K6(h)).isEmpty()?g:g.updateChild(h,r):ce.EMPTY_NODE}l=f.equals(p)?e:fp(e,n.filter.updateChild(a.getNode(),d,p,h,u,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function w5(n,e){return n.eventCache.isCompleteForChild(e)}function E5(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function $R(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=me(t)?r:new tt(null).setTree(t,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=E5(0,e.serverCache.getNode().getImmediateChild(d),h);l=Kv(n,l,new Ve(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const g=E5(0,e.serverCache.getNode().getImmediateChild(d),h);l=Kv(n,l,new Ve(d),g,i,s,o,a)}}),l}function D0e(n,e){const t=dl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!me(e)&&!t.getImmediateChild(ge(e)).isEmpty())?t.getChild(e):null}function I5(n,e,t,r){e.type===Jr.MERGE&&null!==e.source.queryId&&(P(dl(n.viewCache_),"We should always have a full cache before handling merges"),P(zv(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function(n,e,t,r,i){const s=new f0e;let o,a;if(t.type===Jr.OVERWRITE){const c=t;c.source.fromUser?o=jR(n,e,c.path,c.snap,r,i,s):(P(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!me(c.path),o=Kv(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Jr.MERGE){const c=t;c.source.fromUser?o=function(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=ft(t,l);w5(e,ge(u))&&(a=jR(n,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=ft(t,l);w5(e,ge(u))||(a=jR(n,a,u,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(P(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=$R(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Jr.ACK_USER_WRITE){const c=t;o=c.revert?function(n,e,t,r,i,s){let o;if(null!=qv(r,t))return e;{const a=new UR(r,e,i),l=e.eventCache.getNode();let c;if(me(t)||".priority"===ge(t)){let u;if(e.serverCache.isFullyInitialized())u=Wv(r,dl(e));else{const d=e.serverCache.getNode();P(d instanceof ce,"serverChildren would be complete if leaf node"),u=VR(r,d)}u=u,c=n.filter.updateFullNode(l,u,s)}else{const u=ge(t);let d=BR(r,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,Ke(t),a,s):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,ce.EMPTY_NODE,Ke(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Wv(r,dl(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=qv(r,Fe()),fp(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function(n,e,t,r,i,s,o){if(null!=qv(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(me(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Kv(n,e,t,l.getNode().getChild(t),i,s,a,o);if(me(t)){let c=new tt(null);return l.getNode().forEachChild(Zi,(u,d)=>{c=c.set(new Ve(u),d)}),$R(n,e,t,c,i,s,a,o)}return e}{let c=new tt(null);return r.foreach((u,d)=>{const h=ft(t,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),$R(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==Jr.LISTEN_COMPLETE)throw kc("Unknown operation type: "+t.type);o=function(n,e,t,r,i){const s=e.serverCache;return v5(n,c5(e,s.getNode(),s.isFullyInitialized()||me(t),s.isFiltered()),t,r,y5,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=zv(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function(n){return{type:"value",snapshotNode:n}}(zv(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function(n,e){P(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),P(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),P(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function(n,e,t,r){return function(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),hp(n,i,"child_removed",e,r,t),hp(n,i,"child_added",e,r,t),hp(n,i,"child_moved",s,r,t),hp(n,i,"child_changed",e,r,t),hp(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let Qv,Xv;function HR(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return P(null!=s,"SyncTree gave us an op for an invalid query."),I5(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(I5(o,e,t,r));return s}}function Ho(n,e){let t=null;for(const r of n.views.values())t=t||D0e(r,e);return t}class k5{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_={visibleWrites:wi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zR(n,e,t,r,i){return function(n,e,t,r,i){P(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=pp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Lu(n,new ul({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Go(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);P(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&r0e(a,r.path)?i=!1:Zr(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function(n){n.visibleWrites=f5(n.allWrites,s0e,Fe()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=u5(n.visibleWrites,r.path):mn(r.children,l=>{n.visibleWrites=u5(n.visibleWrites,ft(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new tt(null);return null!=r.snap?s=s.set(Fe(),!0):mn(r.children,o=>{s=s.set(new Ve(o),!0)}),Lu(n,new $v(r.path,s,t))}return[]}function gp(n,e,t){return Lu(n,new ul({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Jv(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Ho(a,rr(o,e));if(c)return c});return p5(i,e,s,t,!0)}function Lu(n,e){return P5(e,n.syncPointTree_,null,Gv(n.pendingWriteTree_,Fe()))}function P5(n,e,t,r){if(me(n.path))return N5(n,e,t,r);{const i=e.get(Fe());null==t&&null!=i&&(t=Ho(i,Fe()));let s=[];const o=ge(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,u=m5(r,o);s=s.concat(P5(a,l,c,u))}return i&&(s=s.concat(HR(i,n,r,t))),s}}function N5(n,e,t,r){const i=e.get(Fe());null==t&&null!=i&&(t=Ho(i,Fe()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=m5(r,o),u=n.operationForChild(o);u&&(s=s.concat(N5(u,a,l,c)))}),i&&(s=s.concat(HR(i,n,r,t))),s}function WR(n,e){return n.tagToQueryMap.get(e)}function qR(n){const e=n.indexOf("$");return P(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ve(n.substr(0,e))}}function KR(n,e,t){const r=n.syncPointTree_.get(e);return P(r,"Missing sync point for query tag that we're tracking"),HR(r,t,Gv(n.pendingWriteTree_,e),null)}class QR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new QR(t)}node(){return this.node_}}class YR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ft(this.path_,e);return new YR(this.syncTree_,t)}node(){return Jv(this.syncTree_,this.path_)}}const F5=function(n,e,t){return n&&"object"==typeof n?(P(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?K0e(n[".sv"],e,t):"object"==typeof n[".sv"]?Q0e(n[".sv"],e):void P(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},K0e=function(n,e,t){if("timestamp"===n)return t.timestamp;P(!1,"Unexpected server value: "+n)},Q0e=function(n,e,t){n.hasOwnProperty("increment")||P(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&P(!1,"Unexpected increment value: "+r);const i=e.node();if(P(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},XR=function(n,e,t){return ZR(n,new QR(e),t)};function ZR(n,e,t){const r=n.getPriority().val(),i=F5(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=F5(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new ku(a,_t(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ku(i))),o.forEachChild(et,(a,l)=>{const c=ZR(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class JR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function tw(n,e){let t=e instanceof Ve?e:new Ve(e),r=n,i=ge(t);for(;null!==i;){const s=Pc(r.node.children,i)||{children:{},childCount:0};r=new JR(i,r,s),t=Ke(t),i=ge(t)}return r}function fl(n){return n.node.value}function eP(n,e){n.node.value=e,tP(n)}function V5(n){return n.node.childCount>0}function nw(n,e){mn(n.node.children,(t,r)=>{e(new JR(t,n,r))})}function B5(n,e,t,r){t&&!r&&e(n),nw(n,i=>{B5(i,e,!0,r)}),t&&r&&e(n)}function yp(n){return new Ve(null===n.parent?n.name:yp(n.parent)+"/"+n.name)}function tP(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===fl(n)&&!V5(n)}(t),i=bs(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,tP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,tP(n))}(n.parent,n.name,n)}const J0e=/[\[\].#$\/\u0000-\u001F\u007F]/,eDe=/[\[\].#$\u0000-\u001F\u007F]/,nP=10485760,rw=function(n){return"string"==typeof n&&0!==n.length&&!J0e.test(n)},wp=function(n,e,t){const r=t instanceof Ve?new _Te(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ll(r));if("function"==typeof e)throw new Error(n+"contains a function "+ll(r)+" with contents = "+e.toString());if(kv(e))throw new Error(n+"contains "+e.toString()+" "+ll(r));if("string"==typeof e&&e.length>nP/3&&C_(e)>nP)throw new Error(n+"contains a string greater than "+nP+" utf8 bytes "+ll(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(mn(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!rw(o)))throw new Error(n+" contains an invalid key ("+o+") "+ll(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=C_(e),Q6(n)})(r,o),wp(n,a,r),function(n){const e=n.parts_.pop();n.byteLength_-=C_(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+ll(r)+" in addition to actual children.")}},$5=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!rw(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!eDe.test(n)}(n)}(t))throw new Error(function(n,e){return`${n} failed: ${e} argument `}(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class iDe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rr(n,e,t){(function(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!yR(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(sDe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Zr(r,e)||Zr(e,r))}function sDe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ol&&gn("event: "+t.toString()),xu(r)}}}class aDe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new iDe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jv(),this.transactionQueueTree_=new JR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function W5(n){const t=n.infoData_.getNode(new Ve(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function bp(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:W5(n)})}function q5(n,e,t,r,i){n.dataUpdateCount++;const s=new Ve(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=E_(t,c=>_t(c));o=function(n,e,t,r){const i=WR(n,r);if(i){const s=qR(i),o=s.path,a=s.queryId,l=rr(o,e),c=tt.fromObject(t);return KR(n,o,new Ou(PR(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=_t(t);o=function(n,e,t,r){const i=WR(n,r);if(null!=i){const s=qR(i),o=s.path,a=s.queryId,l=rr(o,e);return KR(n,o,new ul(PR(a),l,t))}return[]}(n.serverSyncTree_,s,l,i)}else if(r){const l=E_(t,c=>_t(c));o=function(n,e,t){const r=tt.fromObject(t);return Lu(n,new Ou({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=_t(t);o=gp(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Bu(n,s)),Rr(n.eventQueue_,a,o)}function K5(n,e){sP(n,"connected",e),!1===e&&function(n){Vu(n,"onDisconnectEvents");const e=bp(n),t=jv();MR(n.onDisconnect_,Fe(),(i,s)=>{const o=function(n,e,t,r){return ZR(e,new YR(t,n),r)}(i,s,n.serverSyncTree_,e);Nu(t,i,o)});let r=[];MR(t,Fe(),(i,s)=>{r=r.concat(gp(n.serverSyncTree_,i,s));const o=function(n,e){const t=yp(X5(n,e)),r=tw(n.transactionQueueTree_,e);return function(n,e,t){let r=void 0?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{uP(n,i)}),uP(n,r),B5(r,i=>{uP(n,i)}),t}(n,i);Bu(n,o)}),n.onDisconnect_=jv(),Rr(n.eventQueue_,Fe(),r)}(n)}function sP(n,e,t){const r=new Ve("/.info/"+e),i=_t(t);n.infoData_.updateSnapshot(r,i);const s=gp(n.infoSyncTree_,r,i);Rr(n.eventQueue_,r,s)}function sw(n){return n.nextWriteId_++}function Vu(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gn(t,...e)}function lP(n,e,t){return Jv(n.serverSyncTree_,e,t)||ce.EMPTY_NODE}function ow(n,e=n.transactionQueueTree_){if(e||aw(n,e),fl(e)){const t=Z5(n,e);P(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(c=>c.currentWriteId),i=lP(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const u=t[c];P(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=rr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Vu(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(Go(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();aw(n,tw(n.transactionQueueTree_,e)),ow(n,n.transactionQueueTree_),Rr(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)xu(d[h])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{$n("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Bu(n,e)}},o)}(n,yp(e),t)}else V5(e)&&nw(e,t=>{ow(n,t)})}function Bu(n,e){const t=X5(n,e),r=yp(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=rr(t,l.path);let d,u=!1;if(P(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,i=i.concat(Go(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",i=i.concat(Go(n.serverSyncTree_,l.currentWriteId,!0));else{const h=lP(n,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){wp("transaction failed: Data returned ",f,l.path);let p=_t(f);"object"==typeof f&&null!=f&&bs(f,".priority")||(p=p.updatePriority(h.getPriority()));const m=l.currentWriteId,v=bp(n),y=XR(p,h,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=y,l.currentWriteId=sw(n),o.splice(o.indexOf(m),1),i=i.concat(zR(n.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(Go(n.serverSyncTree_,m,!0))}else u=!0,d="nodata",i=i.concat(Go(n.serverSyncTree_,l.currentWriteId,!0))}Rr(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}aw(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)xu(r[a]);ow(n,n.transactionQueueTree_)}(n,Z5(n,t),r),r}function X5(n,e){let t,r=n.transactionQueueTree_;for(t=ge(e);null!==t&&void 0===fl(r);)r=tw(r,t),t=ge(e=Ke(e));return r}function Z5(n,e){const t=[];return J5(n,e,t),t.sort((r,i)=>r.order-i.order),t}function J5(n,e,t){const r=fl(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);nw(e,i=>{J5(n,i,t)})}function aw(n,e){const t=fl(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,eP(e,t.length>0?t:void 0)}nw(e,r=>{aw(n,r)})}function uP(n,e){const t=fl(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(P(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(P(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Go(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?eP(e,void 0):t.length=s+1,Rr(n.eventQueue_,yp(e),i);for(let o=0;o<r.length;o++)xu(r[o])}}const dP=function(n,e){const t=CDe(n),r=t.namespace;return"firebase.com"===t.domain&&Xi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Xi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ve(t.pathString)}},CDe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(u,d)));const h=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$n(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class Pr{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return me(this._path)?null:_R(this._path)}get ref(){return new Ei(this._repo,this._path)}get _queryIdentifier(){const e=a5(this._queryParams),t=cR(e);return"{}"===t?"default":t}get _queryObject(){return a5(this._queryParams)}isEqual(e){if(!((e=Ct(e))instanceof Pr))return!1;const t=this._repo===e._repo,r=yR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Ei extends Pr{constructor(e,t){super(e,t,new DR,!1)}get parent(){const e=K6(this._path);return null===e?null:new Ei(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function(n){P(!Qv,"__referenceConstructor has already been defined"),Qv=n})(Ei),function(n){P(!Xv,"__referenceConstructor has already been defined"),Xv=n}(Ei);const fP={};class HDe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=pR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Uv(n.repoInfo_,(r,i,s,o)=>{q5(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>K5(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new cl(n.repoInfo_,e,(r,i,s,o)=>{q5(n,r,i,s,o)},r=>{K5(n,r)},r=>{!function(n,e){mn(e,(t,r)=>{sP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return fR[t]||(fR[t]=e()),fR[t]}(n.repoInfo_,()=>new qTe(n.stats_,n.server_)),n.infoData_=new $Te,n.infoSyncTree_=new k5({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=gp(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),sP(n,"connected",!1),n.serverSyncTree_=new k5({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Rr(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ei(this._repo,Fe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=fP[e];(!t||t[n.key]!==n)&&Xi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Xi("Cannot call "+e+" on a deleted database.")}}function zDe(n=wh(),e){const t=Cs(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=b$("database");r&&function(n,e,t,r={}){(n=Ct(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Xi("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new rp(rp.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:T$(r.mockUserToken,n.app.options.projectId);s=new rp(o)}!function(n,e,t,r){n.repoInfo_=new dR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}cl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},cl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},oR="9.23.0",Fn(new En("database",(e,{instanceIdentifier:t})=>function(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Xi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=dP(s,i),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=dP(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new rp(rp.OWNER):new zIe(n.name,n.options,e);$5("Invalid Firebase Database URL",o),me(o.path)||Xi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(n,e,t,r){let i=fP[e.name];i||(i={},fP[e.name]=i);let s=i[n.toURLString()];return s&&Xi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new aDe(n,!1,t,r),i[n.toURLString()]=s,s}(a,n,u,new HIe(n.name,t));return new HDe(d,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),He(u6,"0.14.4",void 0),He(u6,"0.14.4","esm2017");class pP{constructor(e){return e}}const l7="database",gP=new j("angularfire2.database-instances");function XDe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new pP(r)}}const ZDe={provide:class{constructor(){return Ih(l7)}},deps:[[new qe,gP]]},JDe={provide:pP,useFactory:function(n,e){const t=Ch(l7,n,e);return t&&new pP(t)},deps:[[new qe,gP],mo]};let eSe=(()=>{class n{constructor(){He("angularfire",go.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[JDe,ZDe]}),n})();function tSe(n,...e){return{ngModule:eSe,providers:[{provide:gP,useFactory:XDe(n),multi:!0,deps:[te,Pe,Th,Dh,[new qe,QA],[new qe,B_],...e]}]}}const nSe=Cn(zDe,!0),Ko=new Ae(Xo),sSe={connector:()=>new Te};function c7(n,e=sSe){const{connector:t}=e;return nt((r,i)=>{const s=t();qt(n(function(n){return new Ae(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function u7(n,e){return e?t=>Ic(e.pipe(Kt(1),nt((n,e)=>{n.subscribe(new ze(e,Xo))})),t.pipe(u7(n))):Mt((t,r)=>n(t,r).pipe(Kt(1),function(n){return _e(()=>n)}(t)))}const Tp="Service workers are disabled or not supported by this browser";class dw{constructor(e){if(this.serviceWorker=e,e){const r=Yd(e,"controllerchange").pipe(_e(()=>e.controller)),s=Ic(ih(()=>Q(e.controller)),r);this.worker=s.pipe($t(u=>!!u)),this.registration=this.worker.pipe(Sr(()=>e.getRegistration()));const c=Yd(e,"message").pipe(_e(u=>u.data)).pipe($t(u=>u&&u.type)).pipe(function(n){return n?e=>c7(n)(e):e=>function(n,e){const t=re(n)?n:()=>n;return re(e)?c7(e,{connector:t}):r=>new pj(r,t)}(new Te)(e)}());c.connect(),this.events=c}else this.worker=this.events=this.registration=function(n){return ih(()=>function(n,e){const t=re(n)?n:()=>n;return new Ae(i=>i.error(t()))}(new Error(n)))}(Tp)}postMessage(e,t){return this.worker.pipe(Kt(1),Jn(r=>{r.postMessage(M({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe($t(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Kt(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe($t(t=>t.nonce===e),Kt(1),_e(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let hSe=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Te,!t.isEnabled)return this.messages=Ko,this.notificationClicks=Ko,void(this.subscription=Ko);this.messages=this.sw.eventsOfType("PUSH").pipe(_e(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(_e(i=>i.data)),this.pushManager=this.sw.registration.pipe(_e(i=>i.pushManager));const r=this.pushManager.pipe(Sr(i=>i.getSubscription()));this.subscription=kp(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Tp));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(Sr(o=>o.subscribe(r)),Kt(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Kt(1),Sr(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Tp))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(E(dw))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})(),fSe=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Ko,this.available=Ko,this.activated=Ko,void(this.unrecoverable=Ko);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe($t(r=>"VERSION_READY"===r.type),_e(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Tp));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Tp));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(E(dw))},n.\u0275prov=V({token:n,factory:n.\u0275fac}),n})();class mP{}const d7=new j("NGSW_REGISTER_SCRIPT");function pSe(n,e,t,r){return()=>{if(!lC(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[a,...l]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=Q(null);break;case"registerWithDelay":s=h7(+l[0]||0);break;case"registerWhenStable":s=l[0]?kp(f7(n),h7(+l[0])):f7(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(te).runOutsideAngular(()=>s.pipe(Kt(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function h7(n){return Q(null).pipe(function(n,e=Cm){const t=_B(n,e);return u7(()=>t)}(n))}function f7(n){return n.get(la).isStable.pipe($t(t=>t))}function gSe(n,e){return new dw(lC(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let mSe=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:d7,useValue:t},{provide:mP,useValue:r},{provide:dw,useFactory:gSe,deps:[mP,no]},{provide:uc,useFactory:pSe,deps:[Pe,d7,mP,no],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n}),n.\u0275inj=Le({providers:[hSe,fSe]}),n})(),_Se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Be({type:n,bootstrap:[nIe]}),n.\u0275inj=Le({providers:[c6,nR],imports:[[r2,tIe,Sre,Spe(()=>Ape(tR_firebase)),xIe(()=>aIe()),Nye(()=>Fye()),tSe(()=>nSe()),LCe(()=>$Ce()),loe,Mre,Aoe,lj,Aae,tj,mSe.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();fV=!1,pne().bootstrapModule(_Se).catch(n=>console.error(n))}},re=>{re(re.s=488)}]);